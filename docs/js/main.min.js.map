{"version":3,"sources":["src/js/main.js","../../src/js/app.component.js","../../src/js/intersection/intersection.service.js","../../src/js/appear/appear-stagger.directive.js","../../src/js/appear/appear.directive.js","../../src/js/environment.js","../../src/js/http/http.service.js","../../src/js/api/api.service.js","../../src/js/storage/storage.service.js","../../src/js/storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/auth/auth-forgot.component.js","../../src/js/modal/modal.service.js","../../src/js/modal/modal-outlet.component.js","../../src/js/auth/auth.component.js","../../src/js/auth/auth-modal.component.js","../../src/js/auth/auth-signin.component.js","../../src/js/auth/auth-signup.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/contacts/contacts-simple.component.js","../../src/js/contacts/contacts.component.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/filter/filter-dropdown.component.js","../../src/js/forms/control.component.js","../../src/js/forms/control-checkbox.component.js","../../src/js/keyboard/keyboard.service.js","../../src/js/forms/control-custom-select.component.js","../../src/js/forms/control-password.component.js","../../src/js/forms/control-text.component.js","../../src/js/forms/control-textarea.component.js","../../src/js/forms/errors.component.js","../../src/js/gallery/gallery-modal.component.js","../../src/js/gallery/gallery.component.js","../../src/js/css/css.service.js","../../src/js/header/header.component.js","../../src/js/html/html.pipe.js","../../src/js/filter/filter-item.js","../../src/js/location/location.service.js","../../src/js/filter/filter.service.js","../../src/js/magazine/magazine.service.js","../../src/js/magazine/magazine.component.js","../../src/js/modal/modal.component.js","../../src/js/portfolio/portfolio.service.js","../../src/js/portfolio/portfolio.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/search/search.service.js","../../src/js/search/search.component.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/share/share.component.js","../../src/js/drag/drag.service.js","../../src/js/slider/slider.component.js","../../src/js/slider/slider-case-study.component.js","../../src/js/slider/slider-gallery.component.js","../../src/js/slider/slider-hero.component.js","../../src/js/slug/slug.pipe.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","__proto__","AppComponent","_Component","apply","arguments","onInit","getContext","node","classList","remove","Component","meta","selector","IntersectionService","observer","_this","observer_","readySubject_","BehaviorSubject","observerSubject_","Subject","IntersectionObserver","entries","next","intersection$","window","observe","pipe","map","find","entry","filter","undefined","finalize","unobserve","of","isIntersecting","firstIntersection$","first","AppearStaggerDirective","_Directive","_proto","add","onChanges","appeared","takeUntil","unsubscribe$","subscribe","src","Directive","AppearDirective","NODE","BASE_HREF","get","URLSearchParams","location","search","document","querySelector","getAttribute","STATIC","port","host","DEVELOPMENT","indexOf","split","ENV","NAME","PRODUCTION","RESOURCE","STATIC_RESOURCE","API","STATIC_API","getApiUrl","url","useStatic","Environment","options","assign","replace","substr","protocol","HttpResponse","response","data","status","statusText","ok","redirected","HttpService","http$","method","format","methods","response_","qstring","keys","encodeURI","join","from","fetch","headers","Accept","Content-Type","body","JSON","stringify","then","json","Promise","resolve","reject","catchError","error","throwError","getError","get$","query","delete$","post$","put$","patch$","object","statusCode","statusMessage","console","log","ApiService","_HttpService","call","staticGet$","staticDelete$","staticPost$","staticPut$","staticPatch$","currentLanguage","StorageService","encode","decoded","Serializer","encodeJson","encodeURIComponent","encodeBase64","decode","encoded","decodeBase64","decodeURIComponent","decodeJson","isSupported","type","storage","flag","WINDOW","x","setItem","removeItem","DOMException","code","name","Boolean","LocalStorageService","_StorageService","clear","localStorage","items$","toArray","delete","exist","getItem","getRaw","set","setRaw","toRawArray","_this2","supported","ReplaySubject","User","firstName","toUpperCase","lastName","UserService","getCurrentUser","user$_","getValue","setUser","user","me$","mapUser","static","switchMap","register$","payload","mapStatic__","login$","_this3","logout$","_this4","retrieve$","_this5","isStatic","action","fake","mapUsers","users","AuthForgotComponent","FormGroup","email","FormControl","Validators","RequiredValidator","EmailValidator","checkRequest","antiforgery","checkField","controls","changes$","changes","pushChanges","success","test","patch","reset","onSubmit","valid","submitted","sent","touched","onLogin","login","onRegister","register","outputs","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","template","getNode","tap","modal$","events$","load$","text","div","createElement","innerHTML","firstElementChild","ModalOutletComponent","modalNode","event","modal_","removeChild","appendChild","compile","AuthComponent","views","SIGN_IN","SIGN_UP","FORGOTTEN","view","hasAttribute","parseInt","onForgot","onSignIn","href","auth","onSignUp","onForgottenSent","inputs","AuthModalComponent","_AuthComponent","parentInstance","close","AuthSigninComponent","password","signIn","forgot","AuthSignupComponent","roles","countries","company","role","country","newsletter","privacy","formaction","id","dataLayer","push","form type","ClickOutsideDirective","initialFocus","_getContext","event$","fromEvent","contains","shareReplay","expression","outputFunction","makeFunction","clickOutside$","ContactsSimpleComponent","fullName","ContactsComponent","reason","firstCategory","secondCategory","message","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","DropdownItemDirective","FilterDropdownComponent","dropdownId","ControlComponent","flags","control","forEach","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keyup$","typing$","to","typing","key$","clearTimeout","setTimeout","regexp","match","ControlCustomSelectComponent","labels","word","scrollToWord","items","index","toLowerCase","item","children","scrollTo","offsetTop","setOption","isMultiple","splice","slice","hasOption","onDropped","getLabel","v","select","$event","multiple","ControlPasswordComponent","required","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","GalleryModalComponent","mode","sliderItems","sliderIndex","toggleMode","onChange","onTween","onSelect","GALLERY_MODAL","GalleryComponent","galleryItems","click$","onOpenGallery","firstGalleryItem","gallery","Array","isArray","CssService","height$","style","documentElement","innerHeight","startWith","height","vh","setProperty","HeaderComponent","searchActive","mainActive","onSearch","onMainToggle","querySelectorAll","gsap","opacity","duration","stagger","each","ease","Power3","easeOut","onSearchToggle","onOpenSub","subId","onCloseSub","isSubOpen","isPrimaryHidden","onShowSub","showPictureOrDefault","innerWidth","showPicture","img","picture","onload","overwrite","onComplete","childElementCount","HtmlPipe","_Pipe","transform","m","n","String","fromCharCode","unescapes","rx","RegExp","Pipe","FilterMode","FilterItem","change$","placeholder","values","unshift","getSelectedOption","has","selectedOption","hasAny","toggle","toggleActive","active","LocationService","keyOrValue","params","history","pushState","title","toString","deserialize","serialize","atob","parse","btoa","FilterService","initialParams","callback","filters","getParamsCount","reduce","p","c","locationParams","any","updateFilterStates","merge","auditTime","filterItems","skipFilter","initialCount","filteredItems","option","count","disabled","sort","a","b","MagazineService","all$","all","filters$","MagazineComponent","maxVisibleItems","visibleItems","busy","onLoad","filterService","scroll$","getBoundingClientRect","bottom","combineLatest","toggleFilter","clearFilter","preventDefault","stopImmediatePropagation","ModalComponent","PortfolioService","PortfolioComponent","firstItem","sortPatternItems","copy","important","order","sorted","_loop","shift","ScrollToDirective","scrollTo$","_getContext2","result","currentTop","top","o","pow","html","scroll-behavior","Math","abs","Quad","onUpdate","pageYOffset","scrollTop","SearchService","SearchComponent","delay","onSearchResults","category","DownloadService","download","blob","fileName","URL","createObjectURL","click","revokeObjectURL","a_","SecureDirective","tryDownloadHref","pop","ShareComponent","share","getTitle","getUrl","origin","charCodeAt","DragPoint","y","DragEvent","DragDownEvent","_DragEvent","distance","strength","speed","DragMoveEvent","_DragEvent2","DragUpEvent","_DragEvent3","DragService","getPosition","point","MouseEvent","clientX","clientY","TouchEvent","touches","pageX","pageY","down$","downEvent","originalEvent","down","move$","dismiss$","moveEvent","position","up$","upEvent","SliderAutoplayMode","SliderComponent","getCurrent","state","current","setCurrent","change","onActivate","checkAutoplay","onDeactivate","userGesture","disableAutoplay","container","wrapper","slider$","changed$","intersect$","focusAutoplay","resize$","over$","leave$","setActiveState","mobile","over","_this6","slide","_this7","autoplay","currentSlide","video","onEnded","active_","mobile_","over_","play","paused","pause","checkFocusAutoplay","translation","dragDownEvent","dragMoveEvent","_this8","getTranslation","onDragMoveEvent","onDragUpEvent","transformX","width","offsetWidth","hasNext","navTo","hasPrev","z","coords","parseFloat","offsetHeight","SliderCaseStudyComponent","_SliderComponent","onContentOver","onContentOut","slideWidth","SliderGalleryComponent","doClose","SliderHeroComponent","pagination$","raf$","interval","animationFrameScheduler","mouse$","mouseEvent","pagination","datas","mouse","direction","direction_","SlugPipe","VirtualItem","$key","$value","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","gutter","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","update$","context","updateView","total","highestHeight","getWidth","getGutter","col","left","rect","getCol","getHeight","intersect","getLeft","cachedNode","max","removeNode","removeIndex","getCols","floor","fill","updateNode","createNode","clonedNode","cloneNode","rxcompId","args","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","Error","trim","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, getContext } from 'rxcomp';\r\n// import { takeUntil } from 'rxjs/operators';\r\n// import { BreakpointService } from './breakpoint/breakpoint.service';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\t/*\r\n\t\tBreakpointService.observe$({\r\n\t\t\tisMobile: '(max-width: 767px)'\r\n\t\t}).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(results => {\r\n\t\t\tconsole.log('AppComponent.BreakpointService.results', results);\r\n\t\t\tthis.isMobile = results.isMobile;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\tfilter(entry => entry !== undefined),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node, isIntersecting: true });\r\n\t\t}\r\n\t}\r\n\r\n\tstatic firstIntersection$(node) {\r\n\t\treturn this.intersection$(node).pipe(\r\n\t\t\tfilter(entry => entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\tfirst(),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearStaggerDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear-stagger');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearStaggerDirective.meta = {\r\n\tselector: '[appear-stagger]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearDirective.meta = {\r\n\t// selector: '[appear],.row,.listing--series,.listing--products,.listing--cards,.listing--news,.listing--downloads',\r\n\tselector: '.picture',\r\n};\r\n","export const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const STATIC = NODE ? false : (window && (window.location.port === '41234' || window.location.host === 'actarian.github.io' || window.location.host === 'stipa.herokuapp.com'));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'stipa',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: STATIC ? './api' : '/api-static',\r\n};\r\n\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\tconsole.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n\r\nexport class Environment {\r\n\r\n\tget href() {\r\n\t\tif (window.location.host.indexOf('herokuapp') !== -1) {\r\n\t\t\treturn 'https://raw.githubusercontent.com/actarian/stipa/master/docs/';\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tget host() {\r\n\t\tlet host = window.location.host.replace('127.0.0.1', '192.168.1.2');\r\n\t\tif (host.substr(host.length - 1, 1) === '/') {\r\n\t\t\thost = host.substr(0, host.length - 1);\r\n\t\t}\r\n\t\treturn `${window.location.protocol}//${host}${BASE_HREF}`;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport const environment = new Environment({\r\n\tport: 5000,\r\n});\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tmethod = url.indexOf('.json') !== -1 ? 'GET' : method;\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\tlet qstring = methods.indexOf(method) !== -1 ? Object.keys(data).map(function(key) {\r\n\t\t    return key + '=' + encodeURI(data[key])\r\n\t\t}).join('&') : undefined;\r\n\t\treturn from(fetch(url, url.indexOf('.json') !== -1 ? {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t} : {\r\n\t\t    method: method,\r\n\t\t    headers: {\r\n\t\t        'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t    },\r\n\t\t    body: qstring\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\treturn response[format]().then(json => {\r\n\t\t\t\tresponse_.data = json;\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/*\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { getApiUrl } from '../environment';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = window.currentLanguage || 'it';\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url), data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url));\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic staticGet$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url, true), data, format);\r\n\t}\r\n\r\n\tstatic staticDelete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url, true));\r\n\t}\r\n\r\n\tstatic staticPost$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPut$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPatch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n}\r\n","import { decodeBase64, decodeJson, encodeBase64, encodeJson, Serializer, WINDOW } from 'rxcomp';\r\n\r\nexport default class StorageService {\r\n\tstatic supported = false;\r\n\tstatic encode(decoded) {\r\n\t\tlet encoded = Serializer.encode(decoded, [encodeJson, encodeURIComponent, encodeBase64]) || null;\r\n\t\treturn encoded;\r\n\t}\r\n\tstatic decode(encoded) {\r\n\t\tlet decoded = Serializer.decode(encoded, [decodeBase64, decodeURIComponent, decodeJson]);\r\n\t\treturn decoded;\r\n\t}\r\n\tstatic isSupported(type) {\r\n\t\tlet flag = false;\r\n\t\tlet storage;\r\n\t\ttry {\r\n\t\t\tstorage = WINDOW[type];\r\n\t\t\tconst x = '__storage_test__';\r\n\t\t\tstorage.setItem(x, x);\r\n\t\t\tstorage.removeItem(x);\r\n\t\t\tflag = true;\r\n\t\t} catch (error) {\r\n\t\t\tflag = error instanceof DOMException && (\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.code === 22 ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.code === 1014 ||\r\n\t\t\t\t// test name field too, because code might not be present\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.name === 'QuotaExceededError' ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n\t\t\t\t// acknowledge QuotaExceededError only if there's something already stored\r\n\t\t\t\tBoolean(storage && storage.length !== 0);\r\n\t\t}\r\n\t\treturn flag;\r\n\t}\r\n}\r\n","import { ReplaySubject } from 'rxjs';\r\nimport StorageService from './storage.service';\r\n\r\nexport default class LocalStorageService extends StorageService {\r\n\tstatic items$ = new ReplaySubject(1);\r\n\tstatic clear() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic delete(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic exist(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn localStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tstatic get(name) {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\tstatic set(name, value) {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\tstatic getRaw(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = localStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tstatic setRaw(name, value) {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tlocalStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic toArray() {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\tstatic toRawArray() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(localStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tstatic isSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('localStorage');\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport LocalStorageService from '../storage/local-storage.service';\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default class UserService {\r\n\r\n\tstatic getCurrentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\t//return ApiService.staticGet$(`/user/me`).pipe(\r\n\t\treturn ApiService.get$(`/user/me`).pipe(\r\n\t\t\t// map((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\tcatchError(error => of (null)),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/register`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/login`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn ApiService.staticPost$(`/user/logout`).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'logout')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic retrieve$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/forget`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tstatic update$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/updateprofile`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic mapStatic__(user, isStatic, action = 'me') {\r\n\t\tif (!isStatic) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic fake(user) {\r\n\t\tuser.firstName = user.firstName || 'Jhon';\r\n\t\tuser.lastName = user.lastName || 'Appleseed';\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic mapUser(user, isStatic) {\r\n\t\treturn isStatic ? UserService.fake(new User(user)) : new User(user);\r\n\t}\r\n\r\n\tstatic mapUsers(users, isStatic) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x, isStatic)) : [];\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$_ = new BehaviorSubject(null);\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthForgotComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthForgotComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthForgotComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.retrieve$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.onSubmit', response);\r\n\t\t\t\t\tthis.sent.next(true);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthForgotComponent.meta = {\r\n\tselector: '[auth-forgot]',\r\n\toutputs: ['sent', 'login', 'register'],\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.views = {\r\n\t\t\tSIGN_IN: 1,\r\n\t\t\tSIGN_UP: 2,\r\n\t\t\tFORGOTTEN: 3,\r\n\t\t};\r\n\t\tthis.view = node.hasAttribute('view') ? parseInt(node.getAttribute('view')) : this.views.SIGN_IN;\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\t// console.log('AuthComponent.onForgot');\r\n\t\tthis.view = this.views.FORGOTTEN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('AuthComponent.onLogin');\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('AuthComponent.onRegister');\r\n\t\tthis.view = this.views.SIGN_UP;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('AuthComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('AuthComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgottenSent(email) {\r\n\t\t/*\r\n\t\tconsole.log('AuthComponent.onForgottenSent', email);\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nAuthComponent.meta = {\r\n\tselector: '[auth]',\r\n\tinputs: ['auth']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\nimport AuthComponent from './auth.component';\r\n\r\nexport default class AuthModalComponent extends AuthComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('AuthModalComponent.onInit', data);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('AuthModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('AuthModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\t// console.log('AuthModalComponent.onDestroy');\r\n\t}\r\n\t*/\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nAuthModalComponent.meta = {\r\n\tselector: '[auth-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tinterests: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthSigninComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: 'password',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSigninComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSigninComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Login', this.form.value)\r\n\t\t\tUserService.login$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.signIn.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot() {\r\n\t\tthis.forgot.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSigninComponent.meta = {\r\n\tselector: '[auth-signin]',\r\n\toutputs: ['signIn', 'forgot', 'register'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t    roles: [],\r\n            countries: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\trole: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n            action: window.formaction\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('WorkWithUsComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\tcountry: 'Italy',\r\n\t\t\trole: role,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.form.submitted = false;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSignupComponent.meta = {\r\n\tselector: '[auth-signup]',\r\n\t//outputs: ['signUp', 'login'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsSimpleComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfullName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t// privacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfullName: 'Jhon Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t// privacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/contacts', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsSimpleComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsSimpleComponent.meta = {\r\n\tselector: '[contacts-simple]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\treason: [],\r\n\t\t\tfirstCategory: [],\r\n\t\t\tsecondCategory: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfullName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\treason: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfirstCategory: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tsecondCategory: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tcontrols.reason.options = data.reason;\r\n\t\tcontrols.firstCategory.options = data.firstCategory;\r\n\t\tcontrols.secondCategory.options = data.secondCategory;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst reason = this.controls.reason.options.length ? this.controls.reason.options[0].id : null;\r\n\t\tconst firstCategory = this.controls.firstCategory.options.length ? this.controls.firstCategory.options[0].id : null;\r\n\t\tconst secondCategory = this.controls.secondCategory.options.length ? this.controls.secondCategory.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfullName: 'Jhon Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\treason: reason,\r\n\t\t\tfirstCategory: firstCategory,\r\n\t\t\tsecondCategory: secondCategory,\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/contacts', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsComponent.meta = {\r\n\tselector: '[contacts]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\n\r\nexport default class FilterDropdownComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t}\r\n\r\n}\r\n\r\nFilterDropdownComponent.meta = {\r\n\tselector: '[filter-dropdown]',\r\n\tinputs: ['label', 'filter'],\r\n\ttemplate: /* html */ `\r\n\t\t<span class=\"text\" [innerHTML]=\"label\"></span>\r\n\t\t<span class=\"btn--dropdown\" [dropdown]=\"dropdownId\">\r\n\t\t\t<span [innerHTML]=\"filter.label\"></span> <svg class=\"filter\"><use xlink:href=\"#filter\"></use></svg>\r\n\t\t\t<!-- dropdown -->\r\n\t\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t\t<div class=\"category\" [innerHTML]=\"filter.label\"></div>\r\n\t\t\t\t<ul class=\"nav--dropdown\">\r\n\t\t\t\t\t<li *for=\"let item of filter.options\">\r\n\t\t\t\t\t\t<span [class]=\"{ active: filter.has(item), disabled: item.disabled }\" (click)=\"filter.set(item)\" [innerHTML]=\"item.label\"></span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</span>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" [formControlName]=\"name\" />\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<errors-component *if=\"control.validators.length\" [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent } from 'rxjs';\r\nimport { filter, map, shareReplay } from 'rxjs/operators';\r\n\r\nexport default class KeyboardService {\r\n\r\n\tstatic keydown$() {\r\n\t\treturn fromEvent(window, 'keydown').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\treturn fromEvent(window, 'keyup').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tlet typing = '',\r\n\t\t\tto;\r\n\t\treturn this.key$().pipe(\r\n\t\t\tmap(key => {\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t}\r\n\t\t\t\ttyping += key;\r\n\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\ttyping = '';\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn typing;\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tconst regexp = /\\w/;\r\n\t\treturn this.keydown$().pipe(\r\n\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\tmap(event => event.key),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tsetOption(item) {\r\n\t\tthis.control.value = item.id;\r\n\t\t// DropdownDirective.dropdown$.next(null);\r\n\t}\r\n\t*/\r\n\r\n\tsetOption(item) {\r\n\t\tconsole.log('setOption', item, this.isMultiple);\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tthis.control.value = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tthis.control.value = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log($event);\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\t/*\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.add('dropped');\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tonClickOutside(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.remove('dropped');\r\n\t}\r\n\t*/\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\tinputs: ['control', 'label', 'multiple', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"getLabel()\"></span>\r\n            <input type=\"text\" style=\"display:none\" class=\"control--select\" [formControl]=\"control\" [formControlName]=\"name\" />\r\n\t\t\t<svg class=\"icon caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t<li *for=\"let item of control.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n\t/*  (click)=\"onClick($event)\" (clickOutside)=\"onClickOutside($event)\" */\r\n\t/*  <!-- <div class=\"dropdown\" [class]=\"{ dropped: dropped }\"> --> */\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [innerHTML]=\"label\" rows=\"6\" [formControlName]=\"name\"></textarea>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nexport default class GalleryModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.mode = 'slider';\r\n\t\tconst { parentInstance, node } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = this.data = parentInstance.modal.data;\r\n\t\t\tthis.sliderItems = data.items;\r\n\t\t\tthis.sliderIndex = data.index;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode = this.mode === 'slider' ? 'grid' : 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonChange(event) {\r\n\t\t// console.log('onChange', event);\r\n\t}\r\n\r\n\tonTween(event) {\r\n\t\t// console.log('onTween', event);\r\n\t}\r\n\r\n\tonSelect(index) {\r\n\t\tthis.sliderIndex = index;\r\n\t\tthis.mode = 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nGalleryModalComponent.meta = {\r\n\tselector: '[gallery-modal]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { BASE_HREF, STATIC } from '../environment';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst GALLERY_MODAL = STATIC ? BASE_HREF + 'gallery-modal.html' : 'template/gallery-modal.cshtml';\r\n\r\nexport default class GalleryComponent extends Component {\r\n\r\n\tget galleryItems() {\r\n\t\tif (typeof this.gallery === 'string') {\r\n\t\t\treturn [this.gallery];\r\n\t\t} else if (Array.isArray(this.gallery)) {\r\n\t\t\treturn this.gallery;\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tget firstGalleryItem() {\r\n\t\tconst items = this.galleryItems;\r\n\t\tif (items.length) {\r\n\t\t\treturn items[0];\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.galleryItems.forEach(item => {\r\n\t\t\tif (GalleryComponent.items.indexOf(item) === -1) {\r\n\t\t\t\tGalleryComponent.items.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => this.onOpenGallery(event));\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst {node} = getContext(this);\r\n\t\treturn fromEvent(node, 'click');\r\n\t}\r\n\r\n\tonOpenGallery(event) {\r\n\t\tconst items = GalleryComponent.items;\r\n\t\tconst index = items.indexOf(this.firstGalleryItem);\r\n\t\t// console.log('GalleryComponent.onOpenGallery', this.gallery, items, index);\r\n\t\tModalService.open$({ src: GALLERY_MODAL, data: { items, index } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// this.pushChanges();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nGalleryComponent.items = [];\r\n\r\nGalleryComponent.meta = {\r\n\tselector: '[gallery]',\r\n\tinputs: ['gallery']\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\n// import UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.searchActive = false;\r\n\t\tthis.mainActive = false;\r\n\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tsearch: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\tconsole.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t}\r\n\r\n\tonSearch() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst form = node.querySelector('form');\r\n\t\tconst action = form.getAttribute('action');\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\twindow.location.href = `${action}?search=${this.form.value.search}`;\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonMainToggle() {\r\n\t\tthis.searchActive = false;\r\n\t\tthis.mainActive = !this.mainActive;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.nav--primary-menu > li'));\r\n\t\tgsap.to(items, {\r\n\t\t\topacity: this.mainActive ? 1 : 0,\r\n\t\t\tduration: 0.35,\r\n\t\t\tstagger: {\r\n\t\t\t\teach: 0.05,\r\n\t\t\t\tease: Power3.easeOut\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSearchToggle() {\r\n\t\tthis.mainActive = false;\r\n\t\tthis.searchActive = !this.searchActive;\r\n\t\tconst { node } = getContext(this);\r\n\t\t/*\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.nav--primary-menu > li'));\r\n\t\tgsap.to(items, {\r\n\t\t\topacity: this.searchActive ? 1 : 0,\r\n\t\t\tduration: 0.35,\r\n\t\t\tstagger: {\r\n\t\t\t\teach: 0.05,\r\n\t\t\t\tease: Power3.easeOut\r\n\t\t\t}\r\n\t\t});\r\n\t\t*/\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpenSub(subId) {\r\n\t\tthis.subId = subId;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonCloseSub(subId) {\r\n\t\tif (this.subId === subId) {\r\n\t\t\tthis.subId = null;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tisSubOpen(subId) {\r\n\t\treturn this.subId === subId;\r\n\t}\r\n\r\n\tisPrimaryHidden() {\r\n\t\treturn this.subId != null;\r\n\t}\r\n\r\n\tonShowSub(subId) {\r\n\t\tthis.showPictureOrDefault();\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\tthis.subId = subId || null;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tshowPicture(src) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst picture = node.querySelector('.main-menu__picture');\r\n\t\tlet img;\r\n\t\tif (src) {\r\n\t\t\timg = document.createElement('img');\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tpicture.appendChild(img);\r\n\t\t\t\tgsap.set(img, { opacity: 0 });\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 1,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 1) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\timg.src = src;\r\n\t\t} else {\r\n\t\t\timg = picture.querySelector('img');\r\n\t\t\tif (img) {\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 0,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 0) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tshowPictureOrDefault(src) {\r\n\t\tsrc = src || '/stipa/img/header/default.jpg';\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst picture = node.querySelector('.main-menu__picture');\r\n\t\tlet img = picture.querySelector('img');\r\n\t\tif (!img || img.getAttribute('src') !== src) {\r\n\t\t\timg = document.createElement('img');\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tpicture.appendChild(img);\r\n\t\t\t\tgsap.set(img, { opacity: 0 });\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 1,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 1) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\timg.src = src;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header'\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tget empty() {\r\n\t\treturn this.values.length === 0;\r\n\t}\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thasAny() {\r\n\t\treturn this.values.length > 0;\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.clear', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n}\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\tthis.updateFilterStates(filters, items, true);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items, initialCount) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = initialCount ? items : this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\tinitialCount ? option.initialCount = count : option.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t\tif (initialCount) {\r\n\t\t\t\tfilter.options.sort((a, b) => b.initialCount - a.initialCount);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class MagazineService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/magazine/all').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn from([window.all]);\r\n\t\t\t//return ApiService.staticGet$('/magazine/all').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/magazine/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn from([window.filters]);\r\n\t\t\t//return ApiService.staticGet$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport MagazineService from './magazine.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class MagazineComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.busy = false;\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'category':\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (!this.busy && this.items.length > this.visibleItems.length) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tMagazineService.all$(),\r\n\t\t\tMagazineService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nMagazineComponent.meta = {\r\n\tselector: '[magazine]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class PortfolioService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil, tap } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport PortfolioService from './portfolio.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class PortfolioComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.firstItem = null;\r\n\t\tthis.visibleItems = null;\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.busy = false;\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'area':\r\n\t\t\t\tcase 'city':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\tmap(items => this.sortPatternItems(items)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tsortPatternItems(items) {\r\n\t\tconst copy = items.slice();\r\n\t\tconst firstItem = this.firstItem = copy.find(x => x.important);\r\n\t\tif (firstItem) {\r\n\t\t\tcopy.splice(copy.indexOf(firstItem), 1);\r\n\t\t}\r\n\t\tconst order = [false, false, true, false, false, false, false, true];\r\n\t\tconst sorted = [];\r\n\t\tlet\ti = 0;\r\n\t\twhile (copy.length) {\r\n\t\t\tconst important = order[i % order.length];\r\n\t\t\tconst item = copy.find(x => x.important === important);\r\n\t\t\tif (item) {\r\n\t\t\t\tcopy.splice(copy.indexOf(item), 1);\r\n\t\t\t\tsorted.push(item);\r\n\t\t\t} else {\r\n\t\t\t\tsorted.push(copy.shift());\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn sorted;\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (!this.busy && this.items.length > this.visibleItems.length) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tPortfolioService.all$(),\r\n\t\t\tPortfolioService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nPortfolioComponent.meta = {\r\n\tselector: '[portfolio]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class SearchService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/search/all').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\t// return from([window.all]);\r\n\t\t\treturn ApiService.staticGet$('/search/all').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/search/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/search/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\t// return from([window.filters]);\r\n\t\t\treturn ApiService.staticGet$('/search/filters').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/search/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { delay, first, takeUntil, tap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport LocationService from '../location/location.service';\r\nimport SearchService from './search.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class SearchComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tsearch: new FormControl(LocationService.get('search'), Validators.RequiredValidator()),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.onSearch();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tSearchService.all$(),\r\n\t\t\tSearchService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonSearch() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.busy = true;\r\n\t\t\tthis.items = [];\r\n\t\t\tthis.filters = {};\r\n\t\t\tthis.pushChanges();\r\n\t\t\tthis.load$(this.form.value.search).pipe(\r\n\t\t\t\tdelay(STATIC ? 1000 : 1),\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(data => {\r\n\t\t\t\tthis.busy = false;\r\n\t\t\t\tthis.items = data[0];\r\n\t\t\t\tthis.filters = data[1];\r\n\t\t\t\tthis.onSearchResults();\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocationService.set('search', this.form.value.search);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSearchResults() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'category':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (!this.busy && this.items.length > this.visibleItems.length) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nSearchComponent.meta = {\r\n\tselector: '[search]',\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/stipa/auth-modal.html' : '/stipa/auth-modal.html';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = node.getAttribute('href');\r\n\t\tHttpService.get$(href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t\tmap(response => response.data),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log('SecureDirective.tryDownloadHref', error);\r\n\t\t\tthis.onLogin();\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tconsole.log('SecureDirective.onLogin');\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class ShareComponent extends Component {\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.getUrl()}&media=&description=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.getUrl()}&title=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.getTitle()}%20${this.getUrl()}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.getTitle()}&body=${this.getUrl()}`;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconsole.log('ShareComponent.onInit', this.share, this.title);\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.title);\r\n\t}\r\n\r\n\tgetTitle() {\r\n\t\tlet title = this.title ? this.title : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tgetUrl() {\r\n\t\tlet url = this.share;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareComponent.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'title'],\r\n\ttemplate: /* html */`\r\n\t<ul class=\"nav--share\">\r\n\t\t<li>\r\n\t\t\t<a [href]=\"twitterUrl\" target=\"_blank\"><svg class=\"twitter\"><use xlink:href=\"#twitter\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"facebookUrl\" target=\"_blank\"><svg class=\"facebook\"><use xlink:href=\"#facebook\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"pinterestUrl\" target=\"_blank\"><svg class=\"pinterest\"><use xlink:href=\"#pinterest\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"mailToUrl\"><svg class=\"email\"><use xlink:href=\"#email\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<!--\r\n\t\t<li>\r\n\t\t\t<a [href]=\"whatsappUrl\" target=\"_blank\"><svg class=\"whatsapp\"><use xlink:href=\"#whatsapp\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"linkedInUrl\" target=\"_blank\"><svg class=\"linkedin\"><use xlink:href=\"#linkedin\"></use></svg></a>\r\n\t\t</li>\r\n\t\t-->\r\n\t</ul>\r\n\t`,\r\n};\r\n","import { fromEvent, merge, ReplaySubject, Subject } from 'rxjs';\r\nimport { filter, map, startWith, switchMap, takeUntil } from 'rxjs/operators';\r\n\r\nexport class DragPoint {\r\n\tconstructor() {\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t}\r\n}\r\n\r\nexport class DragEvent {\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class DragDownEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragMoveEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragUpEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t}\r\n}\r\n\r\nexport default class DragService {\r\n\r\n\tstatic getPosition(event, point) {\r\n\t\tif (event instanceof MouseEvent) {\r\n\t\t\tpoint ? (\r\n\t\t\t\tpoint.x = event.clientX,\r\n\t\t\t\tpoint.y = event.clientY\r\n\t\t\t) : point = {\r\n\t\t\t\tx: event.clientX,\r\n\t\t\t\ty: event.clientY\r\n\t\t\t};\r\n\t\t} else if (event instanceof TouchEvent) {\r\n\t\t\tif (event.touches.length > 0) {\r\n\t\t\t\tpoint ? (\r\n\t\t\t\t\tpoint.x = event.touches[0].pageX,\r\n\t\t\t\t\tpoint.y = event.touches[0].pageY\r\n\t\t\t\t) : point = {\r\n\t\t\t\t\tx: event.touches[0].pageX,\r\n\t\t\t\t\ty: event.touches[0].pageY\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn point;\r\n\t}\r\n\r\n\tstatic down$(target, events$) {\r\n\t\tlet downEvent;\r\n\t\treturn merge(\r\n\t\t\tfromEvent(target, 'mousedown'),\r\n\t\t\tfromEvent(target, 'touchstart')\r\n\t\t).pipe(\r\n\t\t\tmap((event) => {\r\n\t\t\t\tdownEvent = downEvent || new DragDownEvent();\r\n\t\t\t\tdownEvent.node = target;\r\n\t\t\t\tdownEvent.target = event.target;\r\n\t\t\t\tdownEvent.originalEvent = event;\r\n\t\t\t\tdownEvent.down = this.getPosition(event, downEvent.down);\r\n\t\t\t\tif (downEvent.down) {\r\n\t\t\t\t\tdownEvent.distance = new DragPoint();\r\n\t\t\t\t\tdownEvent.strength = new DragPoint();\r\n\t\t\t\t\tdownEvent.speed = new DragPoint();\r\n\t\t\t\t\tevents$.next(downEvent);\r\n\t\t\t\t\treturn downEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tfilter(event => event !== undefined),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic move$(target, events$, dismiss$, downEvent) {\r\n\t\tlet moveEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mousemove' : 'touchmove').pipe(\r\n\t\t\tstartWith(downEvent),\r\n\t\t\tmap((event) => {\r\n\t\t\t\tmoveEvent = moveEvent || new DragMoveEvent();\r\n\t\t\t\tmoveEvent.node = target;\r\n\t\t\t\tmoveEvent.target = event.target;\r\n\t\t\t\tmoveEvent.originalEvent = event;\r\n\t\t\t\tmoveEvent.position = this.getPosition(event, moveEvent.position);\r\n\t\t\t\tconst dragging = downEvent.down !== undefined && moveEvent.position !== undefined;\r\n\t\t\t\tif (dragging) {\r\n\t\t\t\t\tmoveEvent.distance.x = moveEvent.position.x - downEvent.down.x;\r\n\t\t\t\t\tmoveEvent.distance.y = moveEvent.position.y - downEvent.down.y;\r\n\t\t\t\t\tmoveEvent.strength.x = moveEvent.distance.x / window.innerWidth * 2;\r\n\t\t\t\t\tmoveEvent.strength.y = moveEvent.distance.y / window.innerHeight * 2;\r\n\t\t\t\t\tmoveEvent.speed.x = downEvent.speed.x + (moveEvent.strength.x - downEvent.strength.x) * 0.1;\r\n\t\t\t\t\tmoveEvent.speed.y = downEvent.speed.y + (moveEvent.strength.y - downEvent.strength.y) * 0.1;\r\n\t\t\t\t\tdownEvent.distance.x = moveEvent.distance.x;\r\n\t\t\t\t\tdownEvent.distance.y = moveEvent.distance.y;\r\n\t\t\t\t\tdownEvent.speed.x = moveEvent.speed.x;\r\n\t\t\t\t\tdownEvent.speed.y = moveEvent.speed.y;\r\n\t\t\t\t\tdownEvent.strength.x = moveEvent.strength.x;\r\n\t\t\t\t\tdownEvent.strength.y = moveEvent.strength.y;\r\n\t\t\t\t\tevents$.next(moveEvent);\r\n\t\t\t\t\treturn moveEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic up$(target, events$, dismiss$, downEvent) {\r\n\t\tlet upEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mouseup' : 'touchend').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tupEvent = upEvent || new DragUpEvent();\r\n\t\t\t\tevents$.next(upEvent);\r\n\t\t\t\tdismiss$.next();\r\n\t\t\t\t// console.log(downEvent.distance);\r\n\t\t\t\tif (Math.abs(downEvent.distance.x) > 10) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t}\r\n\t\t\t\treturn upEvent;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic events$(target) {\r\n\t\ttarget = target || document;\r\n\t\tconst events$ = new ReplaySubject(1);\r\n\t\tconst dismiss$ = new Subject();\r\n\t\treturn this.down$(target, events$).pipe(\r\n\t\t\tswitchMap((downEvent) => merge(\r\n\t\t\t\tthis.move$(target, events$, dismiss$, downEvent),\r\n\t\t\t\tthis.up$(target, events$, dismiss$, downEvent),\r\n\t\t\t).pipe(\r\n\t\t\t\ttakeUntil(dismiss$),\r\n\t\t\t)),\r\n\t\t\tswitchMap(() => events$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { fromEvent, merge } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport DragService, { DragDownEvent, DragMoveEvent, DragUpEvent } from '../drag/drag.service';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport const SliderAutoplayMode = {\r\n\tNone: 0,\r\n\tAutoplay: 1,\r\n\tFocusAutoplay: 2,\r\n};\r\n\r\nexport default class SliderComponent extends Component {\r\n\r\n\tget current() { return this.getCurrent(); }\r\n\tset current(current) { this.setCurrent(current); }\r\n\r\n\tgetCurrent() {\r\n\t\tif (!this.state) {\r\n\t\t\tthis.state = { current: 0 };\r\n\t\t}\r\n\t\t// console.log('SliderComponent.get.current', this.state.current);\r\n\t\treturn this.state.current;\r\n\t}\r\n\tsetCurrent(current = 0) {\r\n\t\t// console.log('SliderComponent.setCurrent', current);\r\n\t\tif (!this.state) {\r\n\t\t\tthis.state = { current: 0 };\r\n\t\t}\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tget active() {\r\n\t\treturn this.active_;\r\n\t}\r\n\tset active(active) {\r\n\t\tif (this.active_ !== active) {\r\n\t\t\tthis.active_ = active;\r\n\t\t\tactive ? this.onActivate() : this.onDeactivate();\r\n\t\t}\r\n\t}\r\n\tonActivate() {\r\n\t\t// console.log('SliderComponent.onActivate');\r\n\t\tthis.checkAutoplay();\r\n\t}\r\n\tonDeactivate() {\r\n\t\t// console.log('SliderComponent.onDeactivate');\r\n\t\tthis.userGesture = false;\r\n\t\tthis.disableAutoplay();\r\n\t}\r\n\r\n\tget mobile() {\r\n\t\treturn this.mobile_;\r\n\t}\r\n\tset mobile(mobile) {\r\n\t\tif (this.mobile_ !== mobile) {\r\n\t\t\tthis.mobile_ = mobile;\r\n\t\t\tthis.checkFocusAutoplay();\r\n\t\t}\r\n\t}\r\n\tget over() {\r\n\t\treturn this.over_;\r\n\t}\r\n\tset over(over) {\r\n\t\tif (this.over_ !== over) {\r\n\t\t\tthis.over_ = over;\r\n\t\t\tthis.checkFocusAutoplay();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.container = node;\r\n\t\tthis.wrapper = node.querySelector('.slider__wrapper');\r\n\t\tlet items;\r\n\t\tif (node.hasAttribute('[items]')) {\r\n\t\t\titems = this.items || [];\r\n\t\t} else {\r\n\t\t\titems = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\t}\r\n\t\tthis.items = items;\r\n\t\t// console.log('SliderComponent.onInit', this.items);\r\n\t\tthis.userGesture = false;\r\n\t\t// this.userGesture$ = new Subject();\r\n\t\tsetTimeout(() => {\r\n\t\t\t// this.change.next(this.current);\r\n\t\t\t/*\r\n\t\t\tgsap.set(this.wrapper, {\r\n\t\t\t\tx: -100 * this.current + '%',\r\n\t\t\t});\r\n\t\t\t*/\r\n\t\t\tthis.slider$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('dragService', event);\r\n\t\t\t});\r\n\t\t}, 1);\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.intersect$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe();\r\n\t\tif (typeof this.focusAutoplay === 'number') {\r\n\t\t\tmerge(this.resize$(), this.over$(node), this.leave$(node)).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe();\r\n\t\t}\r\n\t\t/*\r\n\t\tthis.autoplay$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(() => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\t*/\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tthis.setActiveState();\r\n\t\t\t\tthis.checkAutoplay();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tintersect$(node) {\r\n\t\treturn IntersectionService.intersection$(node).pipe(\r\n\t\t\ttap(entry => this.active = entry.isIntersecting),\r\n\t\t);\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\ttap(() => this.mobile = window.innerWidth < 768),\r\n\t\t);\r\n\t}\r\n\r\n\tover$(node) {\r\n\t\treturn fromEvent(node, 'mouseover').pipe(\r\n\t\t\ttap(() => this.over = true),\r\n\t\t);\r\n\t}\r\n\r\n\tleave$(node) {\r\n\t\treturn fromEvent(node, 'mouseleave').pipe(\r\n\t\t\ttap(() => this.over = false),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => {\r\n\t\t\tif (i === current) {\r\n\t\t\t\tslide.classList.add('active');\r\n\t\t\t} else {\r\n\t\t\t\tslide.classList.remove('active');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcheckAutoplay() {\r\n\t\tthis.disableAutoplay();\r\n\t\tlet mode = SliderAutoplayMode.None;\r\n\t\tlet autoplay = 0;\r\n\t\tif (typeof this.autoplay === 'number') {\r\n\t\t\tautoplay = this.autoplay;\r\n\t\t\tmode = SliderAutoplayMode.Autoplay;\r\n\t\t}\r\n\t\tif (typeof this.focusAutoplay === 'number') {\r\n\t\t\tautoplay = this.focusAutoplay;\r\n\t\t\tmode = SliderAutoplayMode.FocusAutoplay;\r\n\t\t}\r\n\t\tif (mode === SliderAutoplayMode.None) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tconst currentSlide = slides[current];\r\n\t\t// console.log('SliderComponent.checkAutoplay', mode, this.active_, autoplay, currentSlide, node);\r\n\t\tif (currentSlide) {\r\n\t\t\tconst video = currentSlide.querySelector('video');\r\n\t\t\tif (video) {\r\n\t\t\t\tconst onEnded = () => {\r\n\t\t\t\t\tvideo.removeEventListener('ended', onEnded);\r\n\t\t\t\t\tif ((mode === SliderAutoplayMode.Autoplay && this.active_) ||\r\n\t\t\t\t\t\t(mode === SliderAutoplayMode.FocusAutoplay && ((this.mobile_ && this.active_) || (!this.mobile_ && this.over_)))) {\r\n\t\t\t\t\t\t// if (autoplay && !this.userGesture) {\r\n\t\t\t\t\t\tthis.setCurrent((current + 1) % this.items.length);\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tvideo.addEventListener('ended', onEnded);\r\n\t\t\t\tvideo.play();\r\n\t\t\t} else {\r\n\t\t\t\tif ((mode === SliderAutoplayMode.Autoplay && this.active_ && !this.userGesture) ||\r\n\t\t\t\t\t(mode === SliderAutoplayMode.FocusAutoplay && ((this.mobile_ && this.active_) || (!this.mobile_ && this.over_)))) {\r\n\t\t\t\t\tthis.to = setTimeout(() => {\r\n\t\t\t\t\t\tthis.setCurrent((current + 1) % this.items.length);\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}, autoplay);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdisableAutoplay() {\r\n\t\tif (this.to) {\r\n\t\t\tclearTimeout(this.to);\r\n\t\t\tthis.to = null;\r\n\t\t}\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst videos = Array.prototype.slice.call(node.querySelectorAll('video'));\r\n\t\tvideos.forEach(video => {\r\n\t\t\tif (!video.paused) {\r\n\t\t\t\tvideo.pause();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// console.log('SliderComponent.disableAutoplay', node);\r\n\t}\r\n\r\n\tcheckFocusAutoplay() {\r\n\t\tif (this.mobile_) {\r\n\t\t\tif (this.active_) {\r\n\t\t\t\tthis.checkAutoplay();\r\n\t\t\t} else {\r\n\t\t\t\tthis.disableAutoplay();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.over_) {\r\n\t\t\t\t// this.checkAutoplay();\r\n\t\t\t\t// fire immediately !!!\r\n\t\t\t\tthis.setCurrent((this.current + 1) % this.items.length);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t} else {\r\n\t\t\t\tthis.disableAutoplay();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslider$() {\r\n\t\tlet translation, dragDownEvent, dragMoveEvent;\r\n\t\treturn DragService.events$(this.wrapper).pipe(\r\n\t\t\ttap((event) => {\r\n\t\t\t\tif (event instanceof DragDownEvent) {\r\n\t\t\t\t\ttranslation = this.getTranslation(this.wrapper, this.container);\r\n\t\t\t\t\tdragDownEvent = event;\r\n\t\t\t\t} else if (event instanceof DragMoveEvent) {\r\n\t\t\t\t\tdragMoveEvent = this.onDragMoveEvent(dragDownEvent, event, translation);\r\n\t\t\t\t\t// console.log('DragMoveEvent');\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tif (Math.abs(dragMoveEvent.distance.x) > Math.abs(dragMoveEvent.distance.y)) {\r\n\t\t\t\t\t\tdragMoveEvent.originalEvent.preventDefault();\r\n\t\t\t\t\t\tdragMoveEvent.originalEvent.stopImmediatePropagation();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t} else if (event instanceof DragUpEvent) {\r\n\t\t\t\t\tif (dragMoveEvent) {\r\n\t\t\t\t\t\tthis.container.classList.remove('dragging');\r\n\t\t\t\t\t\tthis.wrapper.style.transform = null;\r\n\t\t\t\t\t\tthis.onDragUpEvent(dragDownEvent, dragMoveEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log('DragUpEvent');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tautoplay$() {\r\n\t\tif (this.autoplay) {\r\n\t\t\tconst autoplay = typeof this.autoplay === 'number' ? this.autoplay : 4000;\r\n\t\t\treturn interval(autoplay).pipe(\r\n\t\t\t\ttakeUntil(this.userGesture$),\r\n\t\t\t\ttap(() => {\r\n\t\t\t\t\tthis.setCurrent((this.current + 1) % this.items.length);\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tonDragMoveEvent(dragDownEvent, dragMoveEvent, translation) {\r\n\t\tthis.container.classList.add('dragging');\r\n\t\tconst transformX = translation.x + dragMoveEvent.distance.x;\r\n\t\tthis.wrapper.style.transform = `translate3d(${transformX}px, ${0}px, ${0}px)`;\r\n\t\treturn dragMoveEvent;\r\n\t}\r\n\r\n\tonDragUpEvent(dragDownEvent, dragMoveEvent) {\r\n\t\tconst width = this.container.offsetWidth;\r\n\t\tif (dragMoveEvent.distance.x * -1 > width * 0.25 && this.hasNext()) {\r\n\t\t\tthis.navTo(this.current + 1);\r\n\t\t} else if (dragMoveEvent.distance.x * -1 < width * -0.25 && this.hasPrev()) {\r\n\t\t\tthis.navTo(this.current - 1);\r\n\t\t} else {\r\n\t\t\tthis.wrapper.style.transform = `translate3d(${-100 * this.current}%, 0, 0)`;\r\n\t\t}\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tcurrent = (current > 0 ? current : this.items.length + current) % this.items.length;\r\n\t\tthis.setCurrent(current);\r\n\t\tthis.userGesture = true;\r\n\t\t// this.userGesture$.next();\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\treturn this.current - 1 >= 0;\r\n\t}\r\n\r\n\thasNext() {\r\n\t\treturn this.current + 1 < this.items.length;\r\n\t}\r\n\r\n\tgetTranslation(node, container) {\r\n\t\tlet x = 0,\r\n\t\t\ty = 0,\r\n\t\t\tz = 0;\r\n\t\tconst transform = node.style.transform;\r\n\t\tif (transform) {\r\n\t\t\tconst coords = transform.split('(')[1].split(')')[0].split(',');\r\n\t\t\tx = parseFloat(coords[0]);\r\n\t\t\ty = parseFloat(coords[1]);\r\n\t\t\tz = parseFloat(coords[2]);\r\n\t\t\tx = coords[0].indexOf('%') !== -1 ? x *= container.offsetWidth * 0.01 : x;\r\n\t\t\ty = coords[1].indexOf('%') !== -1 ? y *= container.offsetHeight * 0.01 : y;\r\n\t\t}\r\n\t\treturn { x, y, z };\r\n\t}\r\n}\r\n\r\nSliderComponent.meta = {\r\n\tselector: '[slider]',\r\n\tinputs: ['items', 'current', 'autoplay', 'focusAutoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderCaseStudyComponent extends SliderComponent {\r\n\r\n\tget current() { return super.getCurrent(); }\r\n\tset current(current) { this.setCurrent(current); }\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -this.slideWidth * this.current + 'px, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': this.slideWidth * this.items.length + 'px' };\r\n\t}\r\n\r\n\tget slideWidth() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// const slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tconst slideWidth = (window.innerWidth < 768 ? node.offsetWidth: (node.offsetWidth / 12 * 10)) + 40;\r\n\t\treturn slideWidth;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.resize$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => this.pushChanges());\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize');\r\n\t}\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n}\r\n\r\nSliderCaseStudyComponent.meta = {\r\n\tselector: '[slider-case-study]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import SliderComponent from './slider.component';\r\n\r\nexport default class SliderGalleryComponent extends SliderComponent {\r\n\r\n\tget current() { return super.getCurrent(); }\r\n\tset current(current) { this.setCurrent(current); }\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n\r\n\tdoClose() {\r\n\t\tthis.close.next();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode.next();\r\n\t}\r\n}\r\n\r\nSliderGalleryComponent.meta = {\r\n\tselector: '[slider-gallery]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween', 'close', 'mode'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { animationFrameScheduler, combineLatest, fromEvent, interval } from 'rxjs';\r\nimport { map, takeUntil, tap } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderHeroComponent extends SliderComponent {\r\n\r\n\tget current() { return super.getCurrent(); }\r\n\tset current(current) { this.setCurrent(current); }\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.pagination$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tthis.direction_ = direction;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\t\tif (direction == 1) {\r\n\t\t\t\tpagination.classList.remove('prev');\r\n\t\t\t\tpagination.classList.add('next');\r\n\t\t\t} else {\r\n\t\t\t\tpagination.classList.remove('next');\r\n\t\t\t\tpagination.classList.add('prev');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\traf$() {\r\n\t\treturn interval(0, animationFrameScheduler);\r\n\t}\r\n\r\n\tmouse$() {\r\n\t\tconst event = { x:0, y: 0};\r\n\t\treturn fromEvent(window, 'mousemove').pipe(\r\n\t\t\tmap(mouseEvent => {\r\n\t\t\t\tevent.x = mouseEvent.clientX;\r\n\t\t\t\tevent.y = mouseEvent.clientY;\r\n\t\t\t\treturn event;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tpagination$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst position = { x:0, y: 0};\r\n\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\treturn combineLatest([this.mouse$(), this.raf$()]).pipe(\r\n\t\t\ttap(datas => {\r\n\t\t\t\tconst mouse = datas[0];\r\n\t\t\t\tposition.x += (mouse.x - position.x) / 20;\r\n\t\t\t\tposition.y += (mouse.y - position.y) / 20;\r\n\t\t\t\t// const rect = node.getBoundingClientRect();\r\n\t\t\t\tthis.direction = mouse.x > window.innerWidth / 2 ? 1 : -1;\r\n\t\t\t\tpagination.style.transform = `translateX(${position.x}px) translateY(${position.y}px)`;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tif (event.clientX > window.innerWidth / 2) {\r\n\t\t\t\t\t// if (this.hasNext()) {\r\n\t\t\t\t\t\tthis.navTo(this.current + 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if (this.hasPrev()) {\r\n\t\t\t\t\t\tthis.navTo(this.current - 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n}\r\n\r\nSliderHeroComponent.meta = {\r\n\tselector: '[slider-hero]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\nimport { getSlug } from \"../environment\";\r\n\r\nexport default class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\treturn getSlug(value);\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Context } from 'rxcomp';\r\n\r\nexport default class VirtualItem extends Context {\r\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\r\n\t\tsuper(parentInstance);\r\n\t\tthis[key] = $key;\r\n\t\tthis[value] = $value;\r\n\t\tthis.index = index;\r\n\t\tthis.count = count;\r\n\t}\r\n\r\n\tget first() {\r\n\t\treturn this.index === 0;\r\n\t}\r\n\r\n\tget last() {\r\n\t\treturn this.index === this.count - 1;\r\n\t}\r\n\r\n\tget even() {\r\n\t\treturn this.index % 2 === 0;\r\n\t}\r\n\r\n\tget odd() {\r\n\t\treturn !this.even;\r\n\t}\r\n}\r\n","import { getContext, Structure } from 'rxcomp';\r\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\r\nimport { auditTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\r\nimport VirtualItem from './virtual.item';\r\n\r\nexport const VirtualMode = {\r\n\tResponsive: 1,\r\n\tGrid: 2,\r\n\tCentered: 3,\r\n\tList: 4\r\n};\r\n\r\nexport default class VirtualStructure extends Structure {\r\n\r\n\tonInit() {\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst template = node.firstElementChild;\r\n\t\tconst expression = node.getAttribute('*virtual');\r\n\t\tnode.removeAttribute('*virtual');\r\n\t\tnode.removeChild(template);\r\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\r\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\r\n\t\tthis.container = node;\r\n\t\tthis.template = template;\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options = {\r\n\t\t\ttop: 0,\r\n\t\t\twidth: this.width,\r\n\t\t\tgutter: this.gutter,\r\n\t\t\tcontainerWidth: 0,\r\n\t\t\tcontainerHeight: 0,\r\n\t\t\tcols: [0],\r\n\t\t\tstrategy: 1\r\n\t\t};\r\n\t\tthis.cachedRects = {};\r\n\t\tthis.cachedInstances = [];\r\n\t\tthis.cacheNodes = [];\r\n\t\tthis.items$ = new BehaviorSubject([]);\r\n\t\tthis.update$()\r\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\r\n\t\t\t.subscribe(visibleItems => {\r\n\t\t\t\t// console.log(visibleItems.length);\r\n\t\t\t});\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\t// resolve\r\n\t\tconst items = module.resolve(this.virtualFunction, context.parentInstance, this) || [];\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options.width = this.width;\r\n\t\tthis.updateView(true);\r\n\t\tthis.items$.next(items);\r\n\t}\r\n\r\n\tupdate$() {\r\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\r\n\t\t\tmap(datas => {\r\n\t\t\t\tconst options = this.options;\r\n\t\t\t\tconst items = this.items$.getValue();\r\n\t\t\t\tconst total = items.length;\r\n\t\t\t\tthis.container.position = 'relative';\r\n\t\t\t\tlet highestHeight = 0;\r\n\t\t\t\tconst width = this.getWidth();\r\n\t\t\t\tconst gutter = this.getGutter(width);\r\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\r\n\t\t\t\t\tlet col, height, top, left, bottom;\r\n\t\t\t\t\tlet rect = this.cachedRects[i];\r\n\t\t\t\t\tif (rect) {\r\n\t\t\t\t\t\tcol = rect.col;\r\n\t\t\t\t\t\theight = rect.height;\r\n\t\t\t\t\t\tleft = rect.left;\r\n\t\t\t\t\t\t// top = rect.top;\r\n\t\t\t\t\t\t// bottom = rect.bottom;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcol = this.getCol();\r\n\t\t\t\t\t\theight = this.getHeight(width, item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttop = options.cols[col];\r\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\r\n\t\t\t\t\t\tnode.style.position = 'absolute';\r\n\t\t\t\t\t\tnode.style.top = top + 'px';\r\n\t\t\t\t\t\tnode.style.left = left + 'px';\r\n\t\t\t\t\t\tnode.style.width = width + 'px';\r\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\r\n\t\t\t\t\t\t\theight = node.offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trect.height = height;\r\n\t\t\t\t\t\t\trect.bottom = bottom;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.removeNode(i);\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet removeIndex = items.length;\r\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\r\n\t\t\t\t\tthis.removeNode(removeIndex);\r\n\t\t\t\t\tremoveIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tthis.cacheNodes.length = items.length;\r\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\r\n\t\t\t\treturn visibleItems;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tgetCols() {\r\n\t\tconst options = this.options;\r\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\r\n\t\treturn new Array(cols).fill(0);\r\n\t}\r\n\r\n\tgetCol() {\r\n\t\tconst options = this.options;\r\n\t\tlet col;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\r\n\t\t\t\t\treturn c < a[p] ? i : p;\r\n\t\t\t\t}, 0);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tcol = 0;\r\n\t\t}\r\n\t\treturn col;\r\n\t}\r\n\r\n\tgetWidth() {\r\n\t\tconst options = this.options;\r\n\t\tlet width;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\twidth = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\twidth = options.containerWidth;\r\n\t\t}\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(width, item) {\r\n\t\tconst options = this.options;\r\n\t\tlet height;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\theight = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\theight = 80;\r\n\t\t}\r\n\t\treturn height;\r\n\t}\r\n\r\n\tgetGutter(width) {\r\n\t\tconst options = this.options;\r\n\t\tlet gutter;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tgutter = options.gutter;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tgutter = 0;\r\n\t\t}\r\n\t\treturn gutter;\r\n\t}\r\n\r\n\tgetLeft(index, width, gutter) {\r\n\t\tconst options = this.options;\r\n\t\tlet left;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tleft = index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tleft = 0;\r\n\t\t}\r\n\t\treturn left;\r\n\t}\r\n\r\n\tcachedNode(index, i, value, total) {\r\n\t\tif (this.cacheNodes[index]) {\r\n\t\t\treturn this.updateNode(index, i, value);\r\n\t\t} else {\r\n\t\t\treturn this.createNode(index, i, value, total);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateNode(index, i, value, total) {\r\n\t\tconst clonedNode = this.template.cloneNode(true);\r\n\t\tdelete clonedNode.rxcompId;\r\n\t\tthis.container.appendChild(clonedNode);\r\n\t\tthis.cacheNodes[index] = clonedNode;\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\tconst tokens = this.tokens;\r\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\r\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\r\n\t\tconst forItemContext = getContext(instance);\r\n\t\tmodule.compile(clonedNode, forItemContext.instance);\r\n\t\tthis.cachedInstances[index] = instance;\r\n\t\treturn clonedNode;\r\n\t}\r\n\r\n\tupdateNode(index, i, value) {\r\n\t\tconst instance = this.cachedInstances[index];\r\n\t\tconst tokens = this.tokens;\r\n\t\tif (instance[tokens.key] !== i) {\r\n\t\t\tinstance[tokens.key] = i;\r\n\t\t\tinstance[tokens.value] = value;\r\n\t\t\tinstance.pushChanges();\r\n\t\t}\r\n\t\t// console.log(index, i, value);\r\n\t\treturn this.cacheNodes[index];\r\n\t}\r\n\r\n\tremoveNode(index) {\r\n\t\tthis.cachedInstances[index] = undefined;\r\n\t\tconst node = this.cacheNodes[index];\r\n\t\tif (node) {\r\n\t\t\tconst context = getContext(this);\r\n\t\t\tconst module = context.module;\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodule.remove(node);\r\n\t\t}\r\n\t\tthis.cacheNodes[index] = undefined;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tintersect(top1, bottom1, top2, bottom2) {\r\n\t\treturn top2 < bottom1 && bottom2 > top1;\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tauditTime(100),\r\n\t\t\tstartWith(null),\r\n\t\t\ttap(() => this.updateView(true))\r\n\t\t);\r\n\t}\r\n\r\n\tscroll$(node) {\r\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\r\n\t}\r\n\r\n\tupdateView(reset) {\r\n\t\tconst rect = this.container.getBoundingClientRect();\r\n\t\tconst options = this.options;\r\n\t\toptions.top = rect.top;\r\n\t\toptions.containerWidth = rect.width;\r\n\t\toptions.containerHeight = window.innerHeight;\r\n\t\toptions.cols = this.getCols();\r\n\t\tif (reset) {\r\n\t\t\tthis.cachedRects = {};\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpressionTokens(expression) {\r\n\t\tif (expression === null) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tconst expressions = expression\r\n\t\t\t.split(';')\r\n\t\t\t.map(x => x.trim())\r\n\t\t\t.filter(x => x !== '');\r\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\r\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\r\n\t\tconst iterable = virtualExpressions[1];\r\n\t\tlet key = 'index';\r\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\r\n\t\tif (keyValueMatches) {\r\n\t\t\tkey = keyValueMatches[1];\r\n\t\t\tvalue = keyValueMatches[2];\r\n\t\t}\r\n\t\tif (expressions.length > 1) {\r\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\r\n\t\t\tif (indexExpressions.length === 3) {\r\n\t\t\t\tkey = indexExpressions[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { key, value, iterable };\r\n\t}\r\n}\r\n\r\nVirtualStructure.meta = {\r\n\tselector: '[*virtual]',\r\n\tinputs: ['mode', 'width', 'gutter']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AppComponent from './app.component';\r\nimport AppearStaggerDirective from './appear/appear-stagger.directive';\r\nimport AppearDirective from './appear/appear.directive';\r\nimport AuthForgotComponent from './auth/auth-forgot.component';\r\nimport AuthModalComponent from './auth/auth-modal.component';\r\nimport AuthSigninComponent from './auth/auth-signin.component';\r\nimport AuthSignupComponent from './auth/auth-signup.component';\r\nimport AuthComponent from './auth/auth.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport ContactsSimpleComponent from './contacts/contacts-simple.component';\r\nimport ContactsComponent from './contacts/contacts.component';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport FilterDropdownComponent from './filter/filter-dropdown.component';\r\nimport ControlCheckboxComponent from './forms/control-checkbox.component';\r\nimport ControlCustomSelectComponent from './forms/control-custom-select.component';\r\nimport ControlPasswordComponent from './forms/control-password.component';\r\nimport ControlTextComponent from './forms/control-text.component';\r\nimport ControlTextareaComponent from './forms/control-textarea.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport GalleryModalComponent from './gallery/gallery-modal.component';\r\nimport GalleryComponent from './gallery/gallery.component';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport MagazineComponent from './magazine/magazine.component';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport PortfolioComponent from './portfolio/portfolio.component';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SearchComponent from './search/search.component';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport ShareComponent from './share/share.component';\r\nimport SliderCaseStudyComponent from './slider/slider-case-study.component';\r\nimport SliderGalleryComponent from './slider/slider-gallery.component';\r\nimport SliderHeroComponent from './slider/slider-hero.component';\r\nimport SliderComponent from './slider/slider.component';\r\nimport SlugPipe from './slug/slug.pipe';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\n\r\nexport default class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAppearDirective,\r\n\t\tAppearStaggerDirective,\r\n\t\tAuthComponent,\r\n\t\tAuthForgotComponent,\r\n\t\tAuthModalComponent,\r\n\t\tAuthSigninComponent,\r\n\t\tAuthSignupComponent,\r\n\t\tClickOutsideDirective,\r\n\t\tContactsComponent,\r\n\t\tContactsSimpleComponent,\r\n\t\tControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlPasswordComponent,\r\n\t\tControlTextComponent,\r\n\t\tControlTextareaComponent,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tFilterDropdownComponent,\r\n\t\tGalleryComponent,\r\n\t\tGalleryModalComponent,\r\n\t\tHeaderComponent,\r\n\t\tHtmlPipe,\r\n\t\tMagazineComponent,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tPortfolioComponent,\r\n\t\tScrollToDirective,\r\n\t\tSearchComponent,\r\n\t\tSecureDirective,\r\n\t\tShareComponent,\r\n\t\tSliderComponent,\r\n\t\tSliderCaseStudyComponent,\r\n\t\tSliderGalleryComponent,\r\n\t\tSliderHeroComponent,\r\n\t\tSlugPipe,\r\n\t\tVirtualStructure\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}