{"version":3,"sources":["src/js/main.js","../../src/js/breakpoint/media-matcher.js","../../src/js/breakpoint/breakpoint.service.js","../../src/js/app.component.js","../../src/js/intersection/intersection.service.js","../../src/js/appear/appear-stagger.directive.js","../../src/js/appear/appear.directive.js","../../src/js/environment.js","../../src/js/http/http.service.js","../../src/js/api/api.service.js","../../src/js/storage/storage.service.js","../../src/js/storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/auth/auth-forgot.component.js","../../src/js/modal/modal.service.js","../../src/js/modal/modal-outlet.component.js","../../src/js/auth/auth.component.js","../../src/js/auth/auth-modal.component.js","../../src/js/auth/auth-signin.component.js","../../src/js/auth/auth-signup.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/contacts/contacts-simple.component.js","../../src/js/contacts/contacts.component.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/filter/filter-dropdown.component.js","../../src/js/forms/control.component.js","../../src/js/forms/control-checkbox.component.js","../../src/js/keyboard/keyboard.service.js","../../src/js/forms/control-custom-select.component.js","../../src/js/forms/control-password.component.js","../../src/js/forms/control-text.component.js","../../src/js/forms/control-textarea.component.js","../../src/js/forms/errors.component.js","../../src/js/gallery/gallery-modal.component.js","../../src/js/gallery/gallery.component.js","../../src/js/css/css.service.js","../../src/js/header/header.component.js","../../src/js/html/html.pipe.js","../../src/js/filter/filter-item.js","../../src/js/location/location.service.js","../../src/js/filter/filter.service.js","../../src/js/magazine/magazine.service.js","../../src/js/magazine/magazine.component.js","../../src/js/modal/modal.component.js","../../src/js/portfolio/portfolio.service.js","../../src/js/portfolio/portfolio.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/share/share.component.js","../../src/js/drag/drag.service.js","../../src/js/slider/slider.component.js","../../src/js/slider/slider-case-study.component.js","../../src/js/slider/slider-gallery.component.js","../../src/js/slider/slider-hero.component.js","../../src/js/slug/slug.pipe.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","__proto__","mediaQueryStyleNode","EDGE","test","navigator","userAgent","TRIDENT","BLINK","window","chrome","CSS","WEBKIT","mediaQueriesForWebkitCompatibility","Set","MediaMatcher","matchMedia","query","createEmptyStyleRule","_matchMedia","has","document","createElement","setAttribute","head","appendChild","sheet","insertRule","add","e","console","error","bind","matches","media","addListener","removeListener","BreakpointService","observe$","_this","queries","assign","queries$_","keys","forEach","group","split","map","trim","push","registerQuery$_","query$","combineLatest","apply","concat","pipe","take","skip","debounceTime","breakpoints","response","b","match","reduce","p","c","undefined","queries_","get","set","mediaQueryList","output","Observable","observer","handler","next","startWith","nextMediaQueryList","splitQueries","a1","a2","AppComponent","_Component","arguments","onInit","getContext","node","classList","remove","isMobile","takeUntil","unsubscribe$","subscribe","results","log","pushChanges","Component","meta","selector","IntersectionService","observer_","readySubject_","BehaviorSubject","observerSubject_","Subject","IntersectionObserver","entries","intersection$","observe","find","entry","filter","finalize","unobserve","of","isIntersecting","firstIntersection$","first","AppearStaggerDirective","_Directive","_proto","onChanges","appeared","src","Directive","AppearDirective","NODE","BASE_HREF","URLSearchParams","location","search","querySelector","getAttribute","STATIC","port","host","DEVELOPMENT","indexOf","ENV","NAME","PRODUCTION","RESOURCE","STATIC_RESOURCE","API","STATIC_API","getApiUrl","url","useStatic","Environment","options","replace","substr","protocol","HttpResponse","data","status","statusText","ok","redirected","HttpService","http$","method","format","methods","response_","qstring","encodeURI","join","from","fetch","headers","Accept","Content-Type","body","JSON","stringify","then","json","Promise","resolve","reject","catchError","throwError","getError","get$","delete$","post$","put$","patch$","object","statusCode","statusMessage","ApiService","_HttpService","call","staticGet$","staticDelete$","staticPost$","staticPut$","staticPatch$","currentLanguage","StorageService","encode","decoded","Serializer","encodeJson","encodeURIComponent","encodeBase64","decode","encoded","decodeBase64","decodeURIComponent","decodeJson","isSupported","type","storage","flag","WINDOW","x","setItem","removeItem","DOMException","code","name","Boolean","LocalStorageService","_StorageService","clear","localStorage","items$","toArray","delete","exist","getItem","getRaw","setRaw","toRawArray","_this2","supported","ReplaySubject","User","firstName","toUpperCase","lastName","UserService","getCurrentUser","user$_","getValue","setUser","user","me$","mapUser","static","switchMap","register$","payload","mapStatic__","login$","_this3","logout$","_this4","retrieve$","_this5","isStatic","action","fake","mapUsers","users","AuthForgotComponent","FormGroup","email","FormControl","Validators","RequiredValidator","EmailValidator","checkRequest","antiforgery","checkField","controls","changes$","changes","success","patch","reset","onSubmit","valid","submitted","sent","touched","onLogin","login","onRegister","register","outputs","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","template","getNode","tap","modal$","events$","load$","text","div","innerHTML","firstElementChild","ModalOutletComponent","modalNode","event","modal_","removeChild","compile","AuthComponent","views","SIGN_IN","SIGN_UP","FORGOTTEN","view","hasAttribute","parseInt","onForgot","onSignIn","href","auth","onSignUp","onForgottenSent","inputs","AuthModalComponent","_AuthComponent","parentInstance","close","AuthSigninComponent","password","signIn","forgot","AuthSignupComponent","roles","countries","company","role","country","newsletter","privacy","formaction","id","dataLayer","form type","ClickOutsideDirective","initialFocus","_getContext","event$","fromEvent","contains","shareReplay","expression","outputFunction","makeFunction","clickOutside$","ContactsSimpleComponent","fullName","ContactsComponent","reason","firstCategory","secondCategory","message","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","DropdownItemDirective","FilterDropdownComponent","dropdownId","ControlComponent","flags","control","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keyup$","typing$","to","typing","key$","clearTimeout","setTimeout","regexp","ControlCustomSelectComponent","labels","word","scrollToWord","items","index","toLowerCase","item","children","scrollTo","offsetTop","setOption","isMultiple","splice","slice","hasOption","onDropped","getLabel","v","select","$event","multiple","ControlPasswordComponent","required","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","GalleryModalComponent","mode","sliderItems","sliderIndex","toggleMode","onChange","onTween","onSelect","GALLERY_MODAL","GalleryComponent","galleryItems","click$","onOpenGallery","firstGalleryItem","gallery","Array","isArray","CssService","height$","style","documentElement","innerHeight","height","vh","setProperty","HeaderComponent","searchActive","mainActive","onMainToggle","querySelectorAll","gsap","opacity","duration","stagger","each","ease","Power3","easeOut","onSearchToggle","onOpenSub","subId","onCloseSub","isSubOpen","isPrimaryHidden","showPicture","img","picture","onload","onComplete","childElementCount","HtmlPipe","_Pipe","transform","m","n","String","fromCharCode","unescapes","rx","RegExp","Pipe","FilterMode","FilterItem","change$","placeholder","values","unshift","getSelectedOption","selectedOption","hasAny","toggle","toggleActive","active","LocationService","keyOrValue","params","history","pushState","title","toString","deserialize","serialize","atob","parse","btoa","FilterService","initialParams","callback","filters","getParamsCount","locationParams","any","updateFilterStates","merge","auditTime","filterItems","skipFilter","initialCount","filteredItems","option","count","disabled","sort","a","MagazineService","all$","filters$","MagazineComponent","maxVisibleItems","visibleItems","busy","onLoad","filterService","scroll$","getBoundingClientRect","bottom","toggleFilter","clearFilter","preventDefault","stopImmediatePropagation","ModalComponent","PortfolioService","PortfolioComponent","firstItem","sortPatternItems","copy","important","order","sorted","_loop","shift","ScrollToDirective","scrollTo$","_getContext2","result","currentTop","top","o","pow","html","scroll-behavior","Math","abs","Quad","overwrite","onUpdate","pageYOffset","scrollTop","DownloadService","download","blob","fileName","URL","createObjectURL","click","revokeObjectURL","a_","SecureDirective","tryDownloadHref","pop","ShareComponent","share","getTitle","getUrl","origin","charCodeAt","DragPoint","y","DragEvent","DragDownEvent","_DragEvent","distance","strength","speed","DragMoveEvent","_DragEvent2","DragUpEvent","_DragEvent3","DragService","getPosition","point","MouseEvent","clientX","clientY","TouchEvent","touches","pageX","pageY","down$","downEvent","originalEvent","down","move$","dismiss$","moveEvent","position","innerWidth","up$","upEvent","SliderComponent","container","wrapper","userGesture","slider$","changed$","setActiveState","change","currentSlide","current","slide","video","paused","pause","onEnded","play","autoplay","translation","dragDownEvent","dragMoveEvent","getTranslation","onDragMoveEvent","onDragUpEvent","transformX","width","offsetWidth","hasNext","navTo","hasPrev","z","coords","parseFloat","offsetHeight","items_","state","state_","SliderCaseStudyComponent","_SliderComponent","resize$","onContentOver","onContentOut","slideWidth","SliderGalleryComponent","doClose","SliderHeroComponent","pagination$","raf$","interval","animationFrameScheduler","mouse$","mouseEvent","pagination","datas","mouse","direction","direction_","SlugPipe","VirtualItem","$key","$value","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","gutter","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","update$","context","updateView","total","highestHeight","getWidth","getGutter","col","left","rect","getCol","getHeight","intersect","getLeft","cachedNode","max","removeNode","removeIndex","getCols","floor","fill","updateNode","createNode","clonedNode","cloneNode","rxcompId","args","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","Error","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"const EDGE = /(edge)/i.test(navigator.userAgent);\r\nconst TRIDENT = /(msie|trident)/i.test(navigator.userAgent);\r\nconst BLINK = (!!((window).chrome) && typeof CSS !== 'undefined' && !EDGE && !TRIDENT);\r\nconst WEBKIT = /AppleWebKit/i.test(navigator.userAgent) && !BLINK && !EDGE && !TRIDENT;\r\nconst IOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !('MSStream' in window);\r\nconst FIREFOX = /(firefox|minefield)/i.test(navigator.userAgent);\r\nconst ANDROID = /android/i.test(navigator.userAgent) && !TRIDENT;\r\nconst SAFARI = /safari/i.test(navigator.userAgent) && WEBKIT;\r\n\r\nconst mediaQueriesForWebkitCompatibility = new Set();\r\n\r\nlet mediaQueryStyleNode;\r\n\r\nexport class MediaMatcher {\r\n\r\n\tstatic matchMedia(query) {\r\n\t\tif (WEBKIT) {\r\n\t\t\tthis.createEmptyStyleRule(query);\r\n\t\t}\r\n\t\treturn this._matchMedia(query);\r\n\t}\r\n\r\n\tstatic createEmptyStyleRule(query) {\r\n\t\tif (mediaQueriesForWebkitCompatibility.has(query)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tif (!mediaQueryStyleNode) {\r\n\t\t\t\tmediaQueryStyleNode = document.createElement('style');\r\n\t\t\t\tmediaQueryStyleNode.setAttribute('type', 'text/css');\r\n\t\t\t\tif (document.head) {\r\n\t\t\t\t\tdocument.head.appendChild(mediaQueryStyleNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (mediaQueryStyleNode.sheet) {\r\n\t\t\t\t(mediaQueryStyleNode.sheet)\r\n\t\t\t\t.insertRule(`@media ${query} {.fx-query-test{ }}`, 0);\r\n\t\t\t\tmediaQueriesForWebkitCompatibility.add(query);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction noopMatchMedia(query) {\r\n\treturn {\r\n\t\tmatches: query === 'all' || query === '',\r\n\t\tmedia: query,\r\n\t\taddListener: () => {},\r\n\t\tremoveListener: () => {}\r\n\t};\r\n}\r\n\r\nMediaMatcher._matchMedia = window.matchMedia ? window.matchMedia.bind(window) : noopMatchMedia;\r\n","import { combineLatest, concat, Observable } from 'rxjs';\nimport { debounceTime, map, skip, startWith, take } from 'rxjs/operators';\nimport { MediaMatcher } from './media-matcher';\n\nexport class BreakpointState {\n\t// matches;\n\t// breakpoints;\n}\n\nclass InternalBreakpointState {\n\t// matches;\n\t// query;\n}\n\nclass Query {\n\t// query$;\n\t// mediaQueryList;\n}\n\nexport class BreakpointService {\n\n\tstatic queries_ = {};\n\n\tstatic observe$(value) {\n\t\tconst queries = Object.assign({}, value); // this.splitQueries(coerceArray(value));\n\t\tlet queries$_ = [];\n\t\tObject.keys(queries).forEach(key => {\n\t\t\tconst query = queries[key];\n\t\t\tconst group = query.split('and').map(query => query.trim());\n\t\t\tgroup.forEach(query => queries$_.push(this.registerQuery$_(query).query$));\n\t\t\tqueries[key] = { query, group };\n\t\t});\n\t\t// let queries$_ = Object.keys(queries).map(key => this.registerQuery$_(queries[key]).query$);\n\t\tqueries$_ = combineLatest(...queries$_);\n\t\tlet queries$ = concat(\n\t\t\tqueries$_.pipe(take(1)),\n\t\t\tqueries$_.pipe(skip(1), debounceTime(0))\n\t\t);\n\t\treturn queries$.pipe(\n\t\t\tmap((breakpoints) => {\n\t\t\t\tconst response = {};\n\t\t\t\tbreakpoints.forEach(b => {\n\t\t\t\t\tObject.keys(queries).forEach(key => {\n\t\t\t\t\t\tconst query = queries[key];\n\t\t\t\t\t\tconst match = query.group.reduce((p, c) => {\n\t\t\t\t\t\t\treturn p && (b.query !== c || b.matches);\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t\tresponse[key] = match;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\tconst response = {\n\t\t\t\t\tmatches: false,\n\t\t\t\t\tbreakpoints: {},\n\t\t\t\t};\n\t\t\t\tbreakpoints.forEach((state) => {\n\t\t\t\t\tresponse.matches = response.matches || state.matches;\n\t\t\t\t\tresponse.breakpoints[state.query] = state.matches;\n\t\t\t\t});\n\t\t\t\tconsole.log(breakpoints, response, queries);\n\t\t\t\t*/\n\t\t\t\treturn response;\n\t\t\t}),\n\t\t);\n\t}\n\n\t/*\n\tstatic isMatched$(value) {\n\t\tconst queries = this.splitQueries(coerceArray(value));\n\t\treturn queries.some(mediaQuery => this.registerQuery$_(mediaQuery).mediaQueryList.matches);\n\t}\n\t*/\n\n\tstatic has(query) {\n\t\treturn this.queries_[query] !== undefined;\n\t}\n\n\tstatic get(query) {\n\t\treturn this.queries_[query];\n\t}\n\n\tstatic set(query, value) {\n\t\treturn this.queries_[query] = value;\n\t}\n\n\tstatic registerQuery$_(key) {\n\t\tif (this.has(key)) {\n\t\t\treturn this.get(key);\n\t\t}\n\t\tconst mediaQueryList = MediaMatcher.matchMedia(key);\n\t\tconst query$ = new Observable((observer) => {\n\t\t\tconst handler = (e) => observer.next(e);\n\t\t\tmediaQueryList.addListener(handler);\n\t\t\treturn () => {\n\t\t\t\tmediaQueryList.removeListener(handler);\n\t\t\t};\n\t\t}).pipe(\n\t\t\tstartWith(mediaQueryList),\n\t\t\tmap((nextMediaQueryList) => ({ query: key, matches: nextMediaQueryList.matches })),\n\t\t);\n\t\tconst output = { query$: query$, mediaQueryList };\n\t\tthis.set(key, output);\n\t\treturn output;\n\t}\n\n\tstatic splitQueries(queries) {\n\t\treturn queries.map((query) => query.split(','))\n\t\t\t.reduce((a1, a2) => a1.concat(a2))\n\t\t\t.map(query => query.trim());\n\t}\n}\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { BreakpointService } from './breakpoint/breakpoint.service';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\tBreakpointService.observe$({\r\n\t\t\tisMobile: '(max-width: 767px)'\r\n\t\t}).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(results => {\r\n\t\t\tconsole.log('AppComponent.BreakpointService.results', results);\r\n\t\t\tthis.isMobile = results.isMobile;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\tfilter(entry => entry !== undefined),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node, isIntersecting: true });\r\n\t\t}\r\n\t}\r\n\r\n\tstatic firstIntersection$(node) {\r\n\t\treturn this.intersection$(node).pipe(\r\n\t\t\tfilter(entry => entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\tfirst(),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearStaggerDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear-stagger');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearStaggerDirective.meta = {\r\n\tselector: '[appear-stagger]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearDirective.meta = {\r\n\t// selector: '[appear],.row,.listing--series,.listing--products,.listing--cards,.listing--news,.listing--downloads',\r\n\tselector: '.picture',\r\n};\r\n","export const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const STATIC = NODE ? false : (window && (window.location.port === '41234' || window.location.host === 'actarian.github.io' || window.location.host === 'stipa.herokuapp.com'));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'stipa',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: STATIC ? './api' : '/Client/docs/api',\r\n};\r\n\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\tconsole.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n\r\nexport class Environment {\r\n\r\n\tget href() {\r\n\t\tif (window.location.host.indexOf('herokuapp') !== -1) {\r\n\t\t\treturn 'https://raw.githubusercontent.com/actarian/stipa/master/docs/';\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tget host() {\r\n\t\tlet host = window.location.host.replace('127.0.0.1', '192.168.1.2');\r\n\t\tif (host.substr(host.length - 1, 1) === '/') {\r\n\t\t\thost = host.substr(0, host.length - 1);\r\n\t\t}\r\n\t\treturn `${window.location.protocol}//${host}${BASE_HREF}`;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport const environment = new Environment({\r\n\tport: 5000,\r\n});\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tmethod = url.indexOf('.json') !== -1 ? 'GET' : method;\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\tlet qstring = methods.indexOf(method) !== -1 ? Object.keys(data).map(function(key) {\r\n\t\t    return key + '=' + encodeURI(data[key])\r\n\t\t}).join('&') : undefined;\r\n\t\treturn from(fetch(url, url.indexOf('.json') !== -1 ? {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t} : {\r\n\t\t    method: method,\r\n\t\t    headers: {\r\n\t\t        'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t    },\r\n\t\t    body: qstring\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\treturn response[format]().then(json => {\r\n\t\t\t\tresponse_.data = json;\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/*\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { getApiUrl } from '../environment';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = window.currentLanguage || 'it';\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url), data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url));\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic staticGet$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url, true), data, format);\r\n\t}\r\n\r\n\tstatic staticDelete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url, true));\r\n\t}\r\n\r\n\tstatic staticPost$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPut$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPatch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n}\r\n","import { decodeBase64, decodeJson, encodeBase64, encodeJson, Serializer, WINDOW } from 'rxcomp';\r\n\r\nexport default class StorageService {\r\n\tstatic supported = false;\r\n\tstatic encode(decoded) {\r\n\t\tlet encoded = Serializer.encode(decoded, [encodeJson, encodeURIComponent, encodeBase64]) || null;\r\n\t\treturn encoded;\r\n\t}\r\n\tstatic decode(encoded) {\r\n\t\tlet decoded = Serializer.decode(encoded, [decodeBase64, decodeURIComponent, decodeJson]);\r\n\t\treturn decoded;\r\n\t}\r\n\tstatic isSupported(type) {\r\n\t\tlet flag = false;\r\n\t\tlet storage;\r\n\t\ttry {\r\n\t\t\tstorage = WINDOW[type];\r\n\t\t\tconst x = '__storage_test__';\r\n\t\t\tstorage.setItem(x, x);\r\n\t\t\tstorage.removeItem(x);\r\n\t\t\tflag = true;\r\n\t\t} catch (error) {\r\n\t\t\tflag = error instanceof DOMException && (\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.code === 22 ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.code === 1014 ||\r\n\t\t\t\t// test name field too, because code might not be present\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.name === 'QuotaExceededError' ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n\t\t\t\t// acknowledge QuotaExceededError only if there's something already stored\r\n\t\t\t\tBoolean(storage && storage.length !== 0);\r\n\t\t}\r\n\t\treturn flag;\r\n\t}\r\n}\r\n","import { ReplaySubject } from 'rxjs';\r\nimport StorageService from './storage.service';\r\n\r\nexport default class LocalStorageService extends StorageService {\r\n\tstatic items$ = new ReplaySubject(1);\r\n\tstatic clear() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic delete(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic exist(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn localStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tstatic get(name) {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\tstatic set(name, value) {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\tstatic getRaw(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = localStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tstatic setRaw(name, value) {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tlocalStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic toArray() {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\tstatic toRawArray() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(localStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tstatic isSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('localStorage');\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport LocalStorageService from '../storage/local-storage.service';\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default class UserService {\r\n\r\n\tstatic getCurrentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\t//return ApiService.staticGet$(`/user/me`).pipe(\r\n\t\treturn ApiService.get$(`/user/me`).pipe(\r\n\t\t\t// map((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\tcatchError(error => of (null)),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/register`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/login`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn ApiService.staticPost$(`/user/logout`).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'logout')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic retrieve$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/forget`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tstatic update$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/updateprofile`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic mapStatic__(user, isStatic, action = 'me') {\r\n\t\tif (!isStatic) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic fake(user) {\r\n\t\tuser.firstName = user.firstName || 'Jhon';\r\n\t\tuser.lastName = user.lastName || 'Appleseed';\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic mapUser(user, isStatic) {\r\n\t\treturn isStatic ? UserService.fake(new User(user)) : new User(user);\r\n\t}\r\n\r\n\tstatic mapUsers(users, isStatic) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x, isStatic)) : [];\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$_ = new BehaviorSubject(null);\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthForgotComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthForgotComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthForgotComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.retrieve$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.onSubmit', response);\r\n\t\t\t\t\tthis.sent.next(true);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthForgotComponent.meta = {\r\n\tselector: '[auth-forgot]',\r\n\toutputs: ['sent', 'login', 'register'],\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.views = {\r\n\t\t\tSIGN_IN: 1,\r\n\t\t\tSIGN_UP: 2,\r\n\t\t\tFORGOTTEN: 3,\r\n\t\t};\r\n\t\tthis.view = node.hasAttribute('view') ? parseInt(node.getAttribute('view')) : this.views.SIGN_IN;\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\t// console.log('AuthComponent.onForgot');\r\n\t\tthis.view = this.views.FORGOTTEN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('AuthComponent.onLogin');\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('AuthComponent.onRegister');\r\n\t\tthis.view = this.views.SIGN_UP;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('AuthComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('AuthComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgottenSent(email) {\r\n\t\t/*\r\n\t\tconsole.log('AuthComponent.onForgottenSent', email);\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nAuthComponent.meta = {\r\n\tselector: '[auth]',\r\n\tinputs: ['auth']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\nimport AuthComponent from './auth.component';\r\n\r\nexport default class AuthModalComponent extends AuthComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('AuthModalComponent.onInit', data);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('AuthModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('AuthModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\t// console.log('AuthModalComponent.onDestroy');\r\n\t}\r\n\t*/\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nAuthModalComponent.meta = {\r\n\tselector: '[auth-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tinterests: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthSigninComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: 'password',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSigninComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSigninComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Login', this.form.value)\r\n\t\t\tUserService.login$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.signIn.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot() {\r\n\t\tthis.forgot.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSigninComponent.meta = {\r\n\tselector: '[auth-signin]',\r\n\toutputs: ['signIn', 'forgot', 'register'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t    roles: [],\r\n            countries: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\trole: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n            action: window.formaction\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('WorkWithUsComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\tcountry: 'Italy',\r\n\t\t\trole: role,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.form.submitted = false;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSignupComponent.meta = {\r\n\tselector: '[auth-signup]',\r\n\t//outputs: ['signUp', 'login'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsSimpleComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfullName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t// privacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfullName: 'Jhon Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t// privacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/contacts', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsSimpleComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsSimpleComponent.meta = {\r\n\tselector: '[contacts-simple]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\treason: [],\r\n\t\t\tfirstCategory: [],\r\n\t\t\tsecondCategory: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfullName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\treason: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfirstCategory: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tsecondCategory: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tcontrols.reason.options = data.reason;\r\n\t\tcontrols.firstCategory.options = data.firstCategory;\r\n\t\tcontrols.secondCategory.options = data.secondCategory;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst reason = this.controls.reason.options.length ? this.controls.reason.options[0].id : null;\r\n\t\tconst firstCategory = this.controls.firstCategory.options.length ? this.controls.firstCategory.options[0].id : null;\r\n\t\tconst secondCategory = this.controls.secondCategory.options.length ? this.controls.secondCategory.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfullName: 'Jhon Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\treason: reason,\r\n\t\t\tfirstCategory: firstCategory,\r\n\t\t\tsecondCategory: secondCategory,\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/contacts', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsComponent.meta = {\r\n\tselector: '[contacts]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\n\r\nexport default class FilterDropdownComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t}\r\n\r\n}\r\n\r\nFilterDropdownComponent.meta = {\r\n\tselector: '[filter-dropdown]',\r\n\tinputs: ['label', 'filter'],\r\n\ttemplate: /* html */ `\r\n\t\t<span class=\"text\" [innerHTML]=\"label\"></span>\r\n\t\t<span class=\"btn--dropdown\" [dropdown]=\"dropdownId\">\r\n\t\t\t<span [innerHTML]=\"filter.label\"></span> <svg class=\"filter\"><use xlink:href=\"#filter\"></use></svg>\r\n\t\t\t<!-- dropdown -->\r\n\t\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t\t<div class=\"category\" [innerHTML]=\"filter.label\"></div>\r\n\t\t\t\t<ul class=\"nav--dropdown\">\r\n\t\t\t\t\t<li *for=\"let item of filter.options\">\r\n\t\t\t\t\t\t<span [class]=\"{ active: filter.has(item), disabled: item.disabled }\" (click)=\"filter.set(item)\" [innerHTML]=\"item.label\"></span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</span>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" [formControlName]=\"name\" />\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<errors-component *if=\"control.validators.length\" [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent } from 'rxjs';\r\nimport { filter, map, shareReplay } from 'rxjs/operators';\r\n\r\nexport default class KeyboardService {\r\n\r\n\tstatic keydown$() {\r\n\t\treturn fromEvent(window, 'keydown').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\treturn fromEvent(window, 'keyup').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tlet typing = '',\r\n\t\t\tto;\r\n\t\treturn this.key$().pipe(\r\n\t\t\tmap(key => {\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t}\r\n\t\t\t\ttyping += key;\r\n\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\ttyping = '';\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn typing;\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tconst regexp = /\\w/;\r\n\t\treturn this.keydown$().pipe(\r\n\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\tmap(event => event.key),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tsetOption(item) {\r\n\t\tthis.control.value = item.id;\r\n\t\t// DropdownDirective.dropdown$.next(null);\r\n\t}\r\n\t*/\r\n\r\n\tsetOption(item) {\r\n\t\tconsole.log('setOption', item, this.isMultiple);\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tthis.control.value = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tthis.control.value = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log($event);\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\t/*\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.add('dropped');\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tonClickOutside(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.remove('dropped');\r\n\t}\r\n\t*/\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\tinputs: ['control', 'label', 'multiple', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"getLabel()\"></span>\r\n            <input type=\"text\" style=\"display:none\" class=\"control--select\" [formControl]=\"control\" [formControlName]=\"name\" />\r\n\t\t\t<svg class=\"icon caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t<li *for=\"let item of control.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n\t/*  (click)=\"onClick($event)\" (clickOutside)=\"onClickOutside($event)\" */\r\n\t/*  <!-- <div class=\"dropdown\" [class]=\"{ dropped: dropped }\"> --> */\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [innerHTML]=\"label\" rows=\"6\" [formControlName]=\"name\"></textarea>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nexport default class GalleryModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.mode = 'slider';\r\n\t\tconst { parentInstance, node } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = this.data = parentInstance.modal.data;\r\n\t\t\tthis.sliderItems = data.items;\r\n\t\t\tthis.sliderIndex = data.index;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode = this.mode === 'slider' ? 'grid' : 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonChange(event) {\r\n\t\t// console.log('onChange', event);\r\n\t}\r\n\r\n\tonTween(event) {\r\n\t\t// console.log('onTween', event);\r\n\t}\r\n\r\n\tonSelect(index) {\r\n\t\tthis.sliderIndex = index;\r\n\t\tthis.mode = 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nGalleryModalComponent.meta = {\r\n\tselector: '[gallery-modal]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { BASE_HREF, STATIC } from '../environment';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst GALLERY_MODAL = STATIC ? BASE_HREF + 'gallery-modal.html' : 'template/gallery-modal.cshtml';\r\n\r\nexport default class GalleryComponent extends Component {\r\n\r\n\tget galleryItems() {\r\n\t\tif (typeof this.gallery === 'string') {\r\n\t\t\treturn [this.gallery];\r\n\t\t} else if (Array.isArray(this.gallery)) {\r\n\t\t\treturn this.gallery;\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tget firstGalleryItem() {\r\n\t\tconst items = this.galleryItems;\r\n\t\tif (items.length) {\r\n\t\t\treturn items[0];\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.galleryItems.forEach(item => {\r\n\t\t\tif (GalleryComponent.items.indexOf(item) === -1) {\r\n\t\t\t\tGalleryComponent.items.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => this.onOpenGallery(event));\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst {node} = getContext(this);\r\n\t\treturn fromEvent(node, 'click');\r\n\t}\r\n\r\n\tonOpenGallery(event) {\r\n\t\tconst items = GalleryComponent.items;\r\n\t\tconst index = items.indexOf(this.firstGalleryItem);\r\n\t\t// console.log('GalleryComponent.onOpenGallery', this.gallery, items, index);\r\n\t\tModalService.open$({ src: GALLERY_MODAL, data: { items, index } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// this.pushChanges();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nGalleryComponent.items = [];\r\n\r\nGalleryComponent.meta = {\r\n\tselector: '[gallery]',\r\n\tinputs: ['gallery']\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\n// import UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.searchActive = false;\r\n\t\tthis.mainActive = false;\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\tconsole.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t}\r\n\r\n\tonMainToggle() {\r\n\t\tthis.searchActive = false;\r\n\t\tthis.mainActive = !this.mainActive;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.nav--primary-menu > li'));\r\n\t\tgsap.to(items, {\r\n\t\t\topacity: this.mainActive ? 1 : 0,\r\n\t\t\tduration: 0.35,\r\n\t\t\tstagger: {\r\n\t\t\t\teach: 0.05,\r\n\t\t\t\tease: Power3.easeOut\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSearchToggle() {\r\n\t\tthis.mainActive = false;\r\n\t\tthis.searchActive = !this.searchActive;\r\n\t\tconst { node } = getContext(this);\r\n\t\t/*\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.nav--primary-menu > li'));\r\n\t\tgsap.to(items, {\r\n\t\t\topacity: this.searchActive ? 1 : 0,\r\n\t\t\tduration: 0.35,\r\n\t\t\tstagger: {\r\n\t\t\t\teach: 0.05,\r\n\t\t\t\tease: Power3.easeOut\r\n\t\t\t}\r\n\t\t});\r\n\t\t*/\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpenSub(subId) {\r\n\t\tthis.subId = subId;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonCloseSub(subId) {\r\n\t\tif (this.subId === subId) {\r\n\t\t\tthis.subId = null;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tisSubOpen(subId) {\r\n\t\treturn this.subId === subId;\r\n\t}\r\n\r\n\tisPrimaryHidden() {\r\n\t\treturn this.subId != null;\r\n\t}\r\n\r\n\tshowPicture(src) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst picture = node.querySelector('.main-menu__picture');\r\n\t\tlet img;\r\n\t\tif (src) {\r\n\t\t\timg = document.createElement('img');\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tpicture.appendChild(img);\r\n\t\t\t\tgsap.set(img, { opacity: 0 });\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 1,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 1) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\timg.src = src;\r\n\t\t} else {\r\n\t\t\timg = picture.querySelector('img');\r\n\t\t\tif (img) {\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 0,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 0) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header'\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tget empty() {\r\n\t\treturn this.values.length === 0;\r\n\t}\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thasAny() {\r\n\t\treturn this.values.length > 0;\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.clear', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n}\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\tthis.updateFilterStates(filters, items, true);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items, initialCount) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = initialCount ? items : this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\tinitialCount ? option.initialCount = count : option.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t\tif (initialCount) {\r\n\t\t\t\tfilter.options.sort((a, b) => b.initialCount - a.initialCount);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class MagazineService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/magazine/all').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn ApiService.staticGet$('/magazine/all').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/magazine/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn ApiService.staticGet$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport MagazineService from './magazine.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class MagazineComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.busy = false;\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'category':\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (this.items.length > this.visibleItems.length && !this.busy) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tMagazineService.all$(),\r\n\t\t\tMagazineService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nMagazineComponent.meta = {\r\n\tselector: '[magazine]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class PortfolioService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil, tap } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport PortfolioService from './portfolio.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class PortfolioComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.firstItem = null;\r\n\t\tthis.visibleItems = null;\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.busy = false;\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'area':\r\n\t\t\t\tcase 'city':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\tmap(items => this.sortPatternItems(items)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tsortPatternItems(items) {\r\n\t\tconst copy = items.slice();\r\n\t\tconst firstItem = this.firstItem = copy.find(x => x.important);\r\n\t\tif (firstItem) {\r\n\t\t\tcopy.splice(copy.indexOf(firstItem), 1);\r\n\t\t}\r\n\t\tconst order = [false, false, true, false, false, false, false, true];\r\n\t\tconst sorted = [];\r\n\t\tlet\ti = 0;\r\n\t\twhile (copy.length) {\r\n\t\t\tconst important = order[i % order.length];\r\n\t\t\tconst item = copy.find(x => x.important === important);\r\n\t\t\tif (item) {\r\n\t\t\t\tcopy.splice(copy.indexOf(item), 1);\r\n\t\t\t\tsorted.push(item);\r\n\t\t\t} else {\r\n\t\t\t\tsorted.push(copy.shift());\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn sorted;\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (this.items.length > this.visibleItems.length && !this.busy) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tPortfolioService.all$(),\r\n\t\t\tPortfolioService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nPortfolioComponent.meta = {\r\n\tselector: '[portfolio]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/stipa/auth-modal.html' : '/stipa/auth-modal.html';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = node.getAttribute('href');\r\n\t\tHttpService.get$(href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t\tmap(response => response.data),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log('SecureDirective.tryDownloadHref', error);\r\n\t\t\tthis.onLogin();\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tconsole.log('SecureDirective.onLogin');\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class ShareComponent extends Component {\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.getUrl()}&media=&description=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.getUrl()}&title=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.getTitle()}%20${this.getUrl()}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.getTitle()}&body=${this.getUrl()}`;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconsole.log('ShareComponent.onInit', this.share, this.title);\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.title);\r\n\t}\r\n\r\n\tgetTitle() {\r\n\t\tlet title = this.title ? this.title : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tgetUrl() {\r\n\t\tlet url = this.share;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareComponent.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'title'],\r\n\ttemplate: /* html */`\r\n\t<ul class=\"nav--share\">\r\n\t\t<li>\r\n\t\t\t<a [href]=\"facebookUrl\" target=\"_blank\"><svg class=\"facebook\"><use xlink:href=\"#facebook\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"twitterUrl\" target=\"_blank\"><svg class=\"twitter\"><use xlink:href=\"#twitter\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"pinterestUrl\" target=\"_blank\"><svg class=\"pinterest\"><use xlink:href=\"#pinterest\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"linkedInUrl\" target=\"_blank\"><svg class=\"linkedin\"><use xlink:href=\"#linkedin\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<!--\r\n\t\t<li>\r\n\t\t\t<a [href]=\"whatsappUrl\" target=\"_blank\"><svg class=\"whatsapp\"><use xlink:href=\"#whatsapp\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"mailToUrl\"><svg class=\"email\"><use xlink:href=\"#email\"></use></svg></a>\r\n\t\t</li>\r\n\t\t-->\r\n\t</ul>\r\n\t`,\r\n};\r\n","import { fromEvent, merge, ReplaySubject, Subject } from 'rxjs';\r\nimport { filter, map, startWith, switchMap, takeUntil } from 'rxjs/operators';\r\n\r\nexport class DragPoint {\r\n\tconstructor() {\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t}\r\n}\r\n\r\nexport class DragEvent {\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class DragDownEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragMoveEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragUpEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t}\r\n}\r\n\r\nexport default class DragService {\r\n\r\n\tstatic getPosition(event, point) {\r\n\t\tif (event instanceof MouseEvent) {\r\n\t\t\tpoint ? (\r\n\t\t\t\tpoint.x = event.clientX,\r\n\t\t\t\tpoint.y = event.clientY\r\n\t\t\t) : point = {\r\n\t\t\t\tx: event.clientX,\r\n\t\t\t\ty: event.clientY\r\n\t\t\t};\r\n\t\t} else if (event instanceof TouchEvent) {\r\n\t\t\tif (event.touches.length > 0) {\r\n\t\t\t\tpoint ? (\r\n\t\t\t\t\tpoint.x = event.touches[0].pageX,\r\n\t\t\t\t\tpoint.y = event.touches[0].pageY\r\n\t\t\t\t) : point = {\r\n\t\t\t\t\tx: event.touches[0].pageX,\r\n\t\t\t\t\ty: event.touches[0].pageY\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn point;\r\n\t}\r\n\r\n\tstatic down$(target, events$) {\r\n\t\tlet downEvent;\r\n\t\treturn merge(\r\n\t\t\tfromEvent(target, 'mousedown'),\r\n\t\t\tfromEvent(target, 'touchstart')\r\n\t\t).pipe(\r\n\t\t\tmap((event) => {\r\n\t\t\t\tdownEvent = downEvent || new DragDownEvent();\r\n\t\t\t\tdownEvent.node = target;\r\n\t\t\t\tdownEvent.target = event.target;\r\n\t\t\t\tdownEvent.originalEvent = event;\r\n\t\t\t\tdownEvent.down = this.getPosition(event, downEvent.down);\r\n\t\t\t\tif (downEvent.down) {\r\n\t\t\t\t\tdownEvent.distance = new DragPoint();\r\n\t\t\t\t\tdownEvent.strength = new DragPoint();\r\n\t\t\t\t\tdownEvent.speed = new DragPoint();\r\n\t\t\t\t\tevents$.next(downEvent);\r\n\t\t\t\t\treturn downEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tfilter(event => event !== undefined),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic move$(target, events$, dismiss$, downEvent) {\r\n\t\tlet moveEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mousemove' : 'touchmove').pipe(\r\n\t\t\tstartWith(downEvent),\r\n\t\t\tmap((event) => {\r\n\t\t\t\tmoveEvent = moveEvent || new DragMoveEvent();\r\n\t\t\t\tmoveEvent.node = target;\r\n\t\t\t\tmoveEvent.target = event.target;\r\n\t\t\t\tmoveEvent.originalEvent = event;\r\n\t\t\t\tmoveEvent.position = this.getPosition(event, moveEvent.position);\r\n\t\t\t\tconst dragging = downEvent.down !== undefined && moveEvent.position !== undefined;\r\n\t\t\t\tif (dragging) {\r\n\t\t\t\t\tmoveEvent.distance.x = moveEvent.position.x - downEvent.down.x;\r\n\t\t\t\t\tmoveEvent.distance.y = moveEvent.position.y - downEvent.down.y;\r\n\t\t\t\t\tmoveEvent.strength.x = moveEvent.distance.x / window.innerWidth * 2;\r\n\t\t\t\t\tmoveEvent.strength.y = moveEvent.distance.y / window.innerHeight * 2;\r\n\t\t\t\t\tmoveEvent.speed.x = downEvent.speed.x + (moveEvent.strength.x - downEvent.strength.x) * 0.1;\r\n\t\t\t\t\tmoveEvent.speed.y = downEvent.speed.y + (moveEvent.strength.y - downEvent.strength.y) * 0.1;\r\n\t\t\t\t\tdownEvent.distance.x = moveEvent.distance.x;\r\n\t\t\t\t\tdownEvent.distance.y = moveEvent.distance.y;\r\n\t\t\t\t\tdownEvent.speed.x = moveEvent.speed.x;\r\n\t\t\t\t\tdownEvent.speed.y = moveEvent.speed.y;\r\n\t\t\t\t\tdownEvent.strength.x = moveEvent.strength.x;\r\n\t\t\t\t\tdownEvent.strength.y = moveEvent.strength.y;\r\n\t\t\t\t\tevents$.next(moveEvent);\r\n\t\t\t\t\treturn moveEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic up$(target, events$, dismiss$, downEvent) {\r\n\t\tlet upEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mouseup' : 'touchend').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tupEvent = upEvent || new DragUpEvent();\r\n\t\t\t\tevents$.next(upEvent);\r\n\t\t\t\tdismiss$.next();\r\n\t\t\t\t// console.log(downEvent.distance);\r\n\t\t\t\tif (Math.abs(downEvent.distance.x) > 10) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t}\r\n\t\t\t\treturn upEvent;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic events$(target) {\r\n\t\ttarget = target || document;\r\n\t\tconst events$ = new ReplaySubject(1);\r\n\t\tconst dismiss$ = new Subject();\r\n\t\treturn this.down$(target, events$).pipe(\r\n\t\t\tswitchMap((downEvent) => merge(\r\n\t\t\t\tthis.move$(target, events$, dismiss$, downEvent),\r\n\t\t\t\tthis.up$(target, events$, dismiss$, downEvent),\r\n\t\t\t).pipe(\r\n\t\t\t\ttakeUntil(dismiss$),\r\n\t\t\t)),\r\n\t\t\tswitchMap(() => events$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport DragService, { DragDownEvent, DragMoveEvent, DragUpEvent } from '../drag/drag.service';\r\n\r\nexport default class SliderComponent extends Component {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\t// console.log('current');\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t\t// this.state.current = Math.min(current, items ? items.length - 1 : 0);\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.container = node;\r\n\t\tthis.wrapper = node.querySelector('.slider__wrapper');\r\n\t\tif (this.items.length === 0) {\r\n\t\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\t\tthis.items = items;\r\n\t\t}\r\n\t\t// console.log('SliderComponent.onInit', this.items);\r\n\t\tthis.userGesture = false;\r\n\t\t// this.userGesture$ = new Subject();\r\n\t\tsetTimeout(() => {\r\n\t\t\t// this.change.next(this.current);\r\n\t\t\t/*\r\n\t\t\tgsap.set(this.wrapper, {\r\n\t\t\t\tx: -100 * this.current + '%',\r\n\t\t\t});\r\n\t\t\t*/\r\n\t\t\tthis.slider$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('dragService', event);\r\n\t\t\t});\r\n\t\t}, 1);\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t\t/*\r\n\t\tthis.autoplay$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(() => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tif (this.to) {\r\n\t\t\tclearTimeout(this.to);\r\n\t\t\tthis.to = null;\r\n\t\t}\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tlet currentSlide;\r\n\t\tslides.forEach((slide, i) => {\r\n\t\t\tif (i === current) {\r\n\t\t\t\tcurrentSlide = slide;\r\n\t\t\t\tslide.classList.add('active');\r\n\t\t\t} else {\r\n\t\t\t\tslide.classList.remove('active');\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst videos = Array.prototype.slice.call(node.querySelectorAll('video'));\r\n\t\tvideos.forEach(video => {\r\n\t\t\tif (!video.paused) {\r\n\t\t\t\tvideo.pause();\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (currentSlide) {\r\n\t\t\tconst video = currentSlide.querySelector('video');\r\n\t\t\tif (video) {\r\n\t\t\t\tconst onEnded = () => {\r\n\t\t\t\t\t// console.log(video, 'onEnded');\r\n\t\t\t\t\tvideo.removeEventListener('ended', onEnded);\r\n\t\t\t\t\t// if (!this.userGesture) {\r\n\t\t\t\t\t\tthis.current = (this.current + 1) % this.items.length;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t// }\r\n\t\t\t\t};\r\n\t\t\t\tvideo.addEventListener('ended', onEnded);\r\n\t\t\t\tvideo.play();\r\n\t\t\t} else {\r\n\t\t\t\tconst autoplay = typeof this.autoplay === 'number' ? this.autoplay : 4000;\r\n\t\t\t\tif (!this.userGesture) {\r\n\t\t\t\t\tthis.to = setTimeout(() => {\r\n\t\t\t\t\t\tthis.current = (this.current + 1) % this.items.length;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}, autoplay);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('SliderComponent.setActiveState', current, currentSlide);\r\n\t}\r\n\r\n\tslider$() {\r\n\t\tlet translation, dragDownEvent, dragMoveEvent;\r\n\t\treturn DragService.events$(this.wrapper).pipe(\r\n\t\t\ttap((event) => {\r\n\t\t\t\tif (event instanceof DragDownEvent) {\r\n\t\t\t\t\ttranslation = this.getTranslation(this.wrapper, this.container);\r\n\t\t\t\t\tdragDownEvent = event;\r\n\t\t\t\t} else if (event instanceof DragMoveEvent) {\r\n\t\t\t\t\tdragMoveEvent = this.onDragMoveEvent(dragDownEvent, event, translation);\r\n\t\t\t\t\t// console.log('DragMoveEvent');\r\n\t\t\t\t} else if (event instanceof DragUpEvent) {\r\n\t\t\t\t\tif (dragMoveEvent) {\r\n\t\t\t\t\t\tthis.container.classList.remove('dragging');\r\n\t\t\t\t\t\tthis.wrapper.style.transform = null;\r\n\t\t\t\t\t\tthis.onDragUpEvent(dragDownEvent, dragMoveEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log('DragUpEvent');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tautoplay$() {\r\n\t\tif (this.autoplay) {\r\n\t\t\tconst autoplay = typeof this.autoplay === 'number' ? this.autoplay : 4000;\r\n\t\t\treturn interval(autoplay).pipe(\r\n\t\t\t\ttakeUntil(this.userGesture$),\r\n\t\t\t\ttap(() => {\r\n\t\t\t\t\tthis.current = (this.current + 1) % this.items.length;\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tonDragMoveEvent(dragDownEvent, dragMoveEvent, translation) {\r\n\t\tthis.container.classList.add('dragging');\r\n\t\tconst transformX = translation.x + dragMoveEvent.distance.x;\r\n\t\tthis.wrapper.style.transform = `translate3d(${transformX}px, ${0}px, ${0}px)`;\r\n\t\treturn dragMoveEvent;\r\n\t}\r\n\r\n\tonDragUpEvent(dragDownEvent, dragMoveEvent) {\r\n\t\tconst width = this.container.offsetWidth;\r\n\t\tif (dragMoveEvent.distance.x * -1 > width * 0.25 && this.hasNext()) {\r\n\t\t\tthis.navTo(this.current + 1);\r\n\t\t} else if (dragMoveEvent.distance.x * -1 < width * -0.25 && this.hasPrev()) {\r\n\t\t\tthis.navTo(this.current - 1);\r\n\t\t} else {\r\n\t\t\tthis.wrapper.style.transform = `translate3d(${-100 * this.current}%, 0, 0)`;\r\n\t\t\t// this.navTo(this.current);\r\n\t\t}\r\n\t\t// this.navTo(current);\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tcurrent = (current > 0 ? current : this.items.length + current) % this.items.length;\r\n\t\tthis.current = current;\r\n\t\tthis.userGesture = true;\r\n\t\t// this.userGesture$.next();\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\treturn this.current - 1 >= 0;\r\n\t}\r\n\r\n\thasNext() {\r\n\t\treturn this.current + 1 < this.items.length;\r\n\t}\r\n\r\n\tgetTranslation(node, container) {\r\n\t\tlet x = 0,\r\n\t\t\ty = 0,\r\n\t\t\tz = 0;\r\n\t\tconst transform = node.style.transform;\r\n\t\tif (transform) {\r\n\t\t\tconst coords = transform.split('(')[1].split(')')[0].split(',');\r\n\t\t\tx = parseFloat(coords[0]);\r\n\t\t\ty = parseFloat(coords[1]);\r\n\t\t\tz = parseFloat(coords[2]);\r\n\t\t\tx = coords[0].indexOf('%') !== -1 ? x *= container.offsetWidth * 0.01 : x;\r\n\t\t\ty = coords[1].indexOf('%') !== -1 ? y *= container.offsetHeight * 0.01 : y;\r\n\t\t}\r\n\t\treturn { x, y, z };\r\n\t}\r\n}\r\n\r\nSliderComponent.meta = {\r\n\tselector: '[slider]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderCaseStudyComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -this.slideWidth * this.state.current + 'px, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': this.slideWidth * this.items.length + 'px' };\r\n\t}\r\n\r\n\tget slideWidth() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// const slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tconst slideWidth = (window.innerWidth < 768 ? node.offsetWidth: (node.offsetWidth / 12 * 10)) + 40;\r\n\t\treturn slideWidth;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.resize$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => this.pushChanges());\r\n\t\t/*\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t\t*/\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize');\r\n\t}\r\n\r\n\t/*\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\t*/\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n}\r\n\r\nSliderCaseStudyComponent.meta = {\r\n\tselector: '[slider-case-study]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import SliderComponent from './slider.component';\r\n\r\nexport default class SliderGalleryComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\t/*\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\t*/\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n\r\n\tdoClose() {\r\n\t\tthis.close.next();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode.next();\r\n\t}\r\n}\r\n\r\nSliderGalleryComponent.meta = {\r\n\tselector: '[slider-gallery]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween', 'close', 'mode'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { animationFrameScheduler, combineLatest, fromEvent, interval } from 'rxjs';\r\nimport { map, takeUntil, tap } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderHeroComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.pagination$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\t/*\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t\t*/\r\n\t}\r\n\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tthis.direction_ = direction;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\t\tif (direction == 1) {\r\n\t\t\t\tpagination.classList.remove('prev');\r\n\t\t\t\tpagination.classList.add('next');\r\n\t\t\t} else {\r\n\t\t\t\tpagination.classList.remove('next');\r\n\t\t\t\tpagination.classList.add('prev');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\traf$() {\r\n\t\treturn interval(0, animationFrameScheduler);\r\n\t}\r\n\r\n\tmouse$() {\r\n\t\tconst event = { x:0, y: 0};\r\n\t\treturn fromEvent(window, 'mousemove').pipe(\r\n\t\t\tmap(mouseEvent => {\r\n\t\t\t\tevent.x = mouseEvent.clientX;\r\n\t\t\t\tevent.y = mouseEvent.clientY;\r\n\t\t\t\treturn event;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tpagination$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst position = { x:0, y: 0};\r\n\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\treturn combineLatest([this.mouse$(), this.raf$()]).pipe(\r\n\t\t\ttap(datas => {\r\n\t\t\t\tconst mouse = datas[0];\r\n\t\t\t\tposition.x += (mouse.x - position.x) / 20;\r\n\t\t\t\tposition.y += (mouse.y - position.y) / 20;\r\n\t\t\t\t// const rect = node.getBoundingClientRect();\r\n\t\t\t\tthis.direction = mouse.x > window.innerWidth / 2 ? 1 : -1;\r\n\t\t\t\tpagination.style.transform = `translateX(${position.x}px) translateY(${position.y}px)`;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tif (event.clientX > window.innerWidth / 2) {\r\n\t\t\t\t\t// if (this.hasNext()) {\r\n\t\t\t\t\t\tthis.navTo(this.state.current + 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if (this.hasPrev()) {\r\n\t\t\t\t\t\tthis.navTo(this.state.current - 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\t*/\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n}\r\n\r\nSliderHeroComponent.meta = {\r\n\tselector: '[slider-hero]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\nimport { getSlug } from \"../environment\";\r\n\r\nexport default class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\treturn getSlug(value);\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Context } from 'rxcomp';\r\n\r\nexport default class VirtualItem extends Context {\r\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\r\n\t\tsuper(parentInstance);\r\n\t\tthis[key] = $key;\r\n\t\tthis[value] = $value;\r\n\t\tthis.index = index;\r\n\t\tthis.count = count;\r\n\t}\r\n\r\n\tget first() {\r\n\t\treturn this.index === 0;\r\n\t}\r\n\r\n\tget last() {\r\n\t\treturn this.index === this.count - 1;\r\n\t}\r\n\r\n\tget even() {\r\n\t\treturn this.index % 2 === 0;\r\n\t}\r\n\r\n\tget odd() {\r\n\t\treturn !this.even;\r\n\t}\r\n}\r\n","import { getContext, Structure } from 'rxcomp';\r\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\r\nimport { auditTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\r\nimport VirtualItem from './virtual.item';\r\n\r\nexport const VirtualMode = {\r\n\tResponsive: 1,\r\n\tGrid: 2,\r\n\tCentered: 3,\r\n\tList: 4\r\n};\r\n\r\nexport default class VirtualStructure extends Structure {\r\n\r\n\tonInit() {\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst template = node.firstElementChild;\r\n\t\tconst expression = node.getAttribute('*virtual');\r\n\t\tnode.removeAttribute('*virtual');\r\n\t\tnode.removeChild(template);\r\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\r\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\r\n\t\tthis.container = node;\r\n\t\tthis.template = template;\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options = {\r\n\t\t\ttop: 0,\r\n\t\t\twidth: this.width,\r\n\t\t\tgutter: this.gutter,\r\n\t\t\tcontainerWidth: 0,\r\n\t\t\tcontainerHeight: 0,\r\n\t\t\tcols: [0],\r\n\t\t\tstrategy: 1\r\n\t\t};\r\n\t\tthis.cachedRects = {};\r\n\t\tthis.cachedInstances = [];\r\n\t\tthis.cacheNodes = [];\r\n\t\tthis.items$ = new BehaviorSubject([]);\r\n\t\tthis.update$()\r\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\r\n\t\t\t.subscribe(visibleItems => {\r\n\t\t\t\t// console.log(visibleItems.length);\r\n\t\t\t});\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\t// resolve\r\n\t\tconst items = module.resolve(this.virtualFunction, context.parentInstance, this) || [];\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options.width = this.width;\r\n\t\tthis.updateView(true);\r\n\t\tthis.items$.next(items);\r\n\t}\r\n\r\n\tupdate$() {\r\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\r\n\t\t\tmap(datas => {\r\n\t\t\t\tconst options = this.options;\r\n\t\t\t\tconst items = this.items$.getValue();\r\n\t\t\t\tconst total = items.length;\r\n\t\t\t\tthis.container.position = 'relative';\r\n\t\t\t\tlet highestHeight = 0;\r\n\t\t\t\tconst width = this.getWidth();\r\n\t\t\t\tconst gutter = this.getGutter(width);\r\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\r\n\t\t\t\t\tlet col, height, top, left, bottom;\r\n\t\t\t\t\tlet rect = this.cachedRects[i];\r\n\t\t\t\t\tif (rect) {\r\n\t\t\t\t\t\tcol = rect.col;\r\n\t\t\t\t\t\theight = rect.height;\r\n\t\t\t\t\t\tleft = rect.left;\r\n\t\t\t\t\t\t// top = rect.top;\r\n\t\t\t\t\t\t// bottom = rect.bottom;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcol = this.getCol();\r\n\t\t\t\t\t\theight = this.getHeight(width, item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttop = options.cols[col];\r\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\r\n\t\t\t\t\t\tnode.style.position = 'absolute';\r\n\t\t\t\t\t\tnode.style.top = top + 'px';\r\n\t\t\t\t\t\tnode.style.left = left + 'px';\r\n\t\t\t\t\t\tnode.style.width = width + 'px';\r\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\r\n\t\t\t\t\t\t\theight = node.offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trect.height = height;\r\n\t\t\t\t\t\t\trect.bottom = bottom;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.removeNode(i);\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet removeIndex = items.length;\r\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\r\n\t\t\t\t\tthis.removeNode(removeIndex);\r\n\t\t\t\t\tremoveIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tthis.cacheNodes.length = items.length;\r\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\r\n\t\t\t\treturn visibleItems;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tgetCols() {\r\n\t\tconst options = this.options;\r\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\r\n\t\treturn new Array(cols).fill(0);\r\n\t}\r\n\r\n\tgetCol() {\r\n\t\tconst options = this.options;\r\n\t\tlet col;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\r\n\t\t\t\t\treturn c < a[p] ? i : p;\r\n\t\t\t\t}, 0);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tcol = 0;\r\n\t\t}\r\n\t\treturn col;\r\n\t}\r\n\r\n\tgetWidth() {\r\n\t\tconst options = this.options;\r\n\t\tlet width;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\twidth = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\twidth = options.containerWidth;\r\n\t\t}\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(width, item) {\r\n\t\tconst options = this.options;\r\n\t\tlet height;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\theight = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\theight = 80;\r\n\t\t}\r\n\t\treturn height;\r\n\t}\r\n\r\n\tgetGutter(width) {\r\n\t\tconst options = this.options;\r\n\t\tlet gutter;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tgutter = options.gutter;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tgutter = 0;\r\n\t\t}\r\n\t\treturn gutter;\r\n\t}\r\n\r\n\tgetLeft(index, width, gutter) {\r\n\t\tconst options = this.options;\r\n\t\tlet left;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tleft = index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tleft = 0;\r\n\t\t}\r\n\t\treturn left;\r\n\t}\r\n\r\n\tcachedNode(index, i, value, total) {\r\n\t\tif (this.cacheNodes[index]) {\r\n\t\t\treturn this.updateNode(index, i, value);\r\n\t\t} else {\r\n\t\t\treturn this.createNode(index, i, value, total);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateNode(index, i, value, total) {\r\n\t\tconst clonedNode = this.template.cloneNode(true);\r\n\t\tdelete clonedNode.rxcompId;\r\n\t\tthis.container.appendChild(clonedNode);\r\n\t\tthis.cacheNodes[index] = clonedNode;\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\tconst tokens = this.tokens;\r\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\r\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\r\n\t\tconst forItemContext = getContext(instance);\r\n\t\tmodule.compile(clonedNode, forItemContext.instance);\r\n\t\tthis.cachedInstances[index] = instance;\r\n\t\treturn clonedNode;\r\n\t}\r\n\r\n\tupdateNode(index, i, value) {\r\n\t\tconst instance = this.cachedInstances[index];\r\n\t\tconst tokens = this.tokens;\r\n\t\tif (instance[tokens.key] !== i) {\r\n\t\t\tinstance[tokens.key] = i;\r\n\t\t\tinstance[tokens.value] = value;\r\n\t\t\tinstance.pushChanges();\r\n\t\t}\r\n\t\t// console.log(index, i, value);\r\n\t\treturn this.cacheNodes[index];\r\n\t}\r\n\r\n\tremoveNode(index) {\r\n\t\tthis.cachedInstances[index] = undefined;\r\n\t\tconst node = this.cacheNodes[index];\r\n\t\tif (node) {\r\n\t\t\tconst context = getContext(this);\r\n\t\t\tconst module = context.module;\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodule.remove(node);\r\n\t\t}\r\n\t\tthis.cacheNodes[index] = undefined;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tintersect(top1, bottom1, top2, bottom2) {\r\n\t\treturn top2 < bottom1 && bottom2 > top1;\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tauditTime(100),\r\n\t\t\tstartWith(null),\r\n\t\t\ttap(() => this.updateView(true))\r\n\t\t);\r\n\t}\r\n\r\n\tscroll$(node) {\r\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\r\n\t}\r\n\r\n\tupdateView(reset) {\r\n\t\tconst rect = this.container.getBoundingClientRect();\r\n\t\tconst options = this.options;\r\n\t\toptions.top = rect.top;\r\n\t\toptions.containerWidth = rect.width;\r\n\t\toptions.containerHeight = window.innerHeight;\r\n\t\toptions.cols = this.getCols();\r\n\t\tif (reset) {\r\n\t\t\tthis.cachedRects = {};\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpressionTokens(expression) {\r\n\t\tif (expression === null) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tconst expressions = expression\r\n\t\t\t.split(';')\r\n\t\t\t.map(x => x.trim())\r\n\t\t\t.filter(x => x !== '');\r\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\r\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\r\n\t\tconst iterable = virtualExpressions[1];\r\n\t\tlet key = 'index';\r\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\r\n\t\tif (keyValueMatches) {\r\n\t\t\tkey = keyValueMatches[1];\r\n\t\t\tvalue = keyValueMatches[2];\r\n\t\t}\r\n\t\tif (expressions.length > 1) {\r\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\r\n\t\t\tif (indexExpressions.length === 3) {\r\n\t\t\t\tkey = indexExpressions[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { key, value, iterable };\r\n\t}\r\n}\r\n\r\nVirtualStructure.meta = {\r\n\tselector: '[*virtual]',\r\n\tinputs: ['mode', 'width', 'gutter']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AppComponent from './app.component';\r\nimport AppearStaggerDirective from './appear/appear-stagger.directive';\r\nimport AppearDirective from './appear/appear.directive';\r\nimport AuthForgotComponent from './auth/auth-forgot.component';\r\nimport AuthModalComponent from './auth/auth-modal.component';\r\nimport AuthSigninComponent from './auth/auth-signin.component';\r\nimport AuthSignupComponent from './auth/auth-signup.component';\r\nimport AuthComponent from './auth/auth.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport ContactsSimpleComponent from './contacts/contacts-simple.component';\r\nimport ContactsComponent from './contacts/contacts.component';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport FilterDropdownComponent from './filter/filter-dropdown.component';\r\nimport ControlCheckboxComponent from './forms/control-checkbox.component';\r\nimport ControlCustomSelectComponent from './forms/control-custom-select.component';\r\nimport ControlPasswordComponent from './forms/control-password.component';\r\nimport ControlTextComponent from './forms/control-text.component';\r\nimport ControlTextareaComponent from './forms/control-textarea.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport GalleryModalComponent from './gallery/gallery-modal.component';\r\nimport GalleryComponent from './gallery/gallery.component';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport MagazineComponent from './magazine/magazine.component';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport PortfolioComponent from './portfolio/portfolio.component';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport ShareComponent from './share/share.component';\r\nimport SliderCaseStudyComponent from './slider/slider-case-study.component';\r\nimport SliderGalleryComponent from './slider/slider-gallery.component';\r\nimport SliderHeroComponent from './slider/slider-hero.component';\r\nimport SliderComponent from './slider/slider.component';\r\nimport SlugPipe from './slug/slug.pipe';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\n\r\nexport default class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAppearDirective,\r\n\t\tAppearStaggerDirective,\r\n\t\tAuthComponent,\r\n\t\tAuthForgotComponent,\r\n\t\tAuthModalComponent,\r\n\t\tAuthSigninComponent,\r\n\t\tAuthSignupComponent,\r\n\t\tClickOutsideDirective,\r\n\t\tContactsComponent,\r\n\t\tContactsSimpleComponent,\r\n\t\tControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlPasswordComponent,\r\n\t\tControlTextComponent,\r\n\t\tControlTextareaComponent,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tFilterDropdownComponent,\r\n\t\tGalleryComponent,\r\n\t\tGalleryModalComponent,\r\n\t\tHeaderComponent,\r\n\t\tHtmlPipe,\r\n\t\tMagazineComponent,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tPortfolioComponent,\r\n\t\tScrollToDirective,\r\n\t\tSecureDirective,\r\n\t\tShareComponent,\r\n\t\tSliderComponent,\r\n\t\tSliderCaseStudyComponent,\r\n\t\tSliderGalleryComponent,\r\n\t\tSliderHeroComponent,\r\n\t\tSlugPipe,\r\n\t\tVirtualStructure\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}