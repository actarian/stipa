{"version":3,"sources":["src/js/main.js","../../src/js/accordion/accordion.component.js","../../src/js/accordion/accordion-item.component.js","../../src/js/app.component.js","../../src/js/intersection/intersection.service.js","../../src/js/appear/appear-stagger.directive.js","../../src/js/appear/appear.directive.js","../../src/js/environment.js","../../src/js/http/http.service.js","../../src/js/api/api.service.js","../../src/js/storage/storage.service.js","../../src/js/storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/auth/auth-forgot.component.js","../../src/js/modal/modal.service.js","../../src/js/modal/modal-outlet.component.js","../../src/js/auth/auth.component.js","../../src/js/auth/auth-modal.component.js","../../src/js/auth/auth-signin.component.js","../../src/js/auth/auth-signup.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/contacts/contacts-simple.component.js","../../src/js/contacts/contacts.component.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/filter/filter-dropdown.component.js","../../src/js/forms/control.component.js","../../src/js/forms/control-checkbox.component.js","../../src/js/keyboard/keyboard.service.js","../../src/js/forms/control-custom-select.component.js","../../src/js/forms/control-password.component.js","../../src/js/forms/control-text.component.js","../../src/js/forms/control-textarea.component.js","../../src/js/forms/errors.component.js","../../src/js/forms/test.component.js","../../src/js/gallery/gallery-modal.component.js","../../src/js/gallery/gallery.component.js","../../src/js/css/css.service.js","../../src/js/header/header.component.js","../../src/js/html/html.pipe.js","../../src/js/filter/filter-item.js","../../src/js/location/location.service.js","../../src/js/filter/filter.service.js","../../src/js/magazine/magazine.service.js","../../src/js/magazine/magazine.component.js","../../src/js/modal/modal.component.js","../../src/js/portfolio/portfolio.service.js","../../src/js/portfolio/portfolio.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/search/search.service.js","../../src/js/search/search.component.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/share/share.component.js","../../src/js/drag/drag.service.js","../../src/js/slider/slider.component.js","../../src/js/slider/slider-case-study.component.js","../../src/js/slider/slider-gallery.component.js","../../src/js/slider/slider-hero.component.js","../../src/js/slug/slug.pipe.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","__proto__","ACCORDION_UID","AccordionComponent","_Component","apply","arguments","_proto","onInit","items","register","item","unregister","_this","uid","keys","reduce","toggle","_this2","forEach","accordionItem","active","pushChanges","Component","meta","selector","AccordionItemComponent","host","onDestroy","onToggle","hosts","AppComponent","getContext","node","classList","remove","IntersectionService","observer","observer_","readySubject_","BehaviorSubject","observerSubject_","Subject","IntersectionObserver","entries","next","intersection$","window","observe","pipe","map","find","entry","filter","undefined","finalize","unobserve","of","isIntersecting","firstIntersection$","first","AppearStaggerDirective","_Directive","add","onChanges","appeared","takeUntil","unsubscribe$","subscribe","src","Directive","AppearDirective","NODE","BASE_HREF","get","URLSearchParams","location","search","document","querySelector","getAttribute","STATIC","port","DEVELOPMENT","indexOf","split","ENV","NAME","PRODUCTION","RESOURCE","STATIC_RESOURCE","API","STATIC_API","getApiUrl","url","useStatic","Environment","options","assign","replace","substr","protocol","HttpResponse","response","data","status","statusText","ok","redirected","HttpService","http$","method","format","methods","body","JSON","stringify","queryString","encodeURI","join","response_","from","fetch","headers","Accept","Content-Type","then","contentType","json","blob","text","Promise","resolve","reject","error","console","warn","getError","catchError","throwError","get$","query","delete$","post$","put$","patch$","object","statusCode","statusMessage","log","ApiService","_HttpService","call","staticGet$","staticDelete$","staticPost$","staticPut$","staticPatch$","currentLanguage","StorageService","encode","decoded","Serializer","encodeJson","encodeURIComponent","encodeBase64","decode","encoded","decodeBase64","decodeURIComponent","decodeJson","isSupported","type","storage","flag","WINDOW","x","setItem","removeItem","DOMException","code","name","Boolean","LocalStorageService","_StorageService","clear","localStorage","items$","toArray","delete","exist","getItem","getRaw","set","setRaw","toRawArray","supported","ReplaySubject","User","firstName","toUpperCase","lastName","UserService","getCurrentUser","user$_","getValue","setUser","user","me$","mapUser","static","switchMap","register$","payload","mapStatic__","login$","_this3","logout$","_this4","retrieve$","_this5","isStatic","action","fake","mapUsers","users","AuthForgotComponent","FormGroup","email","FormControl","Validators","RequiredValidator","EmailValidator","checkRequest","antiforgery","checkField","controls","changes$","changes","success","test","patch","reset","onSubmit","valid","submitted","sent","touched","onLogin","login","onRegister","outputs","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","template","getNode","tap","modal$","events$","load$","div","createElement","innerHTML","firstElementChild","ModalOutletComponent","modalNode","event","modal_","removeChild","appendChild","compile","AuthComponent","views","SIGN_IN","SIGN_UP","FORGOTTEN","view","hasAttribute","parseInt","onForgot","onSignIn","href","auth","onSignUp","onForgottenSent","inputs","AuthModalComponent","_AuthComponent","parentInstance","close","AuthSigninComponent","password","signIn","forgot","AuthSignupComponent","roles","countries","company","role","country","newsletter","privacy","formaction","id","dataLayer","push","form type","ClickOutsideDirective","initialFocus","_getContext","event$","fromEvent","contains","shareReplay","expression","outputFunction","makeFunction","clickOutside$","ContactsSimpleComponent","ContactsComponent","reason","firstCategory","secondCategory","message","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","nextId","dropdown","id_","DropdownItemDirective","FilterDropdownComponent","dropdownId","ControlComponent","flags","control","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keyup$","typing$","to","typing","key$","clearTimeout","setTimeout","regexp","match","ControlCustomSelectComponent","labels","word","scrollToWord","index","toLowerCase","children","scrollTo","offsetTop","setOption","isMultiple","splice","slice","hasOption","onDropped","getLabel","v","select","$event","multiple","ControlPasswordComponent","required","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","env","onTest","onReset","GalleryModalComponent","mode","sliderItems","sliderIndex","toggleMode","onChange","onTween","onSelect","GALLERY_MODAL","GalleryComponent","galleryItems","click$","onOpenGallery","firstGalleryItem","gallery","Array","isArray","CssService","height$","style","documentElement","innerHeight","startWith","height","vh","setProperty","HeaderComponent","searchActive","mainActive","onSearch","onMainToggle","querySelectorAll","gsap","opacity","duration","stagger","each","ease","Power3","easeOut","onSearchToggle","onOpenSub","subId","onCloseSub","isSubOpen","isPrimaryHidden","onShowSub","showPictureOrDefault","innerWidth","showPicture","img","picture","onload","overwrite","onComplete","childElementCount","defaultSrc","HtmlPipe","_Pipe","transform","m","n","String","fromCharCode","unescapes","rx","RegExp","Pipe","FilterMode","FilterItem","change$","placeholder","values","unshift","getSelectedOption","has","selectedOption","hasAny","toggleActive","LocationService","keyOrValue","params","history","pushState","title","toString","deserialize","serialize","atob","parse","btoa","FilterService","initialParams","callback","filters","getParamsCount","p","c","locationParams","any","updateFilterStates","merge","auditTime","filterItems","skipFilter","initialCount","filteredItems","option","count","disabled","sort","a","b","MagazineService","all$","all","filters$","MagazineComponent","maxVisibleItems","visibleItems","busy","onLoad","filterService","scroll$","getBoundingClientRect","bottom","combineLatest","toggleFilter","clearFilter","preventDefault","stopImmediatePropagation","ModalComponent","PortfolioService","PortfolioComponent","firstItem","sortPatternItems","copy","important","order","sorted","_loop","shift","ScrollToDirective","scrollTo$","_getContext2","result","currentTop","top","o","pow","html","scroll-behavior","Math","abs","Quad","onUpdate","pageYOffset","scrollTop","SearchService","SearchComponent","delay","onSearchResults","category","DownloadService","download","fileName","URL","createObjectURL","click","revokeObjectURL","a_","SecureDirective","tryDownloadHref","pop","ShareComponent","share","getTitle","getUrl","origin","charCodeAt","DragPoint","y","DragEvent","DragDownEvent","_DragEvent","distance","strength","speed","DragMoveEvent","_DragEvent2","DragUpEvent","_DragEvent3","DragService","getPosition","point","MouseEvent","clientX","clientY","TouchEvent","touches","pageX","pageY","down$","downEvent","originalEvent","down","move$","dismiss$","moveEvent","position","up$","upEvent","SliderAutoplayMode","SliderComponent","getCurrent","state","current","setCurrent","change","onActivate","checkAutoplay","onDeactivate","userGesture","disableAutoplay","container","wrapper","slider$","changed$","intersect$","focusAutoplay","resize$","over$","leave$","setActiveState","mobile","over","_this6","slide","_this7","autoplay","currentSlide","video","onEnded","active_","mobile_","over_","play","paused","pause","checkFocusAutoplay","translation","dragDownEvent","dragMoveEvent","_this8","getTranslation","onDragMoveEvent","onDragUpEvent","transformX","width","offsetWidth","hasNext","navTo","hasPrev","z","coords","parseFloat","offsetHeight","SliderCaseStudyComponent","_SliderComponent","onContentOver","onContentOut","slideWidth","SliderGalleryComponent","doClose","SliderHeroComponent","pagination$","raf$","interval","animationFrameScheduler","mouse$","mouseEvent","pagination","datas","mouse","direction","direction_","SlugPipe","VirtualItem","$key","$value","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","gutter","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","update$","context","updateView","total","highestHeight","getWidth","getGutter","col","left","rect","getCol","getHeight","intersect","getLeft","cachedNode","max","removeNode","removeIndex","getCols","floor","fill","updateNode","createNode","clonedNode","cloneNode","rxcompId","args","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","Error","trim","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component } from 'rxcomp';\r\n\r\nlet ACCORDION_UID = 0;\r\n\r\nexport default class AccordionComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.items = {};\r\n\t}\r\n\r\n\tregister(item) {\r\n\t\tthis.items[++ACCORDION_UID] = item;\r\n\t}\r\n\r\n\tunregister(item) {\r\n\t\tconst uid = Object.keys(this.items).reduce((uid, key) => {\r\n\t\t\tif (this.items[key] === item) {\r\n\t\t\t\treturn key;\r\n\t\t\t} else {\r\n\t\t\t\treturn uid;\r\n\t\t\t}\r\n\t\t}, -1);\r\n\t\tif (uid !== -1) {\r\n\t\t\tdelete this.items[uid];\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tObject.keys(this.items).forEach((key) => {\r\n\t\t\tconst accordionItem = this.items[key];\r\n\t\t\tif (accordionItem === item) {\r\n\t\t\t\taccordionItem.active = !accordionItem.active;\r\n\t\t\t} else {\r\n\t\t\t\taccordionItem.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nAccordionComponent.meta = {\r\n\tselector: '[accordion]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport AccordionComponent from './accordion.component';\r\n\r\nexport default class AccordionItemComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tif (!this.host) {\r\n\t\t\tthrow ('missing Accordion host');\r\n\t\t}\r\n\t\tthis.host.register(this);\r\n\t\tthis.active = false;\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tif (this.host) {\r\n\t\t\tthis.host.unregister(this);\r\n\t\t}\r\n\t}\r\n\r\n\tonToggle() {\r\n\t\tif (this.host) {\r\n\t\t\tthis.host.toggle(this);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAccordionItemComponent.meta = {\r\n\tselector: '[accordion-item]',\r\n\thosts: { host: AccordionComponent },\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n// import { takeUntil } from 'rxjs/operators';\r\n// import { BreakpointService } from './breakpoint/breakpoint.service';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\t/*\r\n\t\tBreakpointService.observe$({\r\n\t\t\tisMobile: '(max-width: 767px)'\r\n\t\t}).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(results => {\r\n\t\t\tconsole.log('AppComponent.BreakpointService.results', results);\r\n\t\t\tthis.isMobile = results.isMobile;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\tfilter(entry => entry !== undefined),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node, isIntersecting: true });\r\n\t\t}\r\n\t}\r\n\r\n\tstatic firstIntersection$(node) {\r\n\t\treturn this.intersection$(node).pipe(\r\n\t\t\tfilter(entry => entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\tfirst(),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearStaggerDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear-stagger');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearStaggerDirective.meta = {\r\n\tselector: '[appear-stagger]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearDirective.meta = {\r\n\t// selector: '[appear],.row,.listing--series,.listing--products,.listing--cards,.listing--news,.listing--downloads',\r\n\tselector: '.picture',\r\n};\r\n","export const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const STATIC = NODE ? false : (window && (window.location.port === '41234' || window.location.host === 'actarian.github.io' || window.location.host === 'stipa.herokuapp.com'));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'stipa',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: STATIC ? './api' : '/api-static',\r\n};\r\n\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\tconsole.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n\r\nexport class Environment {\r\n\r\n\tget href() {\r\n\t\tif (window.location.host.indexOf('herokuapp') !== -1) {\r\n\t\t\treturn 'https://raw.githubusercontent.com/actarian/stipa/master/docs/';\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tget host() {\r\n\t\tlet host = window.location.host.replace('127.0.0.1', '192.168.1.2');\r\n\t\tif (host.substr(host.length - 1, 1) === '/') {\r\n\t\t\thost = host.substr(0, host.length - 1);\r\n\t\t}\r\n\t\treturn `${window.location.protocol}//${host}${BASE_HREF}`;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport const environment = new Environment({\r\n\tport: 5000,\r\n});\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t    return key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { getApiUrl } from '../environment';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = window.currentLanguage || 'it';\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url), data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url));\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic staticGet$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url, true), data, format);\r\n\t}\r\n\r\n\tstatic staticDelete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url, true));\r\n\t}\r\n\r\n\tstatic staticPost$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPut$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPatch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n}\r\n","import { decodeBase64, decodeJson, encodeBase64, encodeJson, Serializer, WINDOW } from 'rxcomp';\r\n\r\nexport default class StorageService {\r\n\tstatic supported = false;\r\n\tstatic encode(decoded) {\r\n\t\tlet encoded = Serializer.encode(decoded, [encodeJson, encodeURIComponent, encodeBase64]) || null;\r\n\t\treturn encoded;\r\n\t}\r\n\tstatic decode(encoded) {\r\n\t\tlet decoded = Serializer.decode(encoded, [decodeBase64, decodeURIComponent, decodeJson]);\r\n\t\treturn decoded;\r\n\t}\r\n\tstatic isSupported(type) {\r\n\t\tlet flag = false;\r\n\t\tlet storage;\r\n\t\ttry {\r\n\t\t\tstorage = WINDOW[type];\r\n\t\t\tconst x = '__storage_test__';\r\n\t\t\tstorage.setItem(x, x);\r\n\t\t\tstorage.removeItem(x);\r\n\t\t\tflag = true;\r\n\t\t} catch (error) {\r\n\t\t\tflag = error instanceof DOMException && (\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.code === 22 ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.code === 1014 ||\r\n\t\t\t\t// test name field too, because code might not be present\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.name === 'QuotaExceededError' ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n\t\t\t\t// acknowledge QuotaExceededError only if there's something already stored\r\n\t\t\t\tBoolean(storage && storage.length !== 0);\r\n\t\t}\r\n\t\treturn flag;\r\n\t}\r\n}\r\n","import { ReplaySubject } from 'rxjs';\r\nimport StorageService from './storage.service';\r\n\r\nexport default class LocalStorageService extends StorageService {\r\n\tstatic items$ = new ReplaySubject(1);\r\n\tstatic clear() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic delete(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic exist(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn localStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tstatic get(name) {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\tstatic set(name, value) {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\tstatic getRaw(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = localStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tstatic setRaw(name, value) {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tlocalStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic toArray() {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\tstatic toRawArray() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(localStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tstatic isSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('localStorage');\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport LocalStorageService from '../storage/local-storage.service';\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default class UserService {\r\n\r\n\tstatic getCurrentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\t//return ApiService.staticGet$(`/user/me`).pipe(\r\n\t\treturn ApiService.get$(`/user/me`).pipe(\r\n\t\t\t// map((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\tcatchError(error => of (null)),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/register`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/login`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn ApiService.staticPost$(`/user/logout`).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'logout')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic retrieve$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/forget`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tstatic update$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/updateprofile`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic mapStatic__(user, isStatic, action = 'me') {\r\n\t\tif (!isStatic) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic fake(user) {\r\n\t\tuser.firstName = user.firstName || 'Jhon';\r\n\t\tuser.lastName = user.lastName || 'Appleseed';\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic mapUser(user, isStatic) {\r\n\t\treturn isStatic ? UserService.fake(new User(user)) : new User(user);\r\n\t}\r\n\r\n\tstatic mapUsers(users, isStatic) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x, isStatic)) : [];\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$_ = new BehaviorSubject(null);\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthForgotComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthForgotComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthForgotComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.retrieve$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.onSubmit', response);\r\n\t\t\t\t\tthis.sent.next(true);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthForgotComponent.meta = {\r\n\tselector: '[auth-forgot]',\r\n\toutputs: ['sent', 'login', 'register'],\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.views = {\r\n\t\t\tSIGN_IN: 1,\r\n\t\t\tSIGN_UP: 2,\r\n\t\t\tFORGOTTEN: 3,\r\n\t\t};\r\n\t\tthis.view = node.hasAttribute('view') ? parseInt(node.getAttribute('view')) : this.views.SIGN_IN;\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\t// console.log('AuthComponent.onForgot');\r\n\t\tthis.view = this.views.FORGOTTEN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('AuthComponent.onLogin');\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('AuthComponent.onRegister');\r\n\t\tthis.view = this.views.SIGN_UP;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('AuthComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('AuthComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgottenSent(email) {\r\n\t\t/*\r\n\t\tconsole.log('AuthComponent.onForgottenSent', email);\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nAuthComponent.meta = {\r\n\tselector: '[auth]',\r\n\tinputs: ['auth']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\nimport AuthComponent from './auth.component';\r\n\r\nexport default class AuthModalComponent extends AuthComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('AuthModalComponent.onInit', data);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('AuthModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('AuthModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\t// console.log('AuthModalComponent.onDestroy');\r\n\t}\r\n\t*/\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nAuthModalComponent.meta = {\r\n\tselector: '[auth-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tinterests: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthSigninComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: 'password',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSigninComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSigninComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Login', this.form.value)\r\n\t\t\tUserService.login$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.signIn.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot() {\r\n\t\tthis.forgot.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSigninComponent.meta = {\r\n\tselector: '[auth-signin]',\r\n\toutputs: ['signIn', 'forgot', 'register'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t    roles: [],\r\n            countries: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\trole: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n            action: window.formaction\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('WorkWithUsComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\tcountry: 'Italy',\r\n\t\t\trole: role,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.form.submitted = false;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSignupComponent.meta = {\r\n\tselector: '[auth-signup]',\r\n\t//outputs: ['signUp', 'login'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsSimpleComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t// privacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t// privacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$(this.action, this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsSimpleComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget action() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst form = node.querySelector('form');\r\n\t\treturn form.getAttribute('action');\r\n\t}\r\n\r\n}\r\n\r\nContactsSimpleComponent.meta = {\r\n\tselector: '[contacts-simple]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\treason: [],\r\n\t\t\tfirstCategory: [],\r\n\t\t\tsecondCategory: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\treason: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfirstCategory: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tsecondCategory: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tcontrols.reason.options = data.reason;\r\n\t\tcontrols.firstCategory.options = data.firstCategory;\r\n\t\tcontrols.secondCategory.options = data.secondCategory;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst reason = this.controls.reason.options.length ? this.controls.reason.options[0].id : null;\r\n\t\tconst firstCategory = this.controls.firstCategory.options.length ? this.controls.firstCategory.options[0].id : null;\r\n\t\tconst secondCategory = this.controls.secondCategory.options.length ? this.controls.secondCategory.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\treason: reason,\r\n\t\t\tfirstCategory: firstCategory,\r\n\t\t\tsecondCategory: secondCategory,\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$(this.action, { data: this.form.value })\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget action() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst form = node.querySelector('form');\r\n\t\treturn form.getAttribute('action');\r\n\t}\r\n\r\n}\r\n\r\nContactsComponent.meta = {\r\n\tselector: '[contacts]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\n\r\nexport default class FilterDropdownComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t}\r\n\r\n}\r\n\r\nFilterDropdownComponent.meta = {\r\n\tselector: '[filter-dropdown]',\r\n\tinputs: ['label', 'filter'],\r\n\ttemplate: /* html */ `\r\n\t\t<span class=\"text\" [innerHTML]=\"label\"></span>\r\n\t\t<span class=\"btn--dropdown\" [dropdown]=\"dropdownId\">\r\n\t\t\t<span [innerHTML]=\"filter.label\"></span> <svg class=\"filter\"><use xlink:href=\"#filter\"></use></svg>\r\n\t\t\t<!-- dropdown -->\r\n\t\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t\t<div class=\"category\" [innerHTML]=\"filter.label\"></div>\r\n\t\t\t\t<ul class=\"nav--dropdown\">\r\n\t\t\t\t\t<li *for=\"let item of filter.options\">\r\n\t\t\t\t\t\t<span [class]=\"{ active: filter.has(item), disabled: item.disabled }\" (click)=\"filter.set(item)\" [innerHTML]=\"item.label\"></span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</span>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" [formControlName]=\"name\" />\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<errors-component *if=\"control.validators.length\" [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent } from 'rxjs';\r\nimport { filter, map, shareReplay } from 'rxjs/operators';\r\n\r\nexport default class KeyboardService {\r\n\r\n\tstatic keydown$() {\r\n\t\treturn fromEvent(window, 'keydown').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\treturn fromEvent(window, 'keyup').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tlet typing = '',\r\n\t\t\tto;\r\n\t\treturn this.key$().pipe(\r\n\t\t\tmap(key => {\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t}\r\n\t\t\t\ttyping += key;\r\n\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\ttyping = '';\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn typing;\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tconst regexp = /\\w/;\r\n\t\treturn this.keydown$().pipe(\r\n\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\tmap(event => event.key),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tsetOption(item) {\r\n\t\tthis.control.value = item.id;\r\n\t\t// DropdownDirective.dropdown$.next(null);\r\n\t}\r\n\t*/\r\n\r\n\tsetOption(item) {\r\n\t\tconsole.log('setOption', item, this.isMultiple);\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tthis.control.value = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tthis.control.value = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log($event);\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\t/*\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.add('dropped');\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tonClickOutside(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.remove('dropped');\r\n\t}\r\n\t*/\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\tinputs: ['control', 'label', 'multiple', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"getLabel()\"></span>\r\n            <input type=\"text\" style=\"display:none\" class=\"control--select\" [formControl]=\"control\" [formControlName]=\"name\" />\r\n\t\t\t<svg class=\"icon caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t<li *for=\"let item of control.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n\t/*  (click)=\"onClick($event)\" (clickOutside)=\"onClickOutside($event)\" */\r\n\t/*  <!-- <div class=\"dropdown\" [class]=\"{ dropped: dropped }\"> --> */\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [innerHTML]=\"label\" rows=\"6\" [formControlName]=\"name\"></textarea>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { ENV } from '../environment';\r\n\r\nexport default class TestComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.env = ENV;\r\n\t}\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"group--form--results\" *if=\"env.DEVELOPMENT\">\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--link\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--link\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nexport default class GalleryModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.mode = 'slider';\r\n\t\tconst { parentInstance, node } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = this.data = parentInstance.modal.data;\r\n\t\t\tthis.sliderItems = data.items;\r\n\t\t\tthis.sliderIndex = data.index;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode = this.mode === 'slider' ? 'grid' : 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonChange(event) {\r\n\t\t// console.log('onChange', event);\r\n\t}\r\n\r\n\tonTween(event) {\r\n\t\t// console.log('onTween', event);\r\n\t}\r\n\r\n\tonSelect(index) {\r\n\t\tthis.sliderIndex = index;\r\n\t\tthis.mode = 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nGalleryModalComponent.meta = {\r\n\tselector: '[gallery-modal]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { BASE_HREF, STATIC } from '../environment';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst GALLERY_MODAL = STATIC ? BASE_HREF + 'gallery-modal.html' : 'template/gallery-modal.cshtml';\r\n\r\nexport default class GalleryComponent extends Component {\r\n\r\n\tget galleryItems() {\r\n\t\tif (typeof this.gallery === 'string') {\r\n\t\t\treturn [this.gallery];\r\n\t\t} else if (Array.isArray(this.gallery)) {\r\n\t\t\treturn this.gallery;\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tget firstGalleryItem() {\r\n\t\tconst items = this.galleryItems;\r\n\t\tif (items.length) {\r\n\t\t\treturn items[0];\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.galleryItems.forEach(item => {\r\n\t\t\tif (GalleryComponent.items.indexOf(item) === -1) {\r\n\t\t\t\tGalleryComponent.items.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => this.onOpenGallery(event));\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst {node} = getContext(this);\r\n\t\treturn fromEvent(node, 'click');\r\n\t}\r\n\r\n\tonOpenGallery(event) {\r\n\t\tconst items = GalleryComponent.items;\r\n\t\tconst index = items.indexOf(this.firstGalleryItem);\r\n\t\t// console.log('GalleryComponent.onOpenGallery', this.gallery, items, index);\r\n\t\tModalService.open$({ src: GALLERY_MODAL, data: { items, index } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// this.pushChanges();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nGalleryComponent.items = [];\r\n\r\nGalleryComponent.meta = {\r\n\tselector: '[gallery]',\r\n\tinputs: ['gallery']\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\n// import UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.searchActive = false;\r\n\t\tthis.mainActive = false;\r\n\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tsearch: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\tconsole.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t}\r\n\r\n\tonSearch() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst form = node.querySelector('form');\r\n\t\tconst action = form.getAttribute('action');\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\twindow.location.href = `${action}?search=${this.form.value.search}`;\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonMainToggle() {\r\n\t\tthis.searchActive = false;\r\n\t\tthis.mainActive = !this.mainActive;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.nav--primary-menu > li'));\r\n\t\tgsap.to(items, {\r\n\t\t\topacity: this.mainActive ? 1 : 0,\r\n\t\t\tduration: 0.35,\r\n\t\t\tstagger: {\r\n\t\t\t\teach: 0.05,\r\n\t\t\t\tease: Power3.easeOut\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSearchToggle() {\r\n\t\tthis.mainActive = false;\r\n\t\tthis.searchActive = !this.searchActive;\r\n\t\tconst { node } = getContext(this);\r\n\t\t/*\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.nav--primary-menu > li'));\r\n\t\tgsap.to(items, {\r\n\t\t\topacity: this.searchActive ? 1 : 0,\r\n\t\t\tduration: 0.35,\r\n\t\t\tstagger: {\r\n\t\t\t\teach: 0.05,\r\n\t\t\t\tease: Power3.easeOut\r\n\t\t\t}\r\n\t\t});\r\n\t\t*/\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonOpenSub(subId) {\r\n\t\tthis.subId = subId;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonCloseSub(subId) {\r\n\t\tif (this.subId === subId) {\r\n\t\t\tthis.subId = null;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tisSubOpen(subId) {\r\n\t\treturn this.subId === subId;\r\n\t}\r\n\r\n\tisPrimaryHidden() {\r\n\t\treturn this.subId != null;\r\n\t}\r\n\r\n\tonShowSub(subId) {\r\n\t\tthis.showPictureOrDefault();\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\tthis.subId = subId || null;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tshowPicture(src) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst picture = node.querySelector('.main-menu__picture');\r\n\t\tlet img;\r\n\t\tif (src) {\r\n\t\t\timg = document.createElement('img');\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tpicture.appendChild(img);\r\n\t\t\t\tgsap.set(img, { opacity: 0 });\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 1,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 1) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\timg.src = src;\r\n\t\t} else {\r\n\t\t\timg = picture.querySelector('img');\r\n\t\t\tif (img) {\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 0,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 0) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tshowPictureOrDefault(src) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst picture = node.querySelector('.main-menu__picture');\r\n\t\tlet img = picture.querySelector('img');\r\n\t\tconst defaultSrc = this.defaultSrc = (this.defaultSrc || img.getAttribute('src'));\r\n\t\tsrc = src || defaultSrc;\r\n\t\tif (!img || img.getAttribute('src') !== src) {\r\n\t\t\timg = document.createElement('img');\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tpicture.appendChild(img);\r\n\t\t\t\tgsap.set(img, { opacity: 0 });\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 1,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 1) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\timg.src = src;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header'\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tget empty() {\r\n\t\treturn this.values.length === 0;\r\n\t}\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thasAny() {\r\n\t\treturn this.values.length > 0;\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.clear', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n}\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\tthis.updateFilterStates(filters, items, true);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items, initialCount) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = initialCount ? items : this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\tinitialCount ? option.initialCount = count : option.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t\tif (initialCount) {\r\n\t\t\t\tfilter.options.sort((a, b) => b.initialCount - a.initialCount);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class MagazineService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/magazine/all').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn from([window.all]);\r\n\t\t\t//return ApiService.staticGet$('/magazine/all').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/magazine/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn from([window.filters]);\r\n\t\t\t//return ApiService.staticGet$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport MagazineService from './magazine.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class MagazineComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.busy = false;\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'category':\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (!this.busy && this.items.length > this.visibleItems.length) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tMagazineService.all$(),\r\n\t\t\tMagazineService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nMagazineComponent.meta = {\r\n\tselector: '[magazine]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { from } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class PortfolioService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn from([window.all]);\r\n\t\t\t//return ApiService.staticGet$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/portfolio/stand/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn from([window.filters]);\r\n\t\t\t//return ApiService.staticGet$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/portfolio/stand/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil, tap } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport PortfolioService from './portfolio.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class PortfolioComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.firstItem = null;\r\n\t\tthis.visibleItems = null;\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tconsole.log(data);\r\n\t\t\tthis.busy = false;\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'area':\r\n\t\t\t\tcase 'city':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\tmap(items => this.sortPatternItems(items)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tsortPatternItems(items) {\r\n\t\tconst copy = items.slice();\r\n\t\tconst firstItem = this.firstItem = copy.find(x => x.important);\r\n\t\tif (firstItem) {\r\n\t\t\tcopy.splice(copy.indexOf(firstItem), 1);\r\n\t\t}\r\n\t\tconst order = [false, false, true, false, false, false, false, true];\r\n\t\tconst sorted = [];\r\n\t\tlet\ti = 0;\r\n\t\twhile (copy.length) {\r\n\t\t\tconst important = order[i % order.length];\r\n\t\t\tconst item = copy.find(x => x.important === important);\r\n\t\t\tif (item) {\r\n\t\t\t\tcopy.splice(copy.indexOf(item), 1);\r\n\t\t\t\tsorted.push(item);\r\n\t\t\t} else {\r\n\t\t\t\tsorted.push(copy.shift());\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn sorted;\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (!this.busy && this.items.length > this.visibleItems.length) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tPortfolioService.all$(),\r\n\t\t\tPortfolioService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nPortfolioComponent.meta = {\r\n\tselector: '[portfolio]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","import { from } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class SearchService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/search/all').pipe(map(response => response.data));\r\n\t\t} else {\t\t\t\r\n\t\t\t return from([window.all]);\r\n\t\t\t//return ApiService.staticGet$('/search/all').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/search/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/search/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn from([window.filters]);\r\n\t\t\t//return ApiService.staticGet$('/search/filters').pipe(map(response => response.data));\r\n\t\t\t// return ApiService.get$('/search/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { delay, first, takeUntil, tap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport LocationService from '../location/location.service';\r\nimport SearchService from './search.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class SearchComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tsearch: new FormControl(LocationService.get('search'), Validators.RequiredValidator()),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.onSearch();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tSearchService.all$(),\r\n\t\t\tSearchService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\tonSearch() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.busy = true;\r\n\t\t\tthis.items = [];\r\n\t\t\tthis.filters = {};\r\n\t\t\tthis.pushChanges();\r\n\t\t\tthis.load$(this.form.value.search).pipe(\r\n\t\t\t\tdelay(STATIC ? 1000 : 1),\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(data => {\r\n\t\t\t\tthis.busy = false;\r\n\t\t\t\tthis.items = data[0];\r\n\t\t\t\tthis.filters = data[1];\r\n\t\t\t\tthis.onSearchResults();\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocationService.set('search', this.form.value.search);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSearchResults() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'category':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.category.id === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (!this.busy && this.items.length > this.visibleItems.length) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nSearchComponent.meta = {\r\n\tselector: '[search]',\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/stipa/auth-modal.html' : '/stipa/auth-modal.html';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = node.getAttribute('href');\r\n\t\tHttpService.get$(href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t\tmap(response => response.data),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log('SecureDirective.tryDownloadHref', error);\r\n\t\t\tthis.onLogin();\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tconsole.log('SecureDirective.onLogin');\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class ShareComponent extends Component {\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.getUrl()}&media=&description=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.getUrl()}&title=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.getTitle()}%20${this.getUrl()}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.getTitle()}&body=${this.getUrl()}`;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconsole.log('ShareComponent.onInit', this.share, this.title);\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.title);\r\n\t}\r\n\r\n\tgetTitle() {\r\n\t\tlet title = this.title ? this.title : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tgetUrl() {\r\n\t\tlet url = this.share;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareComponent.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'title'],\r\n\ttemplate: /* html */`\r\n\t<ul class=\"nav--share\">\r\n\t\t<li>\r\n\t\t\t<a [href]=\"twitterUrl\" target=\"_blank\"><svg class=\"twitter\"><use xlink:href=\"#twitter\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"facebookUrl\" target=\"_blank\"><svg class=\"facebook\"><use xlink:href=\"#facebook\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"pinterestUrl\" target=\"_blank\"><svg class=\"pinterest\"><use xlink:href=\"#pinterest\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"mailToUrl\"><svg class=\"email\"><use xlink:href=\"#email\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<!--\r\n\t\t<li>\r\n\t\t\t<a [href]=\"whatsappUrl\" target=\"_blank\"><svg class=\"whatsapp\"><use xlink:href=\"#whatsapp\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"linkedInUrl\" target=\"_blank\"><svg class=\"linkedin\"><use xlink:href=\"#linkedin\"></use></svg></a>\r\n\t\t</li>\r\n\t\t-->\r\n\t</ul>\r\n\t`,\r\n};\r\n","import { fromEvent, merge, ReplaySubject, Subject } from 'rxjs';\r\nimport { filter, map, startWith, switchMap, takeUntil } from 'rxjs/operators';\r\n\r\nexport class DragPoint {\r\n\tconstructor() {\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t}\r\n}\r\n\r\nexport class DragEvent {\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class DragDownEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragMoveEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragUpEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t}\r\n}\r\n\r\nexport default class DragService {\r\n\r\n\tstatic getPosition(event, point) {\r\n\t\tif (event instanceof MouseEvent) {\r\n\t\t\tpoint ? (\r\n\t\t\t\tpoint.x = event.clientX,\r\n\t\t\t\tpoint.y = event.clientY\r\n\t\t\t) : point = {\r\n\t\t\t\tx: event.clientX,\r\n\t\t\t\ty: event.clientY\r\n\t\t\t};\r\n\t\t} else if (event instanceof TouchEvent) {\r\n\t\t\tif (event.touches.length > 0) {\r\n\t\t\t\tpoint ? (\r\n\t\t\t\t\tpoint.x = event.touches[0].pageX,\r\n\t\t\t\t\tpoint.y = event.touches[0].pageY\r\n\t\t\t\t) : point = {\r\n\t\t\t\t\tx: event.touches[0].pageX,\r\n\t\t\t\t\ty: event.touches[0].pageY\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn point;\r\n\t}\r\n\r\n\tstatic down$(target, events$) {\r\n\t\tlet downEvent;\r\n\t\treturn merge(\r\n\t\t\tfromEvent(target, 'mousedown'),\r\n\t\t\tfromEvent(target, 'touchstart')\r\n\t\t).pipe(\r\n\t\t\tmap((event) => {\r\n\t\t\t\tdownEvent = downEvent || new DragDownEvent();\r\n\t\t\t\tdownEvent.node = target;\r\n\t\t\t\tdownEvent.target = event.target;\r\n\t\t\t\tdownEvent.originalEvent = event;\r\n\t\t\t\tdownEvent.down = this.getPosition(event, downEvent.down);\r\n\t\t\t\tif (downEvent.down) {\r\n\t\t\t\t\tdownEvent.distance = new DragPoint();\r\n\t\t\t\t\tdownEvent.strength = new DragPoint();\r\n\t\t\t\t\tdownEvent.speed = new DragPoint();\r\n\t\t\t\t\tevents$.next(downEvent);\r\n\t\t\t\t\treturn downEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tfilter(event => event !== undefined),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic move$(target, events$, dismiss$, downEvent) {\r\n\t\tlet moveEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mousemove' : 'touchmove').pipe(\r\n\t\t\tstartWith(downEvent),\r\n\t\t\tmap((event) => {\r\n\t\t\t\tmoveEvent = moveEvent || new DragMoveEvent();\r\n\t\t\t\tmoveEvent.node = target;\r\n\t\t\t\tmoveEvent.target = event.target;\r\n\t\t\t\tmoveEvent.originalEvent = event;\r\n\t\t\t\tmoveEvent.position = this.getPosition(event, moveEvent.position);\r\n\t\t\t\tconst dragging = downEvent.down !== undefined && moveEvent.position !== undefined;\r\n\t\t\t\tif (dragging) {\r\n\t\t\t\t\tmoveEvent.distance.x = moveEvent.position.x - downEvent.down.x;\r\n\t\t\t\t\tmoveEvent.distance.y = moveEvent.position.y - downEvent.down.y;\r\n\t\t\t\t\tmoveEvent.strength.x = moveEvent.distance.x / window.innerWidth * 2;\r\n\t\t\t\t\tmoveEvent.strength.y = moveEvent.distance.y / window.innerHeight * 2;\r\n\t\t\t\t\tmoveEvent.speed.x = downEvent.speed.x + (moveEvent.strength.x - downEvent.strength.x) * 0.1;\r\n\t\t\t\t\tmoveEvent.speed.y = downEvent.speed.y + (moveEvent.strength.y - downEvent.strength.y) * 0.1;\r\n\t\t\t\t\tdownEvent.distance.x = moveEvent.distance.x;\r\n\t\t\t\t\tdownEvent.distance.y = moveEvent.distance.y;\r\n\t\t\t\t\tdownEvent.speed.x = moveEvent.speed.x;\r\n\t\t\t\t\tdownEvent.speed.y = moveEvent.speed.y;\r\n\t\t\t\t\tdownEvent.strength.x = moveEvent.strength.x;\r\n\t\t\t\t\tdownEvent.strength.y = moveEvent.strength.y;\r\n\t\t\t\t\tevents$.next(moveEvent);\r\n\t\t\t\t\treturn moveEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic up$(target, events$, dismiss$, downEvent) {\r\n\t\tlet upEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mouseup' : 'touchend').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tupEvent = upEvent || new DragUpEvent();\r\n\t\t\t\tevents$.next(upEvent);\r\n\t\t\t\tdismiss$.next();\r\n\t\t\t\t// console.log(downEvent.distance);\r\n\t\t\t\tif (Math.abs(downEvent.distance.x) > 10) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t}\r\n\t\t\t\treturn upEvent;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic events$(target) {\r\n\t\ttarget = target || document;\r\n\t\tconst events$ = new ReplaySubject(1);\r\n\t\tconst dismiss$ = new Subject();\r\n\t\treturn this.down$(target, events$).pipe(\r\n\t\t\tswitchMap((downEvent) => merge(\r\n\t\t\t\tthis.move$(target, events$, dismiss$, downEvent),\r\n\t\t\t\tthis.up$(target, events$, dismiss$, downEvent),\r\n\t\t\t).pipe(\r\n\t\t\t\ttakeUntil(dismiss$),\r\n\t\t\t)),\r\n\t\t\tswitchMap(() => events$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { fromEvent, merge } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport DragService, { DragDownEvent, DragMoveEvent, DragUpEvent } from '../drag/drag.service';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport const SliderAutoplayMode = {\r\n\tNone: 0,\r\n\tAutoplay: 1,\r\n\tFocusAutoplay: 2,\r\n};\r\n\r\nexport default class SliderComponent extends Component {\r\n\r\n\tget current() { return this.getCurrent(); }\r\n\tset current(current) { this.setCurrent(current); }\r\n\r\n\tgetCurrent() {\r\n\t\tif (!this.state) {\r\n\t\t\tthis.state = { current: 0 };\r\n\t\t}\r\n\t\t// console.log('SliderComponent.get.current', this.state.current);\r\n\t\treturn this.state.current;\r\n\t}\r\n\tsetCurrent(current = 0) {\r\n\t\t// console.log('SliderComponent.setCurrent', current);\r\n\t\tif (!this.state) {\r\n\t\t\tthis.state = { current: 0 };\r\n\t\t}\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tget active() {\r\n\t\treturn this.active_;\r\n\t}\r\n\tset active(active) {\r\n\t\tif (this.active_ !== active) {\r\n\t\t\tthis.active_ = active;\r\n\t\t\tactive ? this.onActivate() : this.onDeactivate();\r\n\t\t}\r\n\t}\r\n\tonActivate() {\r\n\t\t// console.log('SliderComponent.onActivate');\r\n\t\tthis.checkAutoplay();\r\n\t}\r\n\tonDeactivate() {\r\n\t\t// console.log('SliderComponent.onDeactivate');\r\n\t\tthis.userGesture = false;\r\n\t\tthis.disableAutoplay();\r\n\t}\r\n\r\n\tget mobile() {\r\n\t\treturn this.mobile_;\r\n\t}\r\n\tset mobile(mobile) {\r\n\t\tif (this.mobile_ !== mobile) {\r\n\t\t\tthis.mobile_ = mobile;\r\n\t\t\tthis.checkFocusAutoplay();\r\n\t\t}\r\n\t}\r\n\tget over() {\r\n\t\treturn this.over_;\r\n\t}\r\n\tset over(over) {\r\n\t\tif (this.over_ !== over) {\r\n\t\t\tthis.over_ = over;\r\n\t\t\tthis.checkFocusAutoplay();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.container = node;\r\n\t\tthis.wrapper = node.querySelector('.slider__wrapper');\r\n\t\tlet items;\r\n\t\tif (node.hasAttribute('[items]')) {\r\n\t\t\titems = this.items || [];\r\n\t\t} else {\r\n\t\t\titems = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\t}\r\n\t\tthis.items = items;\r\n\t\t// console.log('SliderComponent.onInit', this.items);\r\n\t\tthis.userGesture = false;\r\n\t\t// this.userGesture$ = new Subject();\r\n\t\tsetTimeout(() => {\r\n\t\t\t// this.change.next(this.current);\r\n\t\t\t/*\r\n\t\t\tgsap.set(this.wrapper, {\r\n\t\t\t\tx: -100 * this.current + '%',\r\n\t\t\t});\r\n\t\t\t*/\r\n\t\t\tthis.slider$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('dragService', event);\r\n\t\t\t});\r\n\t\t}, 1);\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.intersect$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe();\r\n\t\tif (typeof this.focusAutoplay === 'number') {\r\n\t\t\tmerge(this.resize$(), this.over$(node), this.leave$(node)).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe();\r\n\t\t}\r\n\t\t/*\r\n\t\tthis.autoplay$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(() => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\t*/\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tthis.setActiveState();\r\n\t\t\t\tthis.checkAutoplay();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tintersect$(node) {\r\n\t\treturn IntersectionService.intersection$(node).pipe(\r\n\t\t\ttap(entry => this.active = entry.isIntersecting),\r\n\t\t);\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\ttap(() => this.mobile = window.innerWidth < 768),\r\n\t\t);\r\n\t}\r\n\r\n\tover$(node) {\r\n\t\treturn fromEvent(node, 'mouseover').pipe(\r\n\t\t\ttap(() => this.over = true),\r\n\t\t);\r\n\t}\r\n\r\n\tleave$(node) {\r\n\t\treturn fromEvent(node, 'mouseleave').pipe(\r\n\t\t\ttap(() => this.over = false),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => {\r\n\t\t\tif (i === current) {\r\n\t\t\t\tslide.classList.add('active');\r\n\t\t\t} else {\r\n\t\t\t\tslide.classList.remove('active');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcheckAutoplay() {\r\n\t\tthis.disableAutoplay();\r\n\t\tlet mode = SliderAutoplayMode.None;\r\n\t\tlet autoplay = 0;\r\n\t\tif (typeof this.autoplay === 'number') {\r\n\t\t\tautoplay = this.autoplay;\r\n\t\t\tmode = SliderAutoplayMode.Autoplay;\r\n\t\t}\r\n\t\tif (typeof this.focusAutoplay === 'number') {\r\n\t\t\tautoplay = this.focusAutoplay;\r\n\t\t\tmode = SliderAutoplayMode.FocusAutoplay;\r\n\t\t}\r\n\t\tif (mode === SliderAutoplayMode.None) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tconst currentSlide = slides[current];\r\n\t\t// console.log('SliderComponent.checkAutoplay', mode, this.active_, autoplay, currentSlide, node);\r\n\t\tif (currentSlide) {\r\n\t\t\tconst video = currentSlide.querySelector('video');\r\n\t\t\tif (video) {\r\n\t\t\t\tconst onEnded = () => {\r\n\t\t\t\t\tvideo.removeEventListener('ended', onEnded);\r\n\t\t\t\t\tif ((mode === SliderAutoplayMode.Autoplay && this.active_) ||\r\n\t\t\t\t\t\t(mode === SliderAutoplayMode.FocusAutoplay && ((this.mobile_ && this.active_) || (!this.mobile_ && this.over_)))) {\r\n\t\t\t\t\t\t// if (autoplay && !this.userGesture) {\r\n\t\t\t\t\t\tthis.setCurrent((current + 1) % this.items.length);\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tvideo.addEventListener('ended', onEnded);\r\n\t\t\t\tvideo.play();\r\n\t\t\t} else {\r\n\t\t\t\tif ((mode === SliderAutoplayMode.Autoplay && this.active_ && !this.userGesture) ||\r\n\t\t\t\t\t(mode === SliderAutoplayMode.FocusAutoplay && ((this.mobile_ && this.active_) || (!this.mobile_ && this.over_)))) {\r\n\t\t\t\t\tthis.to = setTimeout(() => {\r\n\t\t\t\t\t\tthis.setCurrent((current + 1) % this.items.length);\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}, autoplay);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdisableAutoplay() {\r\n\t\tif (this.to) {\r\n\t\t\tclearTimeout(this.to);\r\n\t\t\tthis.to = null;\r\n\t\t}\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst videos = Array.prototype.slice.call(node.querySelectorAll('video'));\r\n\t\tvideos.forEach(video => {\r\n\t\t\tif (!video.paused) {\r\n\t\t\t\tvideo.pause();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// console.log('SliderComponent.disableAutoplay', node);\r\n\t}\r\n\r\n\tcheckFocusAutoplay() {\r\n\t\tif (this.mobile_) {\r\n\t\t\tif (this.active_) {\r\n\t\t\t\tthis.checkAutoplay();\r\n\t\t\t} else {\r\n\t\t\t\tthis.disableAutoplay();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.over_) {\r\n\t\t\t\t// this.checkAutoplay();\r\n\t\t\t\t// fire immediately !!!\r\n\t\t\t\tthis.setCurrent((this.current + 1) % this.items.length);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t} else {\r\n\t\t\t\tthis.disableAutoplay();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslider$() {\r\n\t\tlet translation, dragDownEvent, dragMoveEvent;\r\n\t\treturn DragService.events$(this.wrapper).pipe(\r\n\t\t\ttap((event) => {\r\n\t\t\t\tif (event instanceof DragDownEvent) {\r\n\t\t\t\t\ttranslation = this.getTranslation(this.wrapper, this.container);\r\n\t\t\t\t\tdragDownEvent = event;\r\n\t\t\t\t} else if (event instanceof DragMoveEvent) {\r\n\t\t\t\t\tdragMoveEvent = this.onDragMoveEvent(dragDownEvent, event, translation);\r\n\t\t\t\t\t// console.log('DragMoveEvent');\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tif (Math.abs(dragMoveEvent.distance.x) > Math.abs(dragMoveEvent.distance.y)) {\r\n\t\t\t\t\t\tdragMoveEvent.originalEvent.preventDefault();\r\n\t\t\t\t\t\tdragMoveEvent.originalEvent.stopImmediatePropagation();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t} else if (event instanceof DragUpEvent) {\r\n\t\t\t\t\tif (dragMoveEvent) {\r\n\t\t\t\t\t\tthis.container.classList.remove('dragging');\r\n\t\t\t\t\t\tthis.wrapper.style.transform = null;\r\n\t\t\t\t\t\tthis.onDragUpEvent(dragDownEvent, dragMoveEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log('DragUpEvent');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tautoplay$() {\r\n\t\tif (this.autoplay) {\r\n\t\t\tconst autoplay = typeof this.autoplay === 'number' ? this.autoplay : 4000;\r\n\t\t\treturn interval(autoplay).pipe(\r\n\t\t\t\ttakeUntil(this.userGesture$),\r\n\t\t\t\ttap(() => {\r\n\t\t\t\t\tthis.setCurrent((this.current + 1) % this.items.length);\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tonDragMoveEvent(dragDownEvent, dragMoveEvent, translation) {\r\n\t\tthis.container.classList.add('dragging');\r\n\t\tconst transformX = translation.x + dragMoveEvent.distance.x;\r\n\t\tthis.wrapper.style.transform = `translate3d(${transformX}px, ${0}px, ${0}px)`;\r\n\t\treturn dragMoveEvent;\r\n\t}\r\n\r\n\tonDragUpEvent(dragDownEvent, dragMoveEvent) {\r\n\t\tconst width = this.container.offsetWidth;\r\n\t\tif (dragMoveEvent.distance.x * -1 > width * 0.25 && this.hasNext()) {\r\n\t\t\tthis.navTo(this.current + 1);\r\n\t\t} else if (dragMoveEvent.distance.x * -1 < width * -0.25 && this.hasPrev()) {\r\n\t\t\tthis.navTo(this.current - 1);\r\n\t\t} else {\r\n\t\t\tthis.wrapper.style.transform = `translate3d(${-100 * this.current}%, 0, 0)`;\r\n\t\t}\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tcurrent = (current > 0 ? current : this.items.length + current) % this.items.length;\r\n\t\tthis.setCurrent(current);\r\n\t\tthis.userGesture = true;\r\n\t\t// this.userGesture$.next();\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\treturn this.current - 1 >= 0;\r\n\t}\r\n\r\n\thasNext() {\r\n\t\treturn this.current + 1 < this.items.length;\r\n\t}\r\n\r\n\tgetTranslation(node, container) {\r\n\t\tlet x = 0,\r\n\t\t\ty = 0,\r\n\t\t\tz = 0;\r\n\t\tconst transform = node.style.transform;\r\n\t\tif (transform) {\r\n\t\t\tconst coords = transform.split('(')[1].split(')')[0].split(',');\r\n\t\t\tx = parseFloat(coords[0]);\r\n\t\t\ty = parseFloat(coords[1]);\r\n\t\t\tz = parseFloat(coords[2]);\r\n\t\t\tx = coords[0].indexOf('%') !== -1 ? x *= container.offsetWidth * 0.01 : x;\r\n\t\t\ty = coords[1].indexOf('%') !== -1 ? y *= container.offsetHeight * 0.01 : y;\r\n\t\t}\r\n\t\treturn { x, y, z };\r\n\t}\r\n}\r\n\r\nSliderComponent.meta = {\r\n\tselector: '[slider]',\r\n\tinputs: ['items', 'current', 'autoplay', 'focusAutoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderCaseStudyComponent extends SliderComponent {\r\n\r\n\tget current() { return super.getCurrent(); }\r\n\tset current(current) { this.setCurrent(current); }\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -this.slideWidth * this.current + 'px, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': this.slideWidth * this.items.length + 'px' };\r\n\t}\r\n\r\n\tget slideWidth() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// const slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tconst slideWidth = (window.innerWidth < 768 ? node.offsetWidth: (node.offsetWidth / 12 * 10)) + 40;\r\n\t\treturn slideWidth;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.resize$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => this.pushChanges());\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize');\r\n\t}\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n}\r\n\r\nSliderCaseStudyComponent.meta = {\r\n\tselector: '[slider-case-study]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import SliderComponent from './slider.component';\r\n\r\nexport default class SliderGalleryComponent extends SliderComponent {\r\n\r\n\tget current() { return super.getCurrent(); }\r\n\tset current(current) { this.setCurrent(current); }\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n\r\n\tdoClose() {\r\n\t\tthis.close.next();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode.next();\r\n\t}\r\n}\r\n\r\nSliderGalleryComponent.meta = {\r\n\tselector: '[slider-gallery]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween', 'close', 'mode'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { animationFrameScheduler, combineLatest, fromEvent, interval } from 'rxjs';\r\nimport { map, takeUntil, tap } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderHeroComponent extends SliderComponent {\r\n\r\n\tget current() { return super.getCurrent(); }\r\n\tset current(current) { this.setCurrent(current); }\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.pagination$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tthis.direction_ = direction;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\t\tif (direction == 1) {\r\n\t\t\t\tpagination.classList.remove('prev');\r\n\t\t\t\tpagination.classList.add('next');\r\n\t\t\t} else {\r\n\t\t\t\tpagination.classList.remove('next');\r\n\t\t\t\tpagination.classList.add('prev');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\traf$() {\r\n\t\treturn interval(0, animationFrameScheduler);\r\n\t}\r\n\r\n\tmouse$() {\r\n\t\tconst event = { x:0, y: 0};\r\n\t\treturn fromEvent(window, 'mousemove').pipe(\r\n\t\t\tmap(mouseEvent => {\r\n\t\t\t\tevent.x = mouseEvent.clientX;\r\n\t\t\t\tevent.y = mouseEvent.clientY;\r\n\t\t\t\treturn event;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tpagination$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst position = { x:0, y: 0};\r\n\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\treturn combineLatest([this.mouse$(), this.raf$()]).pipe(\r\n\t\t\ttap(datas => {\r\n\t\t\t\tconst mouse = datas[0];\r\n\t\t\t\tposition.x += (mouse.x - position.x) / 20;\r\n\t\t\t\tposition.y += (mouse.y - position.y) / 20;\r\n\t\t\t\t// const rect = node.getBoundingClientRect();\r\n\t\t\t\tthis.direction = mouse.x > window.innerWidth / 2 ? 1 : -1;\r\n\t\t\t\tpagination.style.transform = `translateX(${position.x}px) translateY(${position.y}px)`;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tif (event.clientX > window.innerWidth / 2) {\r\n\t\t\t\t\t// if (this.hasNext()) {\r\n\t\t\t\t\t\tthis.navTo(this.current + 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if (this.hasPrev()) {\r\n\t\t\t\t\t\tthis.navTo(this.current - 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n}\r\n\r\nSliderHeroComponent.meta = {\r\n\tselector: '[slider-hero]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\nimport { getSlug } from \"../environment\";\r\n\r\nexport default class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\treturn getSlug(value);\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Context } from 'rxcomp';\r\n\r\nexport default class VirtualItem extends Context {\r\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\r\n\t\tsuper(parentInstance);\r\n\t\tthis[key] = $key;\r\n\t\tthis[value] = $value;\r\n\t\tthis.index = index;\r\n\t\tthis.count = count;\r\n\t}\r\n\r\n\tget first() {\r\n\t\treturn this.index === 0;\r\n\t}\r\n\r\n\tget last() {\r\n\t\treturn this.index === this.count - 1;\r\n\t}\r\n\r\n\tget even() {\r\n\t\treturn this.index % 2 === 0;\r\n\t}\r\n\r\n\tget odd() {\r\n\t\treturn !this.even;\r\n\t}\r\n}\r\n","import { getContext, Structure } from 'rxcomp';\r\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\r\nimport { auditTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\r\nimport VirtualItem from './virtual.item';\r\n\r\nexport const VirtualMode = {\r\n\tResponsive: 1,\r\n\tGrid: 2,\r\n\tCentered: 3,\r\n\tList: 4\r\n};\r\n\r\nexport default class VirtualStructure extends Structure {\r\n\r\n\tonInit() {\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst template = node.firstElementChild;\r\n\t\tconst expression = node.getAttribute('*virtual');\r\n\t\tnode.removeAttribute('*virtual');\r\n\t\tnode.removeChild(template);\r\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\r\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\r\n\t\tthis.container = node;\r\n\t\tthis.template = template;\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options = {\r\n\t\t\ttop: 0,\r\n\t\t\twidth: this.width,\r\n\t\t\tgutter: this.gutter,\r\n\t\t\tcontainerWidth: 0,\r\n\t\t\tcontainerHeight: 0,\r\n\t\t\tcols: [0],\r\n\t\t\tstrategy: 1\r\n\t\t};\r\n\t\tthis.cachedRects = {};\r\n\t\tthis.cachedInstances = [];\r\n\t\tthis.cacheNodes = [];\r\n\t\tthis.items$ = new BehaviorSubject([]);\r\n\t\tthis.update$()\r\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\r\n\t\t\t.subscribe(visibleItems => {\r\n\t\t\t\t// console.log(visibleItems.length);\r\n\t\t\t});\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\t// resolve\r\n\t\tconst items = module.resolve(this.virtualFunction, context.parentInstance, this) || [];\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options.width = this.width;\r\n\t\tthis.updateView(true);\r\n\t\tthis.items$.next(items);\r\n\t}\r\n\r\n\tupdate$() {\r\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\r\n\t\t\tmap(datas => {\r\n\t\t\t\tconst options = this.options;\r\n\t\t\t\tconst items = this.items$.getValue();\r\n\t\t\t\tconst total = items.length;\r\n\t\t\t\tthis.container.position = 'relative';\r\n\t\t\t\tlet highestHeight = 0;\r\n\t\t\t\tconst width = this.getWidth();\r\n\t\t\t\tconst gutter = this.getGutter(width);\r\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\r\n\t\t\t\t\tlet col, height, top, left, bottom;\r\n\t\t\t\t\tlet rect = this.cachedRects[i];\r\n\t\t\t\t\tif (rect) {\r\n\t\t\t\t\t\tcol = rect.col;\r\n\t\t\t\t\t\theight = rect.height;\r\n\t\t\t\t\t\tleft = rect.left;\r\n\t\t\t\t\t\t// top = rect.top;\r\n\t\t\t\t\t\t// bottom = rect.bottom;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcol = this.getCol();\r\n\t\t\t\t\t\theight = this.getHeight(width, item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttop = options.cols[col];\r\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\r\n\t\t\t\t\t\tnode.style.position = 'absolute';\r\n\t\t\t\t\t\tnode.style.top = top + 'px';\r\n\t\t\t\t\t\tnode.style.left = left + 'px';\r\n\t\t\t\t\t\tnode.style.width = width + 'px';\r\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\r\n\t\t\t\t\t\t\theight = node.offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trect.height = height;\r\n\t\t\t\t\t\t\trect.bottom = bottom;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.removeNode(i);\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet removeIndex = items.length;\r\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\r\n\t\t\t\t\tthis.removeNode(removeIndex);\r\n\t\t\t\t\tremoveIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tthis.cacheNodes.length = items.length;\r\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\r\n\t\t\t\treturn visibleItems;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tgetCols() {\r\n\t\tconst options = this.options;\r\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\r\n\t\treturn new Array(cols).fill(0);\r\n\t}\r\n\r\n\tgetCol() {\r\n\t\tconst options = this.options;\r\n\t\tlet col;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\r\n\t\t\t\t\treturn c < a[p] ? i : p;\r\n\t\t\t\t}, 0);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tcol = 0;\r\n\t\t}\r\n\t\treturn col;\r\n\t}\r\n\r\n\tgetWidth() {\r\n\t\tconst options = this.options;\r\n\t\tlet width;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\twidth = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\twidth = options.containerWidth;\r\n\t\t}\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(width, item) {\r\n\t\tconst options = this.options;\r\n\t\tlet height;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\theight = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\theight = 80;\r\n\t\t}\r\n\t\treturn height;\r\n\t}\r\n\r\n\tgetGutter(width) {\r\n\t\tconst options = this.options;\r\n\t\tlet gutter;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tgutter = options.gutter;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tgutter = 0;\r\n\t\t}\r\n\t\treturn gutter;\r\n\t}\r\n\r\n\tgetLeft(index, width, gutter) {\r\n\t\tconst options = this.options;\r\n\t\tlet left;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tleft = index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tleft = 0;\r\n\t\t}\r\n\t\treturn left;\r\n\t}\r\n\r\n\tcachedNode(index, i, value, total) {\r\n\t\tif (this.cacheNodes[index]) {\r\n\t\t\treturn this.updateNode(index, i, value);\r\n\t\t} else {\r\n\t\t\treturn this.createNode(index, i, value, total);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateNode(index, i, value, total) {\r\n\t\tconst clonedNode = this.template.cloneNode(true);\r\n\t\tdelete clonedNode.rxcompId;\r\n\t\tthis.container.appendChild(clonedNode);\r\n\t\tthis.cacheNodes[index] = clonedNode;\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\tconst tokens = this.tokens;\r\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\r\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\r\n\t\tconst forItemContext = getContext(instance);\r\n\t\tmodule.compile(clonedNode, forItemContext.instance);\r\n\t\tthis.cachedInstances[index] = instance;\r\n\t\treturn clonedNode;\r\n\t}\r\n\r\n\tupdateNode(index, i, value) {\r\n\t\tconst instance = this.cachedInstances[index];\r\n\t\tconst tokens = this.tokens;\r\n\t\tif (instance[tokens.key] !== i) {\r\n\t\t\tinstance[tokens.key] = i;\r\n\t\t\tinstance[tokens.value] = value;\r\n\t\t\tinstance.pushChanges();\r\n\t\t}\r\n\t\t// console.log(index, i, value);\r\n\t\treturn this.cacheNodes[index];\r\n\t}\r\n\r\n\tremoveNode(index) {\r\n\t\tthis.cachedInstances[index] = undefined;\r\n\t\tconst node = this.cacheNodes[index];\r\n\t\tif (node) {\r\n\t\t\tconst context = getContext(this);\r\n\t\t\tconst module = context.module;\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodule.remove(node);\r\n\t\t}\r\n\t\tthis.cacheNodes[index] = undefined;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tintersect(top1, bottom1, top2, bottom2) {\r\n\t\treturn top2 < bottom1 && bottom2 > top1;\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tauditTime(100),\r\n\t\t\tstartWith(null),\r\n\t\t\ttap(() => this.updateView(true))\r\n\t\t);\r\n\t}\r\n\r\n\tscroll$(node) {\r\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\r\n\t}\r\n\r\n\tupdateView(reset) {\r\n\t\tconst rect = this.container.getBoundingClientRect();\r\n\t\tconst options = this.options;\r\n\t\toptions.top = rect.top;\r\n\t\toptions.containerWidth = rect.width;\r\n\t\toptions.containerHeight = window.innerHeight;\r\n\t\toptions.cols = this.getCols();\r\n\t\tif (reset) {\r\n\t\t\tthis.cachedRects = {};\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpressionTokens(expression) {\r\n\t\tif (expression === null) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tconst expressions = expression\r\n\t\t\t.split(';')\r\n\t\t\t.map(x => x.trim())\r\n\t\t\t.filter(x => x !== '');\r\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\r\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\r\n\t\tconst iterable = virtualExpressions[1];\r\n\t\tlet key = 'index';\r\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\r\n\t\tif (keyValueMatches) {\r\n\t\t\tkey = keyValueMatches[1];\r\n\t\t\tvalue = keyValueMatches[2];\r\n\t\t}\r\n\t\tif (expressions.length > 1) {\r\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\r\n\t\t\tif (indexExpressions.length === 3) {\r\n\t\t\t\tkey = indexExpressions[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { key, value, iterable };\r\n\t}\r\n}\r\n\r\nVirtualStructure.meta = {\r\n\tselector: '[*virtual]',\r\n\tinputs: ['mode', 'width', 'gutter']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AccordionItemComponent from './accordion/accordion-item.component';\r\nimport AccordionComponent from './accordion/accordion.component';\r\nimport AppComponent from './app.component';\r\nimport AppearStaggerDirective from './appear/appear-stagger.directive';\r\nimport AppearDirective from './appear/appear.directive';\r\nimport AuthForgotComponent from './auth/auth-forgot.component';\r\nimport AuthModalComponent from './auth/auth-modal.component';\r\nimport AuthSigninComponent from './auth/auth-signin.component';\r\nimport AuthSignupComponent from './auth/auth-signup.component';\r\nimport AuthComponent from './auth/auth.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport ContactsSimpleComponent from './contacts/contacts-simple.component';\r\nimport ContactsComponent from './contacts/contacts.component';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport FilterDropdownComponent from './filter/filter-dropdown.component';\r\nimport ControlCheckboxComponent from './forms/control-checkbox.component';\r\nimport ControlCustomSelectComponent from './forms/control-custom-select.component';\r\nimport ControlPasswordComponent from './forms/control-password.component';\r\nimport ControlTextComponent from './forms/control-text.component';\r\nimport ControlTextareaComponent from './forms/control-textarea.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport TestComponent from './forms/test.component';\r\nimport GalleryModalComponent from './gallery/gallery-modal.component';\r\nimport GalleryComponent from './gallery/gallery.component';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport MagazineComponent from './magazine/magazine.component';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport PortfolioComponent from './portfolio/portfolio.component';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SearchComponent from './search/search.component';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport ShareComponent from './share/share.component';\r\nimport SliderCaseStudyComponent from './slider/slider-case-study.component';\r\nimport SliderGalleryComponent from './slider/slider-gallery.component';\r\nimport SliderHeroComponent from './slider/slider-hero.component';\r\nimport SliderComponent from './slider/slider.component';\r\nimport SlugPipe from './slug/slug.pipe';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\n\r\nexport default class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAccordionComponent,\r\n\t\tAccordionItemComponent,\r\n\t\tAppearDirective,\r\n\t\tAppearStaggerDirective,\r\n\t\tAuthComponent,\r\n\t\tAuthForgotComponent,\r\n\t\tAuthModalComponent,\r\n\t\tAuthSigninComponent,\r\n\t\tAuthSignupComponent,\r\n\t\tClickOutsideDirective,\r\n\t\tContactsComponent,\r\n\t\tContactsSimpleComponent,\r\n\t\tControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlPasswordComponent,\r\n\t\tControlTextComponent,\r\n\t\tControlTextareaComponent,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tFilterDropdownComponent,\r\n\t\tGalleryComponent,\r\n\t\tGalleryModalComponent,\r\n\t\tHeaderComponent,\r\n\t\tHtmlPipe,\r\n\t\tMagazineComponent,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tPortfolioComponent,\r\n\t\tScrollToDirective,\r\n\t\tSearchComponent,\r\n\t\tSecureDirective,\r\n\t\tShareComponent,\r\n\t\tSliderComponent,\r\n\t\tSliderCaseStudyComponent,\r\n\t\tSliderGalleryComponent,\r\n\t\tSliderHeroComponent,\r\n\t\tSlugPipe,\r\n\t\tTestComponent,\r\n\t\tVirtualStructure\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}