{"version":3,"sources":["src/js/main.js","../../src/js/breakpoint/media-matcher.js","../../src/js/breakpoint/breakpoint.service.js","../../src/js/storage/storage.service.js","../../src/js/storage/session-storage.service.js","../../src/js/cover/cover.service.js","../../src/js/app.component.js","../../src/js/intersection/intersection.service.js","../../src/js/appear/appear-stagger.directive.js","../../src/js/appear/appear.directive.js","../../src/js/environment.js","../../src/js/http/http.service.js","../../src/js/storage/cookie-storage.service.js","../../src/js/api/api.service.js","../../src/js/storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/auth/auth-forgot.component.js","../../src/js/modal/modal.service.js","../../src/js/modal/modal-outlet.component.js","../../src/js/auth/auth.component.js","../../src/js/auth/auth-modal.component.js","../../src/js/auth/auth-signin.component.js","../../src/js/auth/auth-signup.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/contacts/contacts.component.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/forms/control.component.js","../../src/js/forms/control-checkbox.component.js","../../src/js/keyboard/keyboard.service.js","../../src/js/forms/control-custom-select.component.js","../../src/js/forms/control-password.component.js","../../src/js/forms/control-text.component.js","../../src/js/forms/control-textarea.component.js","../../src/js/forms/errors.component.js","../../src/js/gallery/gallery-modal.component.js","../../src/js/gallery/gallery.component.js","../../src/js/css/css.service.js","../../src/js/header/header.component.js","../../src/js/html/html.pipe.js","../../src/js/modal/modal.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/share/share.component.js","../../src/js/drag/drag.service.js","../../src/js/slider/slider.component.js","../../src/js/slider/slider-case-study.component.js","../../src/js/slider/slider-gallery.component.js","../../src/js/slider/slider-hero.component.js","../../src/js/slug/slug.pipe.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","__proto__","mediaQueryStyleNode","EDGE","test","navigator","userAgent","TRIDENT","BLINK","window","chrome","CSS","WEBKIT","mediaQueriesForWebkitCompatibility","Set","MediaMatcher","matchMedia","query","createEmptyStyleRule","_matchMedia","has","document","createElement","setAttribute","head","appendChild","sheet","insertRule","add","e","console","error","bind","matches","media","addListener","removeListener","BreakpointService","observe$","_this","queries","assign","queries$_","keys","forEach","group","split","map","trim","push","registerQuery$_","query$","combineLatest","apply","concat","pipe","take","skip","debounceTime","breakpoints","response","b","match","reduce","p","c","undefined","queries_","get","set","mediaQueryList","output","Observable","observer","handler","next","startWith","nextMediaQueryList","splitQueries","a1","a2","StorageService","encode","decoded","Serializer","encodeJson","encodeURIComponent","encodeBase64","decode","encoded","decodeBase64","decodeURIComponent","decodeJson","isSupported","type","storage","flag","WINDOW","x","setItem","removeItem","DOMException","code","name","Boolean","SessionStorageService","_StorageService","arguments","clear","sessionStorage","items$","toArray","delete","exist","getItem","getRaw","setRaw","toRawArray","_this2","supported","ReplaySubject","CoverService","isIndex","indexOf","location","pathname","shouldShowCover","showCover","AppComponent","_Component","_proto","onInit","getContext","node","classList","remove","isMobile","takeUntil","unsubscribe$","subscribe","results","log","pushChanges","onSkipCover","event","onMenuToggle","opened","Component","meta","selector","IntersectionService","observer_","readySubject_","BehaviorSubject","observerSubject_","Subject","IntersectionObserver","entries","intersection$","observe","find","entry","filter","finalize","unobserve","of","isIntersecting","firstIntersection$","first","AppearStaggerDirective","_Directive","onChanges","appeared","src","Directive","AppearDirective","NODE","BASE_HREF","URLSearchParams","search","querySelector","getAttribute","STATIC","port","host","DEVELOPMENT","ENV","NAME","PRODUCTION","RESOURCE","STATIC_RESOURCE","API","STATIC_API","getApiUrl","url","useStatic","Environment","options","replace","substr","protocol","HttpResponse","data","status","statusText","ok","redirected","HttpService","http$","method","format","methods","response_","qstring","encodeURI","join","from","fetch","headers","Accept","Content-Type","body","JSON","stringify","then","json","Promise","resolve","reject","catchError","throwError","getError","get$","delete$","post$","put$","patch$","object","statusCode","statusMessage","CookieStorageService","setter","cookie","days","items","expires","date","Date","setTime","getTime","toUTCString","ApiService","_HttpService","call","staticGet$","staticDelete$","staticPost$","staticPut$","staticPatch$","LocalStorageService","localStorage","User","firstName","toUpperCase","lastName","UserService","getCurrentUser","user$_","getValue","setUser","user","me$","mapUser","static","switchMap","register$","payload","mapStatic__","login$","_this3","logout$","_this4","retrieve$","_this5","isStatic","action","fake","mapUsers","users","AuthForgotComponent","FormGroup","email","FormControl","Validators","RequiredValidator","EmailValidator","checkRequest","antiforgery","checkField","controls","changes$","changes","success","patch","reset","onSubmit","valid","submitted","sent","touched","onLogin","login","onRegister","register","outputs","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","template","getNode","tap","modal$","events$","load$","text","div","innerHTML","firstElementChild","ModalOutletComponent","modalNode","modal_","removeChild","compile","AuthComponent","views","SIGN_IN","SIGN_UP","FORGOTTEN","view","hasAttribute","parseInt","onForgot","onSignIn","href","auth","onSignUp","onForgottenSent","inputs","AuthModalComponent","_AuthComponent","parentInstance","close","AuthSigninComponent","password","signIn","forgot","AuthSignupComponent","roles","countries","company","role","country","newsletter","privacy","formaction","id","dataLayer","form type","ClickOutsideDirective","initialFocus","_getContext","event$","fromEvent","contains","shareReplay","expression","outputFunction","makeFunction","clickOutside$","ContactsComponent","fullName","DROPDOWN_ID","DropdownDirective","trigger","onClick","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","DropdownItemDirective","ControlComponent","flags","control","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keyup$","typing$","to","typing","key$","clearTimeout","setTimeout","regexp","ControlCustomSelectComponent","labels","dropdownId","word","scrollToWord","index","toLowerCase","item","children","scrollTo","offsetTop","setOption","isMultiple","splice","slice","hasOption","onDropped","getLabel","v","select","$event","multiple","ControlPasswordComponent","required","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","GalleryModalComponent","mode","sliderItems","sliderIndex","toggleMode","onChange","onTween","onSelect","GALLERY_MODAL","GalleryComponent","galleryItems","click$","onOpenGallery","firstGalleryItem","gallery","Array","isArray","CssService","height$","style","documentElement","innerHeight","height","vh","setProperty","HeaderComponent","mainActive","onMainToggle","querySelectorAll","gsap","opacity","duration","stagger","each","ease","Power3","easeOut","toggle","onOpenSub","subId","onCloseSub","isSubOpen","isPrimaryHidden","showPicture","img","picture","onload","onComplete","childElementCount","HtmlPipe","_Pipe","transform","m","n","String","fromCharCode","unescapes","rx","RegExp","Pipe","ModalComponent","ScrollToDirective","scrollTo$","_getContext2","result","currentTop","getBoundingClientRect","top","o","pow","html","scroll-behavior","Math","abs","Quad","overwrite","onUpdate","pageYOffset","scrollTop","DownloadService","download","blob","fileName","URL","createObjectURL","a","click","revokeObjectURL","a_","SecureDirective","preventDefault","tryDownloadHref","pop","ShareComponent","share","title","getTitle","getUrl","origin","charCodeAt","toString","DragPoint","y","DragEvent","DragDownEvent","_DragEvent","distance","strength","speed","DragMoveEvent","_DragEvent2","DragUpEvent","_DragEvent3","DragService","getPosition","point","MouseEvent","clientX","clientY","TouchEvent","touches","pageX","pageY","down$","downEvent","merge","originalEvent","down","move$","dismiss$","moveEvent","position","innerWidth","up$","upEvent","stopImmediatePropagation","SliderComponent","container","wrapper","userGesture$","slider$","autoplay$","translation","dragDownEvent","dragMoveEvent","getTranslation","onDragMoveEvent","onDragUpEvent","autoplay","interval","current","transformX","width","offsetWidth","hasNext","navTo","hasPrev","z","coords","parseFloat","offsetHeight","items_","state","change","state_","SliderCaseStudyComponent","_SliderComponent","resize$","changed$","setActiveState","slide","onContentOver","onContentOut","slideWidth","SliderGalleryComponent","doClose","SliderHeroComponent","pagination$","raf$","animationFrameScheduler","mouse$","mouseEvent","pagination","datas","mouse","direction","direction_","SlugPipe","VirtualItem","$key","$value","count","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","gutter","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","update$","visibleItems","context","updateView","scroll$","total","highestHeight","getWidth","getGutter","col","left","bottom","rect","getCol","getHeight","intersect","getLeft","cachedNode","max","removeNode","removeIndex","getCols","floor","fill","updateNode","createNode","clonedNode","cloneNode","rxcompId","args","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","auditTime","Error","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"const EDGE = /(edge)/i.test(navigator.userAgent);\r\nconst TRIDENT = /(msie|trident)/i.test(navigator.userAgent);\r\nconst BLINK = (!!((window).chrome) && typeof CSS !== 'undefined' && !EDGE && !TRIDENT);\r\nconst WEBKIT = /AppleWebKit/i.test(navigator.userAgent) && !BLINK && !EDGE && !TRIDENT;\r\nconst IOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !('MSStream' in window);\r\nconst FIREFOX = /(firefox|minefield)/i.test(navigator.userAgent);\r\nconst ANDROID = /android/i.test(navigator.userAgent) && !TRIDENT;\r\nconst SAFARI = /safari/i.test(navigator.userAgent) && WEBKIT;\r\n\r\nconst mediaQueriesForWebkitCompatibility = new Set();\r\n\r\nlet mediaQueryStyleNode;\r\n\r\nexport class MediaMatcher {\r\n\r\n\tstatic matchMedia(query) {\r\n\t\tif (WEBKIT) {\r\n\t\t\tthis.createEmptyStyleRule(query);\r\n\t\t}\r\n\t\treturn this._matchMedia(query);\r\n\t}\r\n\r\n\tstatic createEmptyStyleRule(query) {\r\n\t\tif (mediaQueriesForWebkitCompatibility.has(query)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tif (!mediaQueryStyleNode) {\r\n\t\t\t\tmediaQueryStyleNode = document.createElement('style');\r\n\t\t\t\tmediaQueryStyleNode.setAttribute('type', 'text/css');\r\n\t\t\t\tif (document.head) {\r\n\t\t\t\t\tdocument.head.appendChild(mediaQueryStyleNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (mediaQueryStyleNode.sheet) {\r\n\t\t\t\t(mediaQueryStyleNode.sheet)\r\n\t\t\t\t.insertRule(`@media ${query} {.fx-query-test{ }}`, 0);\r\n\t\t\t\tmediaQueriesForWebkitCompatibility.add(query);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction noopMatchMedia(query) {\r\n\treturn {\r\n\t\tmatches: query === 'all' || query === '',\r\n\t\tmedia: query,\r\n\t\taddListener: () => {},\r\n\t\tremoveListener: () => {}\r\n\t};\r\n}\r\n\r\nMediaMatcher._matchMedia = window.matchMedia ? window.matchMedia.bind(window) : noopMatchMedia;\r\n","import { combineLatest, concat, Observable } from 'rxjs';\nimport { debounceTime, map, skip, startWith, take } from 'rxjs/operators';\nimport { MediaMatcher } from './media-matcher';\n\nexport class BreakpointState {\n\t// matches;\n\t// breakpoints;\n}\n\nclass InternalBreakpointState {\n\t// matches;\n\t// query;\n}\n\nclass Query {\n\t// query$;\n\t// mediaQueryList;\n}\n\nexport class BreakpointService {\n\n\tstatic queries_ = {};\n\n\tstatic observe$(value) {\n\t\tconst queries = Object.assign({}, value); // this.splitQueries(coerceArray(value));\n\t\tlet queries$_ = [];\n\t\tObject.keys(queries).forEach(key => {\n\t\t\tconst query = queries[key];\n\t\t\tconst group = query.split('and').map(query => query.trim());\n\t\t\tgroup.forEach(query => queries$_.push(this.registerQuery$_(query).query$));\n\t\t\tqueries[key] = { query, group };\n\t\t});\n\t\t// let queries$_ = Object.keys(queries).map(key => this.registerQuery$_(queries[key]).query$);\n\t\tqueries$_ = combineLatest(...queries$_);\n\t\tlet queries$ = concat(\n\t\t\tqueries$_.pipe(take(1)),\n\t\t\tqueries$_.pipe(skip(1), debounceTime(0))\n\t\t);\n\t\treturn queries$.pipe(\n\t\t\tmap((breakpoints) => {\n\t\t\t\tconst response = {};\n\t\t\t\tbreakpoints.forEach(b => {\n\t\t\t\t\tObject.keys(queries).forEach(key => {\n\t\t\t\t\t\tconst query = queries[key];\n\t\t\t\t\t\tconst match = query.group.reduce((p, c) => {\n\t\t\t\t\t\t\treturn p && (b.query !== c || b.matches);\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t\tresponse[key] = match;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\tconst response = {\n\t\t\t\t\tmatches: false,\n\t\t\t\t\tbreakpoints: {},\n\t\t\t\t};\n\t\t\t\tbreakpoints.forEach((state) => {\n\t\t\t\t\tresponse.matches = response.matches || state.matches;\n\t\t\t\t\tresponse.breakpoints[state.query] = state.matches;\n\t\t\t\t});\n\t\t\t\tconsole.log(breakpoints, response, queries);\n\t\t\t\t*/\n\t\t\t\treturn response;\n\t\t\t}),\n\t\t);\n\t}\n\n\t/*\n\tstatic isMatched$(value) {\n\t\tconst queries = this.splitQueries(coerceArray(value));\n\t\treturn queries.some(mediaQuery => this.registerQuery$_(mediaQuery).mediaQueryList.matches);\n\t}\n\t*/\n\n\tstatic has(query) {\n\t\treturn this.queries_[query] !== undefined;\n\t}\n\n\tstatic get(query) {\n\t\treturn this.queries_[query];\n\t}\n\n\tstatic set(query, value) {\n\t\treturn this.queries_[query] = value;\n\t}\n\n\tstatic registerQuery$_(key) {\n\t\tif (this.has(key)) {\n\t\t\treturn this.get(key);\n\t\t}\n\t\tconst mediaQueryList = MediaMatcher.matchMedia(key);\n\t\tconst query$ = new Observable((observer) => {\n\t\t\tconst handler = (e) => observer.next(e);\n\t\t\tmediaQueryList.addListener(handler);\n\t\t\treturn () => {\n\t\t\t\tmediaQueryList.removeListener(handler);\n\t\t\t};\n\t\t}).pipe(\n\t\t\tstartWith(mediaQueryList),\n\t\t\tmap((nextMediaQueryList) => ({ query: key, matches: nextMediaQueryList.matches })),\n\t\t);\n\t\tconst output = { query$: query$, mediaQueryList };\n\t\tthis.set(key, output);\n\t\treturn output;\n\t}\n\n\tstatic splitQueries(queries) {\n\t\treturn queries.map((query) => query.split(','))\n\t\t\t.reduce((a1, a2) => a1.concat(a2))\n\t\t\t.map(query => query.trim());\n\t}\n}\n","import { decodeBase64, decodeJson, encodeBase64, encodeJson, Serializer, WINDOW } from 'rxcomp';\r\n\r\nexport default class StorageService {\r\n\tstatic supported = false;\r\n\tstatic encode(decoded) {\r\n\t\tlet encoded = Serializer.encode(decoded, [encodeJson, encodeURIComponent, encodeBase64]) || null;\r\n\t\treturn encoded;\r\n\t}\r\n\tstatic decode(encoded) {\r\n\t\tlet decoded = Serializer.decode(encoded, [decodeBase64, decodeURIComponent, decodeJson]);\r\n\t\treturn decoded;\r\n\t}\r\n\tstatic isSupported(type) {\r\n\t\tlet flag = false;\r\n\t\tlet storage;\r\n\t\ttry {\r\n\t\t\tstorage = WINDOW[type];\r\n\t\t\tconst x = '__storage_test__';\r\n\t\t\tstorage.setItem(x, x);\r\n\t\t\tstorage.removeItem(x);\r\n\t\t\tflag = true;\r\n\t\t} catch (error) {\r\n\t\t\tflag = error instanceof DOMException && (\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.code === 22 ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.code === 1014 ||\r\n\t\t\t\t// test name field too, because code might not be present\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.name === 'QuotaExceededError' ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n\t\t\t\t// acknowledge QuotaExceededError only if there's something already stored\r\n\t\t\t\tBoolean(storage && storage.length !== 0);\r\n\t\t}\r\n\t\treturn flag;\r\n\t}\r\n}\r\n","import { ReplaySubject } from 'rxjs';\r\nimport StorageService from './storage.service';\r\n\r\nexport default class SessionStorageService extends StorageService {\r\n\tstatic items$ = new ReplaySubject(1);\r\n\tstatic clear() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tsessionStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic delete(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tsessionStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic exist(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn sessionStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tstatic get(name) {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\tstatic set(name, value) {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\tstatic getRaw(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = sessionStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tstatic setRaw(name, value) {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tsessionStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic toArray() {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\tstatic toRawArray() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(sessionStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tstatic isSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('sessionStorage');\r\n\t}\r\n}\r\n","import SessionStorageService from '../storage/session-storage.service';\r\n\r\nexport class CoverService {\r\n\r\n\tstatic isIndex() {\r\n\t\tconst validPaths = ['', '/', '/it/', '/en/'];\r\n\t\treturn validPaths.indexOf(window.location.pathname) !== -1;\r\n\t}\r\n\r\n\tstatic shouldShowCover() {\r\n\t\tlet flag = false;\r\n\t\tconst showCover = SessionStorageService.get('showCover');\r\n\t\tflag = CoverService.isIndex() && !showCover;\r\n\t\tSessionStorageService.set('showCover', true);\r\n\t\treturn flag;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { BreakpointService } from './breakpoint/breakpoint.service';\r\nimport { CoverService } from './cover/cover.service';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\r\n\t\tthis.showCover = CoverService.shouldShowCover();\r\n\r\n\t\tBreakpointService.observe$({\r\n\t\t\tisMobile: '(max-width: 767px)'\r\n\t\t}).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(results => {\r\n\t\t\tconsole.log('AppComponent.BreakpointService.results', results);\r\n\t\t\tthis.isMobile = results.isMobile;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonSkipCover(event) {\r\n\t\tconsole.log('AppComponent.onSkipCover');\r\n\t\tthis.showCover = false;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonMenuToggle(opened) {\r\n\t\tconsole.log('AppComponent.onMenuToggle', opened);\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\tfilter(entry => entry !== undefined),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node, isIntersecting: true });\r\n\t\t}\r\n\t}\r\n\r\n\tstatic firstIntersection$(node) {\r\n\t\treturn this.intersection$(node).pipe(\r\n\t\t\tfilter(entry => entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\tfirst(),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearStaggerDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear-stagger');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearStaggerDirective.meta = {\r\n\tselector: '[appear-stagger]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearDirective.meta = {\r\n\t// selector: '[appear],.row,.listing--series,.listing--products,.listing--cards,.listing--news,.listing--downloads',\r\n\tselector: '.picture',\r\n};\r\n","export const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const STATIC = NODE ? false : (window && (window.location.port === '40525' || window.location.host === 'actarian.github.io' || window.location.host === 'stipa.herokuapp.com'));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'stipa',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/wp-json/stipa/v1',\r\n\tSTATIC_API: (DEVELOPMENT && !STATIC) ? '/Client/docs/api' : './api',\r\n};\r\n\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\tconsole.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n\r\nexport class Environment {\r\n\r\n\tget href() {\r\n\t\tif (window.location.host.indexOf('herokuapp') !== -1) {\r\n\t\t\treturn 'https://raw.githubusercontent.com/actarian/stipa/master/docs/';\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tget host() {\r\n\t\tlet host = window.location.host.replace('127.0.0.1', '192.168.1.2');\r\n\t\tif (host.substr(host.length - 1, 1) === '/') {\r\n\t\t\thost = host.substr(0, host.length - 1);\r\n\t\t}\r\n\t\treturn `${window.location.protocol}//${host}${BASE_HREF}`;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport const environment = new Environment({\r\n\tport: 5000,\r\n});\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tmethod = url.indexOf('.json') !== -1 ? 'GET' : method;\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\tlet qstring = methods.indexOf(method) !== -1 ? Object.keys(data).map(function(key) {\r\n\t\t    return key + '=' + encodeURI(data[key])\r\n\t\t}).join('&') : undefined;\r\n\t\treturn from(fetch(url, url.indexOf('.json') !== -1 ? {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t} : {\r\n\t\t    method: method,\r\n\t\t    headers: {\r\n\t\t        'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t    },\r\n\t\t    body: qstring\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\treturn response[format]().then(json => {\r\n\t\t\t\tresponse_.data = json;\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/*\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { ReplaySubject } from 'rxjs';\r\nimport StorageService from './storage.service';\r\n\r\nexport default class CookieStorageService extends StorageService {\r\n\tstatic items$ = new ReplaySubject(1);\r\n\tstatic clear() {\r\n\t\tthis.toRawArray().forEach(x => {\r\n\t\t\tthis.setter(x.name, '', -1);\r\n\t\t});\r\n\t}\r\n\tstatic delete(name) {\r\n\t\tthis.setter(name, '', -1);\r\n\t}\r\n\tstatic exist(name) {\r\n\t\treturn document.cookie.indexOf(';' + name + '=') !== -1 || document.cookie.indexOf(name + '=') === 0;\r\n\t}\r\n\tstatic get(name) {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\tstatic set(name, value, days) {\r\n\t\tthis.setter(name, this.encode(value), days);\r\n\t}\r\n\tstatic getRaw(name) {\r\n\t\tlet value = null;\r\n\t\tconst cookies = this.toRawArray();\r\n\t\tconst cookie = cookies.find(x => x.name === name);\r\n\t\tif (cookie) {\r\n\t\t\tvalue = cookie.value;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tstatic setRaw(name, value, days) {\r\n\t\tthis.setter(name, value, days);\r\n\t}\r\n\tstatic toArray() {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\tstatic toRawArray() {\r\n\t\treturn document.cookie.split(';').map(x => {\r\n\t\t\tconst items = x.split('=');\r\n\t\t\treturn { name: items[0].trim(), value: items[1] ? items[1].trim() : null }\r\n\t\t}).filter(x => x.name !== '');\r\n\t}\r\n\tstatic setter(name, value, days) {\r\n\t\tlet expires;\r\n\t\tif (days) {\r\n\t\t\tconst date = new Date();\r\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n\t\t\texpires = '; expires=' + date.toUTCString();\r\n\t\t} else {\r\n\t\t\texpires = '';\r\n\t\t}\r\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\r\n\t\tthis.items$.next(this.toArray());\r\n\t}\r\n\tstatic isSupported() {\r\n\t\tconst isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\r\n\t\treturn isBrowser;\r\n\t}\r\n}\r\n","import { getApiUrl } from '../environment';\r\nimport HttpService from '../http/http.service';\r\nimport CookieStorageService from '../storage/cookie-storage.service';\r\n\r\nexport default class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = CookieStorageService.getRaw('wp-wpml_current_language'); // || 'it';\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url), data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url));\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic staticGet$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url, true), data, format);\r\n\t}\r\n\r\n\tstatic staticDelete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url, true));\r\n\t}\r\n\r\n\tstatic staticPost$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPut$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPatch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n}\r\n","import { ReplaySubject } from 'rxjs';\r\nimport StorageService from './storage.service';\r\n\r\nexport default class LocalStorageService extends StorageService {\r\n\tstatic items$ = new ReplaySubject(1);\r\n\tstatic clear() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic delete(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic exist(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn localStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tstatic get(name) {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\tstatic set(name, value) {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\tstatic getRaw(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = localStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tstatic setRaw(name, value) {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tlocalStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic toArray() {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\tstatic toRawArray() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(localStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tstatic isSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('localStorage');\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport LocalStorageService from '../storage/local-storage.service';\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default class UserService {\r\n\r\n\tstatic getCurrentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\t//return ApiService.staticGet$(`/user/me`).pipe(\r\n\t\treturn ApiService.get$(`/user/me`).pipe(\r\n\t\t\t// map((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\tcatchError(error => of (null)),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/register`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/login`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn ApiService.staticPost$(`/user/logout`).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'logout')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic retrieve$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/forget`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tstatic update$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/updateprofile`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic mapStatic__(user, isStatic, action = 'me') {\r\n\t\tif (!isStatic) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic fake(user) {\r\n\t\tuser.firstName = user.firstName || 'Jhon';\r\n\t\tuser.lastName = user.lastName || 'Appleseed';\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic mapUser(user, isStatic) {\r\n\t\treturn isStatic ? UserService.fake(new User(user)) : new User(user);\r\n\t}\r\n\r\n\tstatic mapUsers(users, isStatic) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x, isStatic)) : [];\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$_ = new BehaviorSubject(null);\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthForgotComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthForgotComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthForgotComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.retrieve$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.onSubmit', response);\r\n\t\t\t\t\tthis.sent.next(true);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthForgotComponent.meta = {\r\n\tselector: '[auth-forgot]',\r\n\toutputs: ['sent', 'login', 'register'],\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.views = {\r\n\t\t\tSIGN_IN: 1,\r\n\t\t\tSIGN_UP: 2,\r\n\t\t\tFORGOTTEN: 3,\r\n\t\t};\r\n\t\tthis.view = node.hasAttribute('view') ? parseInt(node.getAttribute('view')) : this.views.SIGN_IN;\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\t// console.log('AuthComponent.onForgot');\r\n\t\tthis.view = this.views.FORGOTTEN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('AuthComponent.onLogin');\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('AuthComponent.onRegister');\r\n\t\tthis.view = this.views.SIGN_UP;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('AuthComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('AuthComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgottenSent(email) {\r\n\t\t/*\r\n\t\tconsole.log('AuthComponent.onForgottenSent', email);\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nAuthComponent.meta = {\r\n\tselector: '[auth]',\r\n\tinputs: ['auth']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\nimport AuthComponent from './auth.component';\r\n\r\nexport default class AuthModalComponent extends AuthComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('AuthModalComponent.onInit', data);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('AuthModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('AuthModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\t// console.log('AuthModalComponent.onDestroy');\r\n\t}\r\n\t*/\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nAuthModalComponent.meta = {\r\n\tselector: '[auth-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tinterests: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthSigninComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: 'password',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSigninComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSigninComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Login', this.form.value)\r\n\t\t\tUserService.login$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.signIn.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot() {\r\n\t\tthis.forgot.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSigninComponent.meta = {\r\n\tselector: '[auth-signin]',\r\n\toutputs: ['signIn', 'forgot', 'register'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t    roles: [],\r\n            countries: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\trole: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n            action: window.formaction\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('WorkWithUsComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\tcountry: 'Italy',\r\n\t\t\trole: role,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.form.submitted = false;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSignupComponent.meta = {\r\n\tselector: '[auth-signup]',\r\n\t//outputs: ['signUp', 'login'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfullName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t// privacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfullName: 'Jhon Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t// privacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/contacts', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsComponent.meta = {\r\n\tselector: '[contacts]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" [formControlName]=\"name\" />\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span *if=\"control.validators.length\" class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component *if=\"control.validators.length\" [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent } from 'rxjs';\r\nimport { filter, map, shareReplay } from 'rxjs/operators';\r\n\r\nexport default class KeyboardService {\r\n\r\n\tstatic keydown$() {\r\n\t\treturn fromEvent(window, 'keydown').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\treturn fromEvent(window, 'keyup').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tlet typing = '',\r\n\t\t\tto;\r\n\t\treturn this.key$().pipe(\r\n\t\t\tmap(key => {\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t}\r\n\t\t\t\ttyping += key;\r\n\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\ttyping = '';\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn typing;\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tconst regexp = /\\w/;\r\n\t\treturn this.keydown$().pipe(\r\n\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\tmap(event => event.key),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tsetOption(item) {\r\n\t\tthis.control.value = item.id;\r\n\t\t// DropdownDirective.dropdown$.next(null);\r\n\t}\r\n\t*/\r\n\r\n\tsetOption(item) {\r\n\t\tconsole.log('setOption', item, this.isMultiple);\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tthis.control.value = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tthis.control.value = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log($event);\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\t/*\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.add('dropped');\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tonClickOutside(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.remove('dropped');\r\n\t}\r\n\t*/\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\tinputs: ['control', 'label', 'multiple', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"getLabel()\"></span>\r\n            <input type=\"text\" style=\"display:none\" class=\"control--select\" [formControl]=\"control\" [formControlName]=\"name\" />\r\n\t\t\t<svg class=\"icon icon--caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t<li *for=\"let item of control.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n\t/*  (click)=\"onClick($event)\" (clickOutside)=\"onClickOutside($event)\" */\r\n\t/*  <!-- <div class=\"dropdown\" [class]=\"{ dropped: dropped }\"> --> */\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [innerHTML]=\"label\" rows=\"4\" [formControlName]=\"name\"></textarea>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nexport default class GalleryModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.mode = 'slider';\r\n\t\tconst { parentInstance, node } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = this.data = parentInstance.modal.data;\r\n\t\t\tthis.sliderItems = data.items;\r\n\t\t\tthis.sliderIndex = data.index;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode = this.mode === 'slider' ? 'grid' : 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonChange(event) {\r\n\t\t// console.log('onChange', event);\r\n\t}\r\n\r\n\tonTween(event) {\r\n\t\t// console.log('onTween', event);\r\n\t}\r\n\r\n\tonSelect(index) {\r\n\t\tthis.sliderIndex = index;\r\n\t\tthis.mode = 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nGalleryModalComponent.meta = {\r\n\tselector: '[gallery-modal]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { BASE_HREF } from '../environment';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst GALLERY_MODAL = BASE_HREF + 'gallery-modal.html';\r\n\r\nexport default class GalleryComponent extends Component {\r\n\r\n\tget galleryItems() {\r\n\t\tif (typeof this.gallery === 'string') {\r\n\t\t\treturn [this.gallery];\r\n\t\t} else if (Array.isArray(this.gallery)) {\r\n\t\t\treturn this.gallery;\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tget firstGalleryItem() {\r\n\t\tconst items = this.galleryItems;\r\n\t\tif (items.length) {\r\n\t\t\treturn items[0];\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.galleryItems.forEach(item => {\r\n\t\t\tif (GalleryComponent.items.indexOf(item) === -1) {\r\n\t\t\t\tGalleryComponent.items.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => this.onOpenGallery(event));\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst {node} = getContext(this);\r\n\t\treturn fromEvent(node, 'click');\r\n\t}\r\n\r\n\tonOpenGallery(event) {\r\n\t\tconst items = GalleryComponent.items;\r\n\t\tconst index = items.indexOf(this.firstGalleryItem);\r\n\t\t// console.log('GalleryComponent.onOpenGallery', this.gallery, items, index);\r\n\t\tModalService.open$({ src: GALLERY_MODAL, data: { items, index } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// this.pushChanges();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nGalleryComponent.items = [];\r\n\r\nGalleryComponent.meta = {\r\n\tselector: '[gallery]',\r\n\tinputs: ['gallery']\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\n// import UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.mainActive = false;\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\tconsole.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t}\r\n\r\n\tonMainToggle() {\r\n\t\tthis.mainActive = !this.mainActive;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.nav--primary-menu > li'));\r\n\t\tgsap.to(items, {\r\n\t\t\topacity: this.mainActive ? 1 : 0,\r\n\t\t\tduration: 0.35,\r\n\t\t\tstagger: {\r\n\t\t\t\teach: 0.05,\r\n\t\t\t\tease: Power3.easeOut\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t\tthis.toggle.next(this.mainActive);\r\n\t}\r\n\r\n\tonOpenSub(subId) {\r\n\t\tthis.subId = subId;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonCloseSub(subId) {\r\n\t\tif (this.subId === subId) {\r\n\t\t\tthis.subId = null;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tisSubOpen(subId) {\r\n\t\treturn this.subId === subId;\r\n\t}\r\n\r\n\tisPrimaryHidden() {\r\n\t\treturn this.subId != null;\r\n\t}\r\n\r\n\tshowPicture(src) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst picture = node.querySelector('.main-menu__picture');\r\n\t\tlet img;\r\n\t\tif (src) {\r\n\t\t\timg = document.createElement('img');\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tpicture.appendChild(img);\r\n\t\t\t\tgsap.set(img, { opacity: 0 });\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 1,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 1) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\timg.src = src;\r\n\t\t} else {\r\n\t\t\timg = picture.querySelector('img');\r\n\t\t\tif (img) {\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 0,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 0) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header',\r\n\toutputs: ['toggle']\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/stipa/auth-modal.html' : '/stipa/auth-modal.html';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = node.getAttribute('href');\r\n\t\tHttpService.get$(href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t\tmap(response => response.data),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log('SecureDirective.tryDownloadHref', error);\r\n\t\t\tthis.onLogin();\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tconsole.log('SecureDirective.onLogin');\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class ShareComponent extends Component {\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.getUrl()}&media=&description=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.getUrl()}&title=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.getTitle()}%20${this.getUrl()}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.getTitle()}&body=${this.getUrl()}`;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconsole.log('ShareComponent.onInit', this.share, this.title);\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.title);\r\n\t}\r\n\r\n\tgetTitle() {\r\n\t\tlet title = this.title ? this.title : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tgetUrl() {\r\n\t\tlet url = this.share;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareComponent.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'title'],\r\n\ttemplate: /* html */`\r\n\t<ul class=\"nav--share\">\r\n\t\t<li>\r\n\t\t\t<a [href]=\"facebookUrl\" target=\"_blank\"><svg class=\"facebook\"><use xlink:href=\"#facebook\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"twitterUrl\" target=\"_blank\"><svg class=\"twitter\"><use xlink:href=\"#twitter\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"pinterestUrl\" target=\"_blank\"><svg class=\"pinterest\"><use xlink:href=\"#pinterest\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"linkedInUrl\" target=\"_blank\"><svg class=\"linkedin\"><use xlink:href=\"#linkedin\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<!--\r\n\t\t<li>\r\n\t\t\t<a [href]=\"whatsappUrl\" target=\"_blank\"><svg class=\"whatsapp\"><use xlink:href=\"#whatsapp\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"mailToUrl\"><svg class=\"email\"><use xlink:href=\"#email\"></use></svg></a>\r\n\t\t</li>\r\n\t\t-->\r\n\t</ul>\r\n\t`,\r\n};\r\n","import { fromEvent, merge, ReplaySubject, Subject } from 'rxjs';\r\nimport { filter, map, startWith, switchMap, takeUntil } from 'rxjs/operators';\r\n\r\nexport class DragPoint {\r\n\tconstructor() {\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t}\r\n}\r\n\r\nexport class DragEvent {\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class DragDownEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragMoveEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragUpEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t}\r\n}\r\n\r\nexport default class DragService {\r\n\r\n\tstatic getPosition(event, point) {\r\n\t\tif (event instanceof MouseEvent) {\r\n\t\t\tpoint ? (\r\n\t\t\t\tpoint.x = event.clientX,\r\n\t\t\t\tpoint.y = event.clientY\r\n\t\t\t) : point = {\r\n\t\t\t\tx: event.clientX,\r\n\t\t\t\ty: event.clientY\r\n\t\t\t};\r\n\t\t} else if (event instanceof TouchEvent) {\r\n\t\t\tif (event.touches.length > 0) {\r\n\t\t\t\tpoint ? (\r\n\t\t\t\t\tpoint.x = event.touches[0].pageX,\r\n\t\t\t\t\tpoint.y = event.touches[0].pageY\r\n\t\t\t\t) : point = {\r\n\t\t\t\t\tx: event.touches[0].pageX,\r\n\t\t\t\t\ty: event.touches[0].pageY\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn point;\r\n\t}\r\n\r\n\tstatic down$(target, events$) {\r\n\t\tlet downEvent;\r\n\t\treturn merge(\r\n\t\t\tfromEvent(target, 'mousedown'),\r\n\t\t\tfromEvent(target, 'touchstart')\r\n\t\t).pipe(\r\n\t\t\tmap((event) => {\r\n\t\t\t\tdownEvent = downEvent || new DragDownEvent();\r\n\t\t\t\tdownEvent.node = target;\r\n\t\t\t\tdownEvent.target = event.target;\r\n\t\t\t\tdownEvent.originalEvent = event;\r\n\t\t\t\tdownEvent.down = this.getPosition(event, downEvent.down);\r\n\t\t\t\tif (downEvent.down) {\r\n\t\t\t\t\tdownEvent.distance = new DragPoint();\r\n\t\t\t\t\tdownEvent.strength = new DragPoint();\r\n\t\t\t\t\tdownEvent.speed = new DragPoint();\r\n\t\t\t\t\tevents$.next(downEvent);\r\n\t\t\t\t\treturn downEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tfilter(event => event !== undefined),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic move$(target, events$, dismiss$, downEvent) {\r\n\t\tlet moveEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mousemove' : 'touchmove').pipe(\r\n\t\t\tstartWith(downEvent),\r\n\t\t\tmap((event) => {\r\n\t\t\t\tmoveEvent = moveEvent || new DragMoveEvent();\r\n\t\t\t\tmoveEvent.node = target;\r\n\t\t\t\tmoveEvent.target = event.target;\r\n\t\t\t\tmoveEvent.originalEvent = event;\r\n\t\t\t\tmoveEvent.position = this.getPosition(event, moveEvent.position);\r\n\t\t\t\tconst dragging = downEvent.down !== undefined && moveEvent.position !== undefined;\r\n\t\t\t\tif (dragging) {\r\n\t\t\t\t\tmoveEvent.distance.x = moveEvent.position.x - downEvent.down.x;\r\n\t\t\t\t\tmoveEvent.distance.y = moveEvent.position.y - downEvent.down.y;\r\n\t\t\t\t\tmoveEvent.strength.x = moveEvent.distance.x / window.innerWidth * 2;\r\n\t\t\t\t\tmoveEvent.strength.y = moveEvent.distance.y / window.innerHeight * 2;\r\n\t\t\t\t\tmoveEvent.speed.x = downEvent.speed.x + (moveEvent.strength.x - downEvent.strength.x) * 0.1;\r\n\t\t\t\t\tmoveEvent.speed.y = downEvent.speed.y + (moveEvent.strength.y - downEvent.strength.y) * 0.1;\r\n\t\t\t\t\tdownEvent.distance.x = moveEvent.distance.x;\r\n\t\t\t\t\tdownEvent.distance.y = moveEvent.distance.y;\r\n\t\t\t\t\tdownEvent.speed.x = moveEvent.speed.x;\r\n\t\t\t\t\tdownEvent.speed.y = moveEvent.speed.y;\r\n\t\t\t\t\tdownEvent.strength.x = moveEvent.strength.x;\r\n\t\t\t\t\tdownEvent.strength.y = moveEvent.strength.y;\r\n\t\t\t\t\tevents$.next(moveEvent);\r\n\t\t\t\t\treturn moveEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic up$(target, events$, dismiss$, downEvent) {\r\n\t\tlet upEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mouseup' : 'touchend').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tupEvent = upEvent || new DragUpEvent();\r\n\t\t\t\tevents$.next(upEvent);\r\n\t\t\t\tdismiss$.next();\r\n\t\t\t\t// console.log(downEvent.distance);\r\n\t\t\t\tif (Math.abs(downEvent.distance.x) > 10) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t}\r\n\t\t\t\treturn upEvent;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic events$(target) {\r\n\t\ttarget = target || document;\r\n\t\tconst events$ = new ReplaySubject(1);\r\n\t\tconst dismiss$ = new Subject();\r\n\t\treturn this.down$(target, events$).pipe(\r\n\t\t\tswitchMap((downEvent) => merge(\r\n\t\t\t\tthis.move$(target, events$, dismiss$, downEvent),\r\n\t\t\t\tthis.up$(target, events$, dismiss$, downEvent),\r\n\t\t\t).pipe(\r\n\t\t\t\ttakeUntil(dismiss$),\r\n\t\t\t)),\r\n\t\t\tswitchMap(() => events$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { interval, of, Subject } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport DragService, { DragDownEvent, DragMoveEvent, DragUpEvent } from '../drag/drag.service';\r\n\r\nexport default class SliderComponent extends Component {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\t// console.log('current');\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t\t// this.state.current = Math.min(current, items ? items.length - 1 : 0);\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.container = node;\r\n\t\tthis.wrapper = node.querySelector('.slider__wrapper');\r\n\t\tif (this.items.length === 0) {\r\n\t\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\t\tthis.items = items;\r\n\t\t}\r\n\t\t// console.log('SliderComponent.onInit', this.items);\r\n\t\tthis.userGesture$ = new Subject();\r\n\t\tsetTimeout(() => {\r\n\t\t\t// this.change.next(this.current);\r\n\t\t\t/*\r\n\t\t\tgsap.set(this.wrapper, {\r\n\t\t\t\tx: -100 * this.current + '%',\r\n\t\t\t});\r\n\t\t\t*/\r\n\t\t\tthis.slider$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('dragService', event);\r\n\t\t\t});\r\n\t\t}, 1);\r\n\t\tthis.autoplay$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(() => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tslider$() {\r\n\t\tlet translation, dragDownEvent, dragMoveEvent;\r\n\t\treturn DragService.events$(this.wrapper).pipe(\r\n\t\t\ttap((event) => {\r\n\t\t\t\tif (event instanceof DragDownEvent) {\r\n\t\t\t\t\ttranslation = this.getTranslation(this.wrapper, this.container);\r\n\t\t\t\t\tdragDownEvent = event;\r\n\t\t\t\t} else if (event instanceof DragMoveEvent) {\r\n\t\t\t\t\tdragMoveEvent = this.onDragMoveEvent(dragDownEvent, event, translation);\r\n\t\t\t\t\t// console.log('DragMoveEvent');\r\n\t\t\t\t} else if (event instanceof DragUpEvent) {\r\n\t\t\t\t\tif (dragMoveEvent) {\r\n\t\t\t\t\t\tthis.container.classList.remove('dragging');\r\n\t\t\t\t\t\tthis.wrapper.style.transform = null;\r\n\t\t\t\t\t\tthis.onDragUpEvent(dragDownEvent, dragMoveEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log('DragUpEvent');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tautoplay$() {\r\n\t\tif (this.autoplay) {\r\n\t\t\tconst autoplay = typeof this.autoplay === 'number' ? this.autoplay : 4000;\r\n\t\t\treturn interval(autoplay).pipe(\r\n\t\t\t\ttakeUntil(this.userGesture$),\r\n\t\t\t\ttap(() => {\r\n\t\t\t\t\tthis.current = (this.current + 1) % this.items.length;\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\r\n\tonDragMoveEvent(dragDownEvent, dragMoveEvent, translation) {\r\n\t\tthis.container.classList.add('dragging');\r\n\t\tconst transformX = translation.x + dragMoveEvent.distance.x;\r\n\t\tthis.wrapper.style.transform = `translate3d(${transformX}px, ${0}px, ${0}px)`;\r\n\t\treturn dragMoveEvent;\r\n\t}\r\n\r\n\tonDragUpEvent(dragDownEvent, dragMoveEvent) {\r\n\t\tconst width = this.container.offsetWidth;\r\n\t\tif (dragMoveEvent.distance.x * -1 > width * 0.25 && this.hasNext()) {\r\n\t\t\tthis.navTo(this.current + 1);\r\n\t\t} else if (dragMoveEvent.distance.x * -1 < width * -0.25 && this.hasPrev()) {\r\n\t\t\tthis.navTo(this.current - 1);\r\n\t\t} else {\r\n\t\t\tthis.wrapper.style.transform = `translate3d(${-100 * this.current}%, 0, 0)`;\r\n\t\t\t// this.navTo(this.current);\r\n\t\t}\r\n\t\t// this.navTo(current);\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tcurrent = (current > 0 ? current : this.items.length + current) % this.items.length;\r\n\t\tthis.current = current;\r\n\t\tthis.userGesture$.next();\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\treturn this.current - 1 >= 0;\r\n\t}\r\n\r\n\thasNext() {\r\n\t\treturn this.current + 1 < this.items.length;\r\n\t}\r\n\r\n\tgetTranslation(node, container) {\r\n\t\tlet x = 0,\r\n\t\t\ty = 0,\r\n\t\t\tz = 0;\r\n\t\tconst transform = node.style.transform;\r\n\t\tif (transform) {\r\n\t\t\tconst coords = transform.split('(')[1].split(')')[0].split(',');\r\n\t\t\tx = parseFloat(coords[0]);\r\n\t\t\ty = parseFloat(coords[1]);\r\n\t\t\tz = parseFloat(coords[2]);\r\n\t\t\tx = coords[0].indexOf('%') !== -1 ? x *= container.offsetWidth * 0.01 : x;\r\n\t\t\ty = coords[1].indexOf('%') !== -1 ? y *= container.offsetHeight * 0.01 : y;\r\n\t\t}\r\n\t\treturn { x, y, z };\r\n\t}\r\n}\r\n\r\nSliderComponent.meta = {\r\n\tselector: '[slider]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderCaseStudyComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -this.slideWidth * this.state.current + 'px, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': this.slideWidth * this.items.length + 'px' };\r\n\t}\r\n\r\n\tget slideWidth() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// const slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tconst slideWidth = (window.innerWidth < 768 ? node.offsetWidth: (node.offsetWidth / 12 * 10)) + 40;\r\n\t\treturn slideWidth;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.resize$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => this.pushChanges());\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize');\r\n\t}\r\n\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n}\r\n\r\nSliderCaseStudyComponent.meta = {\r\n\tselector: '[slider-case-study]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderGalleryComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n\r\n\tdoClose() {\r\n\t\tthis.close.next();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode.next();\r\n\t}\r\n}\r\n\r\nSliderGalleryComponent.meta = {\r\n\tselector: '[slider-gallery]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween', 'close', 'mode'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { animationFrameScheduler, combineLatest, fromEvent, interval } from 'rxjs';\r\nimport { map, takeUntil, tap } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderHeroComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.pagination$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tthis.direction_ = direction;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\t\tif (direction == 1) {\r\n\t\t\t\tpagination.classList.remove('prev');\r\n\t\t\t\tpagination.classList.add('next');\r\n\t\t\t} else {\r\n\t\t\t\tpagination.classList.remove('next');\r\n\t\t\t\tpagination.classList.add('prev');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\traf$() {\r\n\t\treturn interval(0, animationFrameScheduler);\r\n\t}\r\n\r\n\tmouse$() {\r\n\t\tconst event = { x:0, y: 0};\r\n\t\treturn fromEvent(window, 'mousemove').pipe(\r\n\t\t\tmap(mouseEvent => {\r\n\t\t\t\tevent.x = mouseEvent.clientX;\r\n\t\t\t\tevent.y = mouseEvent.clientY;\r\n\t\t\t\treturn event;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tpagination$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst position = { x:0, y: 0};\r\n\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\treturn combineLatest([this.mouse$(), this.raf$()]).pipe(\r\n\t\t\ttap(datas => {\r\n\t\t\t\tconst mouse = datas[0];\r\n\t\t\t\tposition.x += (mouse.x - position.x) / 20;\r\n\t\t\t\tposition.y += (mouse.y - position.y) / 20;\r\n\t\t\t\t// const rect = node.getBoundingClientRect();\r\n\t\t\t\tthis.direction = mouse.x > window.innerWidth / 2 ? 1 : -1;\r\n\t\t\t\tpagination.style.transform = `translateX(${position.x}px) translateY(${position.y}px)`;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tif (event.clientX > window.innerWidth / 2) {\r\n\t\t\t\t\t// if (this.hasNext()) {\r\n\t\t\t\t\t\tthis.navTo(this.state.current + 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if (this.hasPrev()) {\r\n\t\t\t\t\t\tthis.navTo(this.state.current - 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n\r\n}\r\n\r\nSliderHeroComponent.meta = {\r\n\tselector: '[slider-hero]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\nimport { getSlug } from \"../environment\";\r\n\r\nexport default class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\treturn getSlug(value);\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Context } from 'rxcomp';\r\n\r\nexport default class VirtualItem extends Context {\r\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\r\n\t\tsuper(parentInstance);\r\n\t\tthis[key] = $key;\r\n\t\tthis[value] = $value;\r\n\t\tthis.index = index;\r\n\t\tthis.count = count;\r\n\t}\r\n\r\n\tget first() {\r\n\t\treturn this.index === 0;\r\n\t}\r\n\r\n\tget last() {\r\n\t\treturn this.index === this.count - 1;\r\n\t}\r\n\r\n\tget even() {\r\n\t\treturn this.index % 2 === 0;\r\n\t}\r\n\r\n\tget odd() {\r\n\t\treturn !this.even;\r\n\t}\r\n}\r\n","import { getContext, Structure } from 'rxcomp';\r\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\r\nimport { auditTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\r\nimport VirtualItem from './virtual.item';\r\n\r\nexport const VirtualMode = {\r\n\tResponsive: 1,\r\n\tGrid: 2,\r\n\tCentered: 3,\r\n\tList: 4\r\n};\r\n\r\nexport default class VirtualStructure extends Structure {\r\n\r\n\tonInit() {\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst template = node.firstElementChild;\r\n\t\tconst expression = node.getAttribute('*virtual');\r\n\t\tnode.removeAttribute('*virtual');\r\n\t\tnode.removeChild(template);\r\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\r\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\r\n\t\tthis.container = node;\r\n\t\tthis.template = template;\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options = {\r\n\t\t\ttop: 0,\r\n\t\t\twidth: this.width,\r\n\t\t\tgutter: this.gutter,\r\n\t\t\tcontainerWidth: 0,\r\n\t\t\tcontainerHeight: 0,\r\n\t\t\tcols: [0],\r\n\t\t\tstrategy: 1\r\n\t\t};\r\n\t\tthis.cachedRects = {};\r\n\t\tthis.cachedInstances = [];\r\n\t\tthis.cacheNodes = [];\r\n\t\tthis.items$ = new BehaviorSubject([]);\r\n\t\tthis.update$()\r\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\r\n\t\t\t.subscribe(visibleItems => {\r\n\t\t\t\t// console.log(visibleItems.length);\r\n\t\t\t});\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\t// resolve\r\n\t\tconst items = module.resolve(this.virtualFunction, context.parentInstance, this) || [];\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options.width = this.width;\r\n\t\tthis.updateView(true);\r\n\t\tthis.items$.next(items);\r\n\t}\r\n\r\n\tupdate$() {\r\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\r\n\t\t\tmap(datas => {\r\n\t\t\t\tconst options = this.options;\r\n\t\t\t\tconst items = this.items$.getValue();\r\n\t\t\t\tconst total = items.length;\r\n\t\t\t\tthis.container.position = 'relative';\r\n\t\t\t\tlet highestHeight = 0;\r\n\t\t\t\tconst width = this.getWidth();\r\n\t\t\t\tconst gutter = this.getGutter(width);\r\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\r\n\t\t\t\t\tlet col, height, top, left, bottom;\r\n\t\t\t\t\tlet rect = this.cachedRects[i];\r\n\t\t\t\t\tif (rect) {\r\n\t\t\t\t\t\tcol = rect.col;\r\n\t\t\t\t\t\theight = rect.height;\r\n\t\t\t\t\t\tleft = rect.left;\r\n\t\t\t\t\t\t// top = rect.top;\r\n\t\t\t\t\t\t// bottom = rect.bottom;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcol = this.getCol();\r\n\t\t\t\t\t\theight = this.getHeight(width, item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttop = options.cols[col];\r\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\r\n\t\t\t\t\t\tnode.style.position = 'absolute';\r\n\t\t\t\t\t\tnode.style.top = top + 'px';\r\n\t\t\t\t\t\tnode.style.left = left + 'px';\r\n\t\t\t\t\t\tnode.style.width = width + 'px';\r\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\r\n\t\t\t\t\t\t\theight = node.offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trect.height = height;\r\n\t\t\t\t\t\t\trect.bottom = bottom;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.removeNode(i);\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet removeIndex = items.length;\r\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\r\n\t\t\t\t\tthis.removeNode(removeIndex);\r\n\t\t\t\t\tremoveIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tthis.cacheNodes.length = items.length;\r\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\r\n\t\t\t\treturn visibleItems;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tgetCols() {\r\n\t\tconst options = this.options;\r\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\r\n\t\treturn new Array(cols).fill(0);\r\n\t}\r\n\r\n\tgetCol() {\r\n\t\tconst options = this.options;\r\n\t\tlet col;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\r\n\t\t\t\t\treturn c < a[p] ? i : p;\r\n\t\t\t\t}, 0);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tcol = 0;\r\n\t\t}\r\n\t\treturn col;\r\n\t}\r\n\r\n\tgetWidth() {\r\n\t\tconst options = this.options;\r\n\t\tlet width;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\twidth = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\twidth = options.containerWidth;\r\n\t\t}\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(width, item) {\r\n\t\tconst options = this.options;\r\n\t\tlet height;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\theight = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\theight = 80;\r\n\t\t}\r\n\t\treturn height;\r\n\t}\r\n\r\n\tgetGutter(width) {\r\n\t\tconst options = this.options;\r\n\t\tlet gutter;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tgutter = options.gutter;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tgutter = 0;\r\n\t\t}\r\n\t\treturn gutter;\r\n\t}\r\n\r\n\tgetLeft(index, width, gutter) {\r\n\t\tconst options = this.options;\r\n\t\tlet left;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tleft = index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tleft = 0;\r\n\t\t}\r\n\t\treturn left;\r\n\t}\r\n\r\n\tcachedNode(index, i, value, total) {\r\n\t\tif (this.cacheNodes[index]) {\r\n\t\t\treturn this.updateNode(index, i, value);\r\n\t\t} else {\r\n\t\t\treturn this.createNode(index, i, value, total);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateNode(index, i, value, total) {\r\n\t\tconst clonedNode = this.template.cloneNode(true);\r\n\t\tdelete clonedNode.rxcompId;\r\n\t\tthis.container.appendChild(clonedNode);\r\n\t\tthis.cacheNodes[index] = clonedNode;\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\tconst tokens = this.tokens;\r\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\r\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\r\n\t\tconst forItemContext = getContext(instance);\r\n\t\tmodule.compile(clonedNode, forItemContext.instance);\r\n\t\tthis.cachedInstances[index] = instance;\r\n\t\treturn clonedNode;\r\n\t}\r\n\r\n\tupdateNode(index, i, value) {\r\n\t\tconst instance = this.cachedInstances[index];\r\n\t\tconst tokens = this.tokens;\r\n\t\tif (instance[tokens.key] !== i) {\r\n\t\t\tinstance[tokens.key] = i;\r\n\t\t\tinstance[tokens.value] = value;\r\n\t\t\tinstance.pushChanges();\r\n\t\t}\r\n\t\t// console.log(index, i, value);\r\n\t\treturn this.cacheNodes[index];\r\n\t}\r\n\r\n\tremoveNode(index) {\r\n\t\tthis.cachedInstances[index] = undefined;\r\n\t\tconst node = this.cacheNodes[index];\r\n\t\tif (node) {\r\n\t\t\tconst context = getContext(this);\r\n\t\t\tconst module = context.module;\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodule.remove(node);\r\n\t\t}\r\n\t\tthis.cacheNodes[index] = undefined;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tintersect(top1, bottom1, top2, bottom2) {\r\n\t\treturn top2 < bottom1 && bottom2 > top1;\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tauditTime(100),\r\n\t\t\tstartWith(null),\r\n\t\t\ttap(() => this.updateView(true))\r\n\t\t);\r\n\t}\r\n\r\n\tscroll$(node) {\r\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\r\n\t}\r\n\r\n\tupdateView(reset) {\r\n\t\tconst rect = this.container.getBoundingClientRect();\r\n\t\tconst options = this.options;\r\n\t\toptions.top = rect.top;\r\n\t\toptions.containerWidth = rect.width;\r\n\t\toptions.containerHeight = window.innerHeight;\r\n\t\toptions.cols = this.getCols();\r\n\t\tif (reset) {\r\n\t\t\tthis.cachedRects = {};\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpressionTokens(expression) {\r\n\t\tif (expression === null) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tconst expressions = expression\r\n\t\t\t.split(';')\r\n\t\t\t.map(x => x.trim())\r\n\t\t\t.filter(x => x !== '');\r\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\r\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\r\n\t\tconst iterable = virtualExpressions[1];\r\n\t\tlet key = 'index';\r\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\r\n\t\tif (keyValueMatches) {\r\n\t\t\tkey = keyValueMatches[1];\r\n\t\t\tvalue = keyValueMatches[2];\r\n\t\t}\r\n\t\tif (expressions.length > 1) {\r\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\r\n\t\t\tif (indexExpressions.length === 3) {\r\n\t\t\t\tkey = indexExpressions[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { key, value, iterable };\r\n\t}\r\n}\r\n\r\nVirtualStructure.meta = {\r\n\tselector: '[*virtual]',\r\n\tinputs: ['mode', 'width', 'gutter']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AppComponent from './app.component';\r\nimport AppearStaggerDirective from './appear/appear-stagger.directive';\r\nimport AppearDirective from './appear/appear.directive';\r\nimport AuthForgotComponent from './auth/auth-forgot.component';\r\nimport AuthModalComponent from './auth/auth-modal.component';\r\nimport AuthSigninComponent from './auth/auth-signin.component';\r\nimport AuthSignupComponent from './auth/auth-signup.component';\r\nimport AuthComponent from './auth/auth.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport ContactsComponent from './contacts/contacts.component';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport ControlCheckboxComponent from './forms/control-checkbox.component';\r\nimport ControlCustomSelectComponent from './forms/control-custom-select.component';\r\nimport ControlPasswordComponent from './forms/control-password.component';\r\nimport ControlTextComponent from './forms/control-text.component';\r\nimport ControlTextareaComponent from './forms/control-textarea.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport GalleryModalComponent from './gallery/gallery-modal.component';\r\nimport GalleryComponent from './gallery/gallery.component';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport ShareComponent from './share/share.component';\r\nimport SliderCaseStudyComponent from './slider/slider-case-study.component';\r\nimport SliderGalleryComponent from './slider/slider-gallery.component';\r\nimport SliderHeroComponent from './slider/slider-hero.component';\r\nimport SliderComponent from './slider/slider.component';\r\nimport SlugPipe from './slug/slug.pipe';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\n\r\nexport default class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAppearDirective,\r\n\t\tAppearStaggerDirective,\r\n\t\tAuthComponent,\r\n\t\tAuthForgotComponent,\r\n\t\tAuthModalComponent,\r\n\t\tAuthSigninComponent,\r\n\t\tAuthSignupComponent,\r\n\t\tClickOutsideDirective,\r\n\t\tContactsComponent,\r\n\t\tControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlPasswordComponent,\r\n\t\tControlTextComponent,\r\n\t\tControlTextareaComponent,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tGalleryComponent,\r\n\t\tGalleryModalComponent,\r\n\t\tHeaderComponent,\r\n\t\tHtmlPipe,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tScrollToDirective,\r\n\t\tSecureDirective,\r\n\t\tShareComponent,\r\n\t\tSliderComponent,\r\n\t\tSliderCaseStudyComponent,\r\n\t\tSliderGalleryComponent,\r\n\t\tSliderHeroComponent,\r\n\t\tSlugPipe,\r\n\t\tVirtualStructure\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}