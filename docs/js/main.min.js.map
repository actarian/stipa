{"version":3,"sources":["src/js/main.js","../../src/js/breakpoint/media-matcher.js","../../src/js/breakpoint/breakpoint.service.js","../../src/js/storage/storage.service.js","../../src/js/storage/session-storage.service.js","../../src/js/cover/cover.service.js","../../src/js/app.component.js","../../src/js/intersection/intersection.service.js","../../src/js/appear/appear-stagger.directive.js","../../src/js/appear/appear.directive.js","../../src/js/environment.js","../../src/js/http/http.service.js","../../src/js/api/api.service.js","../../src/js/storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/auth/auth-forgot.component.js","../../src/js/modal/modal.service.js","../../src/js/modal/modal-outlet.component.js","../../src/js/auth/auth.component.js","../../src/js/auth/auth-modal.component.js","../../src/js/auth/auth-signin.component.js","../../src/js/auth/auth-signup.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/contacts/contacts-simple.component.js","../../src/js/contacts/contacts.component.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/forms/control.component.js","../../src/js/forms/control-checkbox.component.js","../../src/js/keyboard/keyboard.service.js","../../src/js/forms/control-custom-select.component.js","../../src/js/forms/control-password.component.js","../../src/js/forms/control-text.component.js","../../src/js/forms/control-textarea.component.js","../../src/js/forms/errors.component.js","../../src/js/gallery/gallery-modal.component.js","../../src/js/gallery/gallery.component.js","../../src/js/css/css.service.js","../../src/js/header/header.component.js","../../src/js/html/html.pipe.js","../../src/js/magazine/magazine-dropdown.component.js","../../src/js/filter/filter-item.js","../../src/js/location/location.service.js","../../src/js/filter/filter.service.js","../../src/js/magazine/magazine.service.js","../../src/js/magazine/magazine.component.js","../../src/js/modal/modal.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/share/share.component.js","../../src/js/drag/drag.service.js","../../src/js/slider/slider.component.js","../../src/js/slider/slider-case-study.component.js","../../src/js/slider/slider-gallery.component.js","../../src/js/slider/slider-hero.component.js","../../src/js/slug/slug.pipe.js","../../src/js/virtual/virtual.item.js","../../src/js/virtual/virtual.structure.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","__proto__","mediaQueryStyleNode","EDGE","test","navigator","userAgent","TRIDENT","BLINK","window","chrome","CSS","WEBKIT","mediaQueriesForWebkitCompatibility","Set","MediaMatcher","matchMedia","query","createEmptyStyleRule","_matchMedia","has","document","createElement","setAttribute","head","appendChild","sheet","insertRule","add","e","console","error","bind","matches","media","addListener","removeListener","BreakpointService","observe$","_this","queries","assign","queries$_","keys","forEach","group","split","map","trim","push","registerQuery$_","query$","combineLatest","apply","concat","pipe","take","skip","debounceTime","breakpoints","response","b","match","reduce","p","c","undefined","queries_","get","set","mediaQueryList","output","Observable","observer","handler","next","startWith","nextMediaQueryList","splitQueries","a1","a2","StorageService","encode","decoded","Serializer","encodeJson","encodeURIComponent","encodeBase64","decode","encoded","decodeBase64","decodeURIComponent","decodeJson","isSupported","type","storage","flag","WINDOW","x","setItem","removeItem","DOMException","code","name","Boolean","SessionStorageService","_StorageService","arguments","clear","sessionStorage","items$","toArray","delete","exist","getItem","getRaw","setRaw","toRawArray","_this2","supported","ReplaySubject","CoverService","isIndex","indexOf","location","pathname","shouldShowCover","showCover","AppComponent","_Component","_proto","onInit","getContext","node","classList","remove","isMobile","takeUntil","unsubscribe$","subscribe","results","log","pushChanges","onSkipCover","event","onMenuToggle","opened","Component","meta","selector","IntersectionService","observer_","readySubject_","BehaviorSubject","observerSubject_","Subject","IntersectionObserver","entries","intersection$","observe","find","entry","filter","finalize","unobserve","of","isIntersecting","firstIntersection$","first","AppearStaggerDirective","_Directive","onChanges","appeared","src","Directive","AppearDirective","NODE","BASE_HREF","URLSearchParams","search","querySelector","getAttribute","STATIC","port","host","DEVELOPMENT","ENV","NAME","PRODUCTION","RESOURCE","STATIC_RESOURCE","API","STATIC_API","getApiUrl","url","useStatic","Environment","options","replace","substr","protocol","HttpResponse","data","status","statusText","ok","redirected","HttpService","http$","method","format","methods","response_","qstring","encodeURI","join","from","fetch","headers","Accept","Content-Type","body","JSON","stringify","then","json","Promise","resolve","reject","catchError","throwError","getError","get$","delete$","post$","put$","patch$","object","statusCode","statusMessage","ApiService","_HttpService","call","staticGet$","staticDelete$","staticPost$","staticPut$","staticPatch$","currentLanguage","LocalStorageService","localStorage","User","firstName","toUpperCase","lastName","UserService","getCurrentUser","user$_","getValue","setUser","user","me$","mapUser","static","switchMap","register$","payload","mapStatic__","login$","_this3","logout$","_this4","retrieve$","_this5","isStatic","action","fake","mapUsers","users","AuthForgotComponent","FormGroup","email","FormControl","Validators","RequiredValidator","EmailValidator","checkRequest","antiforgery","checkField","controls","changes$","changes","success","patch","reset","onSubmit","valid","submitted","sent","touched","onLogin","login","onRegister","register","outputs","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","template","getNode","tap","modal$","events$","load$","text","div","innerHTML","firstElementChild","ModalOutletComponent","modalNode","modal_","removeChild","compile","AuthComponent","views","SIGN_IN","SIGN_UP","FORGOTTEN","view","hasAttribute","parseInt","onForgot","onSignIn","href","auth","onSignUp","onForgottenSent","inputs","AuthModalComponent","_AuthComponent","parentInstance","close","AuthSigninComponent","password","signIn","forgot","AuthSignupComponent","roles","countries","company","role","country","newsletter","privacy","formaction","id","dataLayer","form type","ClickOutsideDirective","initialFocus","_getContext","event$","fromEvent","contains","shareReplay","expression","outputFunction","makeFunction","clickOutside$","ContactsSimpleComponent","fullName","ContactsComponent","reason","firstCategory","secondCategory","message","DROPDOWN_ID","DropdownDirective","trigger","onClick","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","DropdownItemDirective","ControlComponent","flags","control","ControlCheckboxComponent","_ControlComponent","label","KeyboardService","keydown$","keyup$","typing$","to","typing","key$","clearTimeout","setTimeout","regexp","ControlCustomSelectComponent","labels","dropdownId","word","scrollToWord","items","index","toLowerCase","item","children","scrollTo","offsetTop","setOption","isMultiple","splice","slice","hasOption","onDropped","getLabel","v","select","$event","multiple","ControlPasswordComponent","required","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","GalleryModalComponent","mode","sliderItems","sliderIndex","toggleMode","onChange","onTween","onSelect","GALLERY_MODAL","GalleryComponent","galleryItems","click$","onOpenGallery","firstGalleryItem","gallery","Array","isArray","CssService","height$","style","documentElement","innerHeight","height","vh","setProperty","HeaderComponent","mainActive","onMainToggle","querySelectorAll","gsap","opacity","duration","stagger","each","ease","Power3","easeOut","toggle","onOpenSub","subId","onCloseSub","isSubOpen","isPrimaryHidden","showPicture","img","picture","onload","onComplete","childElementCount","HtmlPipe","_Pipe","transform","m","n","String","fromCharCode","unescapes","rx","RegExp","Pipe","MagazineDropdownComponent","FilterMode","FilterItem","change$","placeholder","values","unshift","getSelectedOption","selectedOption","hasAny","toggleActive","active","LocationService","keyOrValue","params","history","pushState","title","toString","deserialize","serialize","atob","parse","btoa","FilterService","initialParams","callback","filters","getParamsCount","locationParams","any","updateFilterStates","merge","auditTime","filterItems","skipFilter","initialCount","filteredItems","option","count","disabled","sort","a","MagazineService","all$","filters$","MagazineComponent","maxVisibleItems","visibleItems","busy","onLoad","filterService","scroll$","getBoundingClientRect","bottom","toggleFilter","clearFilter","preventDefault","stopImmediatePropagation","ModalComponent","ScrollToDirective","scrollTo$","_getContext2","result","currentTop","top","o","pow","html","scroll-behavior","Math","abs","Quad","overwrite","onUpdate","pageYOffset","scrollTop","DownloadService","download","blob","fileName","URL","createObjectURL","click","revokeObjectURL","a_","SecureDirective","tryDownloadHref","pop","ShareComponent","share","getTitle","getUrl","origin","charCodeAt","DragPoint","y","DragEvent","DragDownEvent","_DragEvent","distance","strength","speed","DragMoveEvent","_DragEvent2","DragUpEvent","_DragEvent3","DragService","getPosition","point","MouseEvent","clientX","clientY","TouchEvent","touches","pageX","pageY","down$","downEvent","originalEvent","down","move$","dismiss$","moveEvent","position","innerWidth","up$","upEvent","SliderComponent","container","wrapper","userGesture","slider$","changed$","setActiveState","change","currentSlide","current","slide","video","paused","pause","onEnded","play","autoplay","translation","dragDownEvent","dragMoveEvent","getTranslation","onDragMoveEvent","onDragUpEvent","transformX","width","offsetWidth","hasNext","navTo","hasPrev","z","coords","parseFloat","offsetHeight","items_","state","state_","SliderCaseStudyComponent","_SliderComponent","resize$","onContentOver","onContentOut","slideWidth","SliderGalleryComponent","doClose","SliderHeroComponent","pagination$","raf$","interval","animationFrameScheduler","mouse$","mouseEvent","pagination","datas","mouse","direction","direction_","SlugPipe","VirtualItem","$key","$value","_Context","even","Context","VirtualMode","VirtualStructure","_Structure","removeAttribute","tokens","getExpressionTokens","virtualFunction","iterable","gutter","containerWidth","containerHeight","cols","strategy","cachedRects","cachedInstances","cacheNodes","update$","context","updateView","total","highestHeight","getWidth","getGutter","col","left","rect","getCol","getHeight","intersect","getLeft","cachedNode","max","removeNode","removeIndex","getCols","floor","fill","updateNode","createNode","clonedNode","cloneNode","rxcompId","args","instance","makeInstance","forItemContext","parentNode","top1","bottom1","top2","bottom2","Error","expressions","virtualExpressions","keyValueMatches","indexExpressions","Structure","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"const EDGE = /(edge)/i.test(navigator.userAgent);\r\nconst TRIDENT = /(msie|trident)/i.test(navigator.userAgent);\r\nconst BLINK = (!!((window).chrome) && typeof CSS !== 'undefined' && !EDGE && !TRIDENT);\r\nconst WEBKIT = /AppleWebKit/i.test(navigator.userAgent) && !BLINK && !EDGE && !TRIDENT;\r\nconst IOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !('MSStream' in window);\r\nconst FIREFOX = /(firefox|minefield)/i.test(navigator.userAgent);\r\nconst ANDROID = /android/i.test(navigator.userAgent) && !TRIDENT;\r\nconst SAFARI = /safari/i.test(navigator.userAgent) && WEBKIT;\r\n\r\nconst mediaQueriesForWebkitCompatibility = new Set();\r\n\r\nlet mediaQueryStyleNode;\r\n\r\nexport class MediaMatcher {\r\n\r\n\tstatic matchMedia(query) {\r\n\t\tif (WEBKIT) {\r\n\t\t\tthis.createEmptyStyleRule(query);\r\n\t\t}\r\n\t\treturn this._matchMedia(query);\r\n\t}\r\n\r\n\tstatic createEmptyStyleRule(query) {\r\n\t\tif (mediaQueriesForWebkitCompatibility.has(query)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tif (!mediaQueryStyleNode) {\r\n\t\t\t\tmediaQueryStyleNode = document.createElement('style');\r\n\t\t\t\tmediaQueryStyleNode.setAttribute('type', 'text/css');\r\n\t\t\t\tif (document.head) {\r\n\t\t\t\t\tdocument.head.appendChild(mediaQueryStyleNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (mediaQueryStyleNode.sheet) {\r\n\t\t\t\t(mediaQueryStyleNode.sheet)\r\n\t\t\t\t.insertRule(`@media ${query} {.fx-query-test{ }}`, 0);\r\n\t\t\t\tmediaQueriesForWebkitCompatibility.add(query);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction noopMatchMedia(query) {\r\n\treturn {\r\n\t\tmatches: query === 'all' || query === '',\r\n\t\tmedia: query,\r\n\t\taddListener: () => {},\r\n\t\tremoveListener: () => {}\r\n\t};\r\n}\r\n\r\nMediaMatcher._matchMedia = window.matchMedia ? window.matchMedia.bind(window) : noopMatchMedia;\r\n","import { combineLatest, concat, Observable } from 'rxjs';\nimport { debounceTime, map, skip, startWith, take } from 'rxjs/operators';\nimport { MediaMatcher } from './media-matcher';\n\nexport class BreakpointState {\n\t// matches;\n\t// breakpoints;\n}\n\nclass InternalBreakpointState {\n\t// matches;\n\t// query;\n}\n\nclass Query {\n\t// query$;\n\t// mediaQueryList;\n}\n\nexport class BreakpointService {\n\n\tstatic queries_ = {};\n\n\tstatic observe$(value) {\n\t\tconst queries = Object.assign({}, value); // this.splitQueries(coerceArray(value));\n\t\tlet queries$_ = [];\n\t\tObject.keys(queries).forEach(key => {\n\t\t\tconst query = queries[key];\n\t\t\tconst group = query.split('and').map(query => query.trim());\n\t\t\tgroup.forEach(query => queries$_.push(this.registerQuery$_(query).query$));\n\t\t\tqueries[key] = { query, group };\n\t\t});\n\t\t// let queries$_ = Object.keys(queries).map(key => this.registerQuery$_(queries[key]).query$);\n\t\tqueries$_ = combineLatest(...queries$_);\n\t\tlet queries$ = concat(\n\t\t\tqueries$_.pipe(take(1)),\n\t\t\tqueries$_.pipe(skip(1), debounceTime(0))\n\t\t);\n\t\treturn queries$.pipe(\n\t\t\tmap((breakpoints) => {\n\t\t\t\tconst response = {};\n\t\t\t\tbreakpoints.forEach(b => {\n\t\t\t\t\tObject.keys(queries).forEach(key => {\n\t\t\t\t\t\tconst query = queries[key];\n\t\t\t\t\t\tconst match = query.group.reduce((p, c) => {\n\t\t\t\t\t\t\treturn p && (b.query !== c || b.matches);\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t\tresponse[key] = match;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\tconst response = {\n\t\t\t\t\tmatches: false,\n\t\t\t\t\tbreakpoints: {},\n\t\t\t\t};\n\t\t\t\tbreakpoints.forEach((state) => {\n\t\t\t\t\tresponse.matches = response.matches || state.matches;\n\t\t\t\t\tresponse.breakpoints[state.query] = state.matches;\n\t\t\t\t});\n\t\t\t\tconsole.log(breakpoints, response, queries);\n\t\t\t\t*/\n\t\t\t\treturn response;\n\t\t\t}),\n\t\t);\n\t}\n\n\t/*\n\tstatic isMatched$(value) {\n\t\tconst queries = this.splitQueries(coerceArray(value));\n\t\treturn queries.some(mediaQuery => this.registerQuery$_(mediaQuery).mediaQueryList.matches);\n\t}\n\t*/\n\n\tstatic has(query) {\n\t\treturn this.queries_[query] !== undefined;\n\t}\n\n\tstatic get(query) {\n\t\treturn this.queries_[query];\n\t}\n\n\tstatic set(query, value) {\n\t\treturn this.queries_[query] = value;\n\t}\n\n\tstatic registerQuery$_(key) {\n\t\tif (this.has(key)) {\n\t\t\treturn this.get(key);\n\t\t}\n\t\tconst mediaQueryList = MediaMatcher.matchMedia(key);\n\t\tconst query$ = new Observable((observer) => {\n\t\t\tconst handler = (e) => observer.next(e);\n\t\t\tmediaQueryList.addListener(handler);\n\t\t\treturn () => {\n\t\t\t\tmediaQueryList.removeListener(handler);\n\t\t\t};\n\t\t}).pipe(\n\t\t\tstartWith(mediaQueryList),\n\t\t\tmap((nextMediaQueryList) => ({ query: key, matches: nextMediaQueryList.matches })),\n\t\t);\n\t\tconst output = { query$: query$, mediaQueryList };\n\t\tthis.set(key, output);\n\t\treturn output;\n\t}\n\n\tstatic splitQueries(queries) {\n\t\treturn queries.map((query) => query.split(','))\n\t\t\t.reduce((a1, a2) => a1.concat(a2))\n\t\t\t.map(query => query.trim());\n\t}\n}\n","import { decodeBase64, decodeJson, encodeBase64, encodeJson, Serializer, WINDOW } from 'rxcomp';\r\n\r\nexport default class StorageService {\r\n\tstatic supported = false;\r\n\tstatic encode(decoded) {\r\n\t\tlet encoded = Serializer.encode(decoded, [encodeJson, encodeURIComponent, encodeBase64]) || null;\r\n\t\treturn encoded;\r\n\t}\r\n\tstatic decode(encoded) {\r\n\t\tlet decoded = Serializer.decode(encoded, [decodeBase64, decodeURIComponent, decodeJson]);\r\n\t\treturn decoded;\r\n\t}\r\n\tstatic isSupported(type) {\r\n\t\tlet flag = false;\r\n\t\tlet storage;\r\n\t\ttry {\r\n\t\t\tstorage = WINDOW[type];\r\n\t\t\tconst x = '__storage_test__';\r\n\t\t\tstorage.setItem(x, x);\r\n\t\t\tstorage.removeItem(x);\r\n\t\t\tflag = true;\r\n\t\t} catch (error) {\r\n\t\t\tflag = error instanceof DOMException && (\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.code === 22 ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.code === 1014 ||\r\n\t\t\t\t// test name field too, because code might not be present\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.name === 'QuotaExceededError' ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n\t\t\t\t// acknowledge QuotaExceededError only if there's something already stored\r\n\t\t\t\tBoolean(storage && storage.length !== 0);\r\n\t\t}\r\n\t\treturn flag;\r\n\t}\r\n}\r\n","import { ReplaySubject } from 'rxjs';\r\nimport StorageService from './storage.service';\r\n\r\nexport default class SessionStorageService extends StorageService {\r\n\tstatic items$ = new ReplaySubject(1);\r\n\tstatic clear() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tsessionStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic delete(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tsessionStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic exist(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn sessionStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tstatic get(name) {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\tstatic set(name, value) {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\tstatic getRaw(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = sessionStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tstatic setRaw(name, value) {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tsessionStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic toArray() {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\tstatic toRawArray() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(sessionStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tstatic isSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('sessionStorage');\r\n\t}\r\n}\r\n","import SessionStorageService from '../storage/session-storage.service';\r\n\r\nexport class CoverService {\r\n\r\n\tstatic isIndex() {\r\n\t\tconst validPaths = ['', '/', '/it/', '/en/'];\r\n\t\treturn validPaths.indexOf(window.location.pathname) !== -1;\r\n\t}\r\n\r\n\tstatic shouldShowCover() {\r\n\t\tlet flag = false;\r\n\t\tconst showCover = SessionStorageService.get('showCover');\r\n\t\tflag = CoverService.isIndex() && !showCover;\r\n\t\tSessionStorageService.set('showCover', true);\r\n\t\treturn flag;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { BreakpointService } from './breakpoint/breakpoint.service';\r\nimport { CoverService } from './cover/cover.service';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\r\n\t\tthis.showCover = CoverService.shouldShowCover();\r\n\r\n\t\tBreakpointService.observe$({\r\n\t\t\tisMobile: '(max-width: 767px)'\r\n\t\t}).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(results => {\r\n\t\t\tconsole.log('AppComponent.BreakpointService.results', results);\r\n\t\t\tthis.isMobile = results.isMobile;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonSkipCover(event) {\r\n\t\tconsole.log('AppComponent.onSkipCover');\r\n\t\tthis.showCover = false;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonMenuToggle(opened) {\r\n\t\tconsole.log('AppComponent.onMenuToggle', opened);\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\tfilter(entry => entry !== undefined),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node, isIntersecting: true });\r\n\t\t}\r\n\t}\r\n\r\n\tstatic firstIntersection$(node) {\r\n\t\treturn this.intersection$(node).pipe(\r\n\t\t\tfilter(entry => entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\tfirst(),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearStaggerDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear-stagger');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearStaggerDirective.meta = {\r\n\tselector: '[appear-stagger]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.firstIntersection$(node).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearDirective.meta = {\r\n\t// selector: '[appear],.row,.listing--series,.listing--products,.listing--cards,.listing--news,.listing--downloads',\r\n\tselector: '.picture',\r\n};\r\n","export const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const STATIC = NODE ? false : (window && (window.location.port === '41234' || window.location.host === 'actarian.github.io' || window.location.host === 'stipa.herokuapp.com'));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'stipa',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: (DEVELOPMENT && !STATIC) ? '/Client/docs/api' : './api',\r\n};\r\n\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\tconsole.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n\r\nexport class Environment {\r\n\r\n\tget href() {\r\n\t\tif (window.location.host.indexOf('herokuapp') !== -1) {\r\n\t\t\treturn 'https://raw.githubusercontent.com/actarian/stipa/master/docs/';\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tget host() {\r\n\t\tlet host = window.location.host.replace('127.0.0.1', '192.168.1.2');\r\n\t\tif (host.substr(host.length - 1, 1) === '/') {\r\n\t\t\thost = host.substr(0, host.length - 1);\r\n\t\t}\r\n\t\treturn `${window.location.protocol}//${host}${BASE_HREF}`;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport const environment = new Environment({\r\n\tport: 5000,\r\n});\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tmethod = url.indexOf('.json') !== -1 ? 'GET' : method;\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\tlet qstring = methods.indexOf(method) !== -1 ? Object.keys(data).map(function(key) {\r\n\t\t    return key + '=' + encodeURI(data[key])\r\n\t\t}).join('&') : undefined;\r\n\t\treturn from(fetch(url, url.indexOf('.json') !== -1 ? {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t} : {\r\n\t\t    method: method,\r\n\t\t    headers: {\r\n\t\t        'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t    },\r\n\t\t    body: qstring\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\treturn response[format]().then(json => {\r\n\t\t\t\tresponse_.data = json;\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/*\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { getApiUrl } from '../environment';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = window.currentLanguage || 'it';\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url), data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url));\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url), data);\r\n\t}\r\n\r\n\tstatic staticGet$(url, data, format) {\r\n\t\treturn super.get$(getApiUrl(url, true), data, format);\r\n\t}\r\n\r\n\tstatic staticDelete$(url) {\r\n\t\treturn super.delete$(getApiUrl(url, true));\r\n\t}\r\n\r\n\tstatic staticPost$(url, data) {\r\n\t\treturn super.post$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPut$(url, data) {\r\n\t\treturn super.put$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n\tstatic staticPatch$(url, data) {\r\n\t\treturn super.patch$(getApiUrl(url, true), data);\r\n\t}\r\n\r\n}\r\n","import { ReplaySubject } from 'rxjs';\r\nimport StorageService from './storage.service';\r\n\r\nexport default class LocalStorageService extends StorageService {\r\n\tstatic items$ = new ReplaySubject(1);\r\n\tstatic clear() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic delete(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic exist(name) {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn localStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tstatic get(name) {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\tstatic set(name, value) {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\tstatic getRaw(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = localStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tstatic setRaw(name, value) {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tlocalStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\tstatic toArray() {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\tstatic toRawArray() {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(localStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tstatic isSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('localStorage');\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport LocalStorageService from '../storage/local-storage.service';\r\n\r\nexport class User {\r\n\r\n\tget avatar() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default class UserService {\r\n\r\n\tstatic getCurrentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\t//return ApiService.staticGet$(`/user/me`).pipe(\r\n\t\treturn ApiService.get$(`/user/me`).pipe(\r\n\t\t\t// map((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tmap((response) => this.mapUser(response.data, response.static)),\r\n\t\t\tcatchError(error => of (null)),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/register`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/login`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn ApiService.staticPost$(`/user/logout`).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'logout')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic retrieve$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/forget`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tstatic update$(payload) {\r\n\t\treturn ApiService.staticPost$(`/user/updateprofile`, payload).pipe(\r\n\t\t\tmap((response) => this.mapStatic__(response.data, response.static, 'register')),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic mapStatic__(user, isStatic, action = 'me') {\r\n\t\tif (!isStatic) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic fake(user) {\r\n\t\tuser.firstName = user.firstName || 'Jhon';\r\n\t\tuser.lastName = user.lastName || 'Appleseed';\r\n\t\treturn user;\r\n\t}\r\n\r\n\tstatic mapUser(user, isStatic) {\r\n\t\treturn isStatic ? UserService.fake(new User(user)) : new User(user);\r\n\t}\r\n\r\n\tstatic mapUsers(users, isStatic) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x, isStatic)) : [];\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$_ = new BehaviorSubject(null);\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthForgotComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthForgotComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthForgotComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.retrieve$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.onSubmit', response);\r\n\t\t\t\t\tthis.sent.next(true);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthForgotComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthForgotComponent.meta = {\r\n\tselector: '[auth-forgot]',\r\n\toutputs: ['sent', 'login', 'register'],\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.views = {\r\n\t\t\tSIGN_IN: 1,\r\n\t\t\tSIGN_UP: 2,\r\n\t\t\tFORGOTTEN: 3,\r\n\t\t};\r\n\t\tthis.view = node.hasAttribute('view') ? parseInt(node.getAttribute('view')) : this.views.SIGN_IN;\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\t// console.log('AuthComponent.onForgot');\r\n\t\tthis.view = this.views.FORGOTTEN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('AuthComponent.onLogin');\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('AuthComponent.onRegister');\r\n\t\tthis.view = this.views.SIGN_UP;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('AuthComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('AuthComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.auth;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgottenSent(email) {\r\n\t\t/*\r\n\t\tconsole.log('AuthComponent.onForgottenSent', email);\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nAuthComponent.meta = {\r\n\tselector: '[auth]',\r\n\tinputs: ['auth']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\nimport AuthComponent from './auth.component';\r\n\r\nexport default class AuthModalComponent extends AuthComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('AuthModalComponent.onInit', data);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('AuthModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('AuthModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\t// console.log('AuthModalComponent.onDestroy');\r\n\t}\r\n\t*/\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nAuthModalComponent.meta = {\r\n\tselector: '[auth-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tinterests: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('AuthSigninComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: 'password',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSigninComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSigninComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Login', this.form.value)\r\n\t\t\tUserService.login$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.signIn.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSigninComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot() {\r\n\t\tthis.forgot.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSigninComponent.meta = {\r\n\tselector: '[auth-signin]',\r\n\toutputs: ['signIn', 'forgot', 'register'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class AuthSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t    roles: [],\r\n            countries: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\trole: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tnewsletter: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n            action: window.formaction\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('WorkWithUsComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\tcountry: 'Italy',\r\n\t\t\trole: role,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('AuthSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('AuthSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('AuthSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.form.submitted = false;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n}\r\n\r\nAuthSignupComponent.meta = {\r\n\tselector: '[auth-signup]',\r\n\t//outputs: ['signUp', 'login'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsSimpleComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfullName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t// privacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst role = this.controls.role.options.length ? this.controls.role.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfullName: 'Jhon Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t// privacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/contacts', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsSimpleComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsSimpleComponent.meta = {\r\n\tselector: '[contacts-simple]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ContactsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\treason: [],\r\n\t\t\tfirstCategory: [],\r\n\t\t\tsecondCategory: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfullName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\treason: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfirstCategory: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tsecondCategory: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tcontrols.reason.options = data.reason;\r\n\t\tcontrols.firstCategory.options = data.firstCategory;\r\n\t\tcontrols.secondCategory.options = data.secondCategory;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst reason = this.controls.reason.options.length ? this.controls.reason.options[0].id : null;\r\n\t\tconst firstCategory = this.controls.firstCategory.options.length ? this.controls.firstCategory.options[0].id : null;\r\n\t\tconst secondCategory = this.controls.secondCategory.options.length ? this.controls.secondCategory.options[0].id : null;\r\n\t\tthis.form.patch({\r\n\t\t\tfullName: 'Jhon Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\treason: reason,\r\n\t\t\tfirstCategory: firstCategory,\r\n\t\t\tsecondCategory: secondCategory,\r\n\t\t\tmessage: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/contacts', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'formType': 'Contacts'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t*/\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ContactsComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nContactsComponent.meta = {\r\n\tselector: '[contacts]',\r\n\tinputs: ['flag']\r\n};\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" [formControlName]=\"name\" />\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<errors-component *if=\"control.validators.length\" [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent } from 'rxjs';\r\nimport { filter, map, shareReplay } from 'rxjs/operators';\r\n\r\nexport default class KeyboardService {\r\n\r\n\tstatic keydown$() {\r\n\t\treturn fromEvent(window, 'keydown').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\treturn fromEvent(window, 'keyup').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tlet typing = '',\r\n\t\t\tto;\r\n\t\treturn this.key$().pipe(\r\n\t\t\tmap(key => {\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t}\r\n\t\t\t\ttyping += key;\r\n\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\ttyping = '';\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn typing;\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tconst regexp = /\\w/;\r\n\t\treturn this.keydown$().pipe(\r\n\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\tmap(event => event.key),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tsetOption(item) {\r\n\t\tthis.control.value = item.id;\r\n\t\t// DropdownDirective.dropdown$.next(null);\r\n\t}\r\n\t*/\r\n\r\n\tsetOption(item) {\r\n\t\tconsole.log('setOption', item, this.isMultiple);\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tthis.control.value = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tthis.control.value = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log($event);\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\t/*\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.add('dropped');\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tonClickOutside(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.remove('dropped');\r\n\t}\r\n\t*/\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\tinputs: ['control', 'label', 'multiple', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"getLabel()\"></span>\r\n            <input type=\"text\" style=\"display:none\" class=\"control--select\" [formControl]=\"control\" [formControlName]=\"name\" />\r\n\t\t\t<svg class=\"icon caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t<li *for=\"let item of control.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n\t/*  (click)=\"onClick($event)\" (clickOutside)=\"onClickOutside($event)\" */\r\n\t/*  <!-- <div class=\"dropdown\" [class]=\"{ dropped: dropped }\"> --> */\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [formControlName]=\"name\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'name'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [innerHTML]=\"label\" rows=\"6\" [formControlName]=\"name\"></textarea>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nexport default class GalleryModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.mode = 'slider';\r\n\t\tconst { parentInstance, node } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = this.data = parentInstance.modal.data;\r\n\t\t\tthis.sliderItems = data.items;\r\n\t\t\tthis.sliderIndex = data.index;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode = this.mode === 'slider' ? 'grid' : 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonChange(event) {\r\n\t\t// console.log('onChange', event);\r\n\t}\r\n\r\n\tonTween(event) {\r\n\t\t// console.log('onTween', event);\r\n\t}\r\n\r\n\tonSelect(index) {\r\n\t\tthis.sliderIndex = index;\r\n\t\tthis.mode = 'slider';\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nGalleryModalComponent.meta = {\r\n\tselector: '[gallery-modal]'\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { BASE_HREF } from '../environment';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst GALLERY_MODAL = BASE_HREF + 'gallery-modal.html';\r\n\r\nexport default class GalleryComponent extends Component {\r\n\r\n\tget galleryItems() {\r\n\t\tif (typeof this.gallery === 'string') {\r\n\t\t\treturn [this.gallery];\r\n\t\t} else if (Array.isArray(this.gallery)) {\r\n\t\t\treturn this.gallery;\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tget firstGalleryItem() {\r\n\t\tconst items = this.galleryItems;\r\n\t\tif (items.length) {\r\n\t\t\treturn items[0];\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.galleryItems.forEach(item => {\r\n\t\t\tif (GalleryComponent.items.indexOf(item) === -1) {\r\n\t\t\t\tGalleryComponent.items.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => this.onOpenGallery(event));\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst {node} = getContext(this);\r\n\t\treturn fromEvent(node, 'click');\r\n\t}\r\n\r\n\tonOpenGallery(event) {\r\n\t\tconst items = GalleryComponent.items;\r\n\t\tconst index = items.indexOf(this.firstGalleryItem);\r\n\t\t// console.log('GalleryComponent.onOpenGallery', this.gallery, items, index);\r\n\t\tModalService.open$({ src: GALLERY_MODAL, data: { items, index } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// this.pushChanges();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nGalleryComponent.items = [];\r\n\r\nGalleryComponent.meta = {\r\n\tselector: '[gallery]',\r\n\tinputs: ['gallery']\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\n// import UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.mainActive = false;\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\tconsole.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t}\r\n\r\n\tonMainToggle() {\r\n\t\tthis.mainActive = !this.mainActive;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.nav--primary-menu > li'));\r\n\t\tgsap.to(items, {\r\n\t\t\topacity: this.mainActive ? 1 : 0,\r\n\t\t\tduration: 0.35,\r\n\t\t\tstagger: {\r\n\t\t\t\teach: 0.05,\r\n\t\t\t\tease: Power3.easeOut\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t\tthis.toggle.next(this.mainActive);\r\n\t}\r\n\r\n\tonOpenSub(subId) {\r\n\t\tthis.subId = subId;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonCloseSub(subId) {\r\n\t\tif (this.subId === subId) {\r\n\t\t\tthis.subId = null;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tisSubOpen(subId) {\r\n\t\treturn this.subId === subId;\r\n\t}\r\n\r\n\tisPrimaryHidden() {\r\n\t\treturn this.subId != null;\r\n\t}\r\n\r\n\tshowPicture(src) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst picture = node.querySelector('.main-menu__picture');\r\n\t\tlet img;\r\n\t\tif (src) {\r\n\t\t\timg = document.createElement('img');\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tpicture.appendChild(img);\r\n\t\t\t\tgsap.set(img, { opacity: 0 });\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 1,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 1) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\timg.src = src;\r\n\t\t} else {\r\n\t\t\timg = picture.querySelector('img');\r\n\t\t\tif (img) {\r\n\t\t\t\tgsap.to(img, {\r\n\t\t\t\t\topacity: 0,\r\n\t\t\t\t\tduration: 0.35,\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\twhile(picture.childElementCount > 0) {\r\n\t\t\t\t\t\t\tpicture.removeChild(picture.children[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header',\r\n\toutputs: ['toggle']\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\n\r\nexport default class MagazineDropdownComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t}\r\n\r\n}\r\n\r\nMagazineDropdownComponent.meta = {\r\n\tselector: '[magazine-dropdown]',\r\n\tinputs: ['label', 'filter'],\r\n\ttemplate: /* html */ `\r\n\t\t<span class=\"text\" [innerHTML]=\"label\"></span>\r\n\t\t<span class=\"btn--dropdown\" [dropdown]=\"dropdownId\">\r\n\t\t\t<span [innerHTML]=\"filter.label\"></span> <svg class=\"filter\"><use xlink:href=\"#filter\"></use></svg>\r\n\t\t\t<!-- dropdown -->\r\n\t\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t\t<div class=\"category\" [innerHTML]=\"filter.label\"></div>\r\n\t\t\t\t<ul class=\"nav--dropdown\">\r\n\t\t\t\t\t<li *for=\"let item of filter.options\">\r\n\t\t\t\t\t\t<span [class]=\"{ active: filter.has(item), disabled: item.disabled }\" (click)=\"filter.set(item)\" [innerHTML]=\"item.label\"></span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</span>\r\n\t`\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tget empty() {\r\n\t\treturn this.values.length === 0;\r\n\t}\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thasAny() {\r\n\t\treturn this.values.length > 0;\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.values = [];\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.clear', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n}\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\tthis.updateFilterStates(filters, items, true);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items, initialCount) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = initialCount ? items : this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\tinitialCount ? option.initialCount = count : option.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t\tif (initialCount) {\r\n\t\t\t\tfilter.options.sort((a, b) => b.initialCount - a.initialCount);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { map } from 'rxjs/operators';\r\nimport ApiService from '../api/api.service';\r\nimport { STATIC } from '../environment';\r\n\r\nexport default class MagazineService {\r\n\r\n\tstatic all$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/magazine/all').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/magazine/all').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic filters$() {\r\n\t\tif (STATIC) {\r\n\t\t\treturn ApiService.staticGet$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/magazine/filters').pipe(map(response => response.data));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport MagazineService from './magazine.service';\r\n\r\nconst ITEMS_PER_PAGE = 9;\r\n\r\nexport default class MagazineComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.items = [];\r\n\t\tthis.filters = {};\r\n\t\tthis.busy = true;\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\tthis.busy = false;\r\n\t\t\tthis.items = data[0];\r\n\t\t\tthis.filters = data[1];\r\n\t\t\tthis.onLoad();\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonLoad() {\r\n\t\tconst items = this.items;\r\n\t\tconst filters = this.filters;\r\n\t\tObject.keys(filters).forEach(key => {\r\n\t\t\tfilters[key].mode = FilterMode.SELECT;\r\n\t\t});\r\n\t\tconst initialParams = {};\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'category':\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item[key] === value;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.maxVisibleItems = ITEMS_PER_PAGE;\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (this.items.length > this.visibleItems.length && !this.busy) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += ITEMS_PER_PAGE;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tMagazineService.all$(),\r\n\t\t\tMagazineService.filters$(),\r\n\t\t]);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nMagazineComponent.meta = {\r\n\tselector: '[magazine]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, map, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/stipa/auth-modal.html' : '/stipa/auth-modal.html';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = node.getAttribute('href');\r\n\t\tHttpService.get$(href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t\tmap(response => response.data),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log('SecureDirective.tryDownloadHref', error);\r\n\t\t\tthis.onLogin();\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tconsole.log('SecureDirective.onLogin');\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class ShareComponent extends Component {\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.getUrl()}&media=&description=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.getUrl()}&title=${this.getTitle()}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.getTitle()}%20${this.getUrl()}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.getUrl()}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.getTitle()}&body=${this.getUrl()}`;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconsole.log('ShareComponent.onInit', this.share, this.title);\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.title);\r\n\t}\r\n\r\n\tgetTitle() {\r\n\t\tlet title = this.title ? this.title : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tgetUrl() {\r\n\t\tlet url = this.share;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareComponent.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'title'],\r\n\ttemplate: /* html */`\r\n\t<ul class=\"nav--share\">\r\n\t\t<li>\r\n\t\t\t<a [href]=\"facebookUrl\" target=\"_blank\"><svg class=\"facebook\"><use xlink:href=\"#facebook\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"twitterUrl\" target=\"_blank\"><svg class=\"twitter\"><use xlink:href=\"#twitter\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"pinterestUrl\" target=\"_blank\"><svg class=\"pinterest\"><use xlink:href=\"#pinterest\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"linkedInUrl\" target=\"_blank\"><svg class=\"linkedin\"><use xlink:href=\"#linkedin\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<!--\r\n\t\t<li>\r\n\t\t\t<a [href]=\"whatsappUrl\" target=\"_blank\"><svg class=\"whatsapp\"><use xlink:href=\"#whatsapp\"></use></svg></a>\r\n\t\t</li>\r\n\t\t<li>\r\n\t\t\t<a [href]=\"mailToUrl\"><svg class=\"email\"><use xlink:href=\"#email\"></use></svg></a>\r\n\t\t</li>\r\n\t\t-->\r\n\t</ul>\r\n\t`,\r\n};\r\n","import { fromEvent, merge, ReplaySubject, Subject } from 'rxjs';\r\nimport { filter, map, startWith, switchMap, takeUntil } from 'rxjs/operators';\r\n\r\nexport class DragPoint {\r\n\tconstructor() {\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t}\r\n}\r\n\r\nexport class DragEvent {\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class DragDownEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragMoveEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.distance = new DragPoint();\r\n\t\tthis.strength = new DragPoint();\r\n\t\tthis.speed = new DragPoint();\r\n\t}\r\n}\r\n\r\nexport class DragUpEvent extends DragEvent {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t}\r\n}\r\n\r\nexport default class DragService {\r\n\r\n\tstatic getPosition(event, point) {\r\n\t\tif (event instanceof MouseEvent) {\r\n\t\t\tpoint ? (\r\n\t\t\t\tpoint.x = event.clientX,\r\n\t\t\t\tpoint.y = event.clientY\r\n\t\t\t) : point = {\r\n\t\t\t\tx: event.clientX,\r\n\t\t\t\ty: event.clientY\r\n\t\t\t};\r\n\t\t} else if (event instanceof TouchEvent) {\r\n\t\t\tif (event.touches.length > 0) {\r\n\t\t\t\tpoint ? (\r\n\t\t\t\t\tpoint.x = event.touches[0].pageX,\r\n\t\t\t\t\tpoint.y = event.touches[0].pageY\r\n\t\t\t\t) : point = {\r\n\t\t\t\t\tx: event.touches[0].pageX,\r\n\t\t\t\t\ty: event.touches[0].pageY\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn point;\r\n\t}\r\n\r\n\tstatic down$(target, events$) {\r\n\t\tlet downEvent;\r\n\t\treturn merge(\r\n\t\t\tfromEvent(target, 'mousedown'),\r\n\t\t\tfromEvent(target, 'touchstart')\r\n\t\t).pipe(\r\n\t\t\tmap((event) => {\r\n\t\t\t\tdownEvent = downEvent || new DragDownEvent();\r\n\t\t\t\tdownEvent.node = target;\r\n\t\t\t\tdownEvent.target = event.target;\r\n\t\t\t\tdownEvent.originalEvent = event;\r\n\t\t\t\tdownEvent.down = this.getPosition(event, downEvent.down);\r\n\t\t\t\tif (downEvent.down) {\r\n\t\t\t\t\tdownEvent.distance = new DragPoint();\r\n\t\t\t\t\tdownEvent.strength = new DragPoint();\r\n\t\t\t\t\tdownEvent.speed = new DragPoint();\r\n\t\t\t\t\tevents$.next(downEvent);\r\n\t\t\t\t\treturn downEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tfilter(event => event !== undefined),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic move$(target, events$, dismiss$, downEvent) {\r\n\t\tlet moveEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mousemove' : 'touchmove').pipe(\r\n\t\t\tstartWith(downEvent),\r\n\t\t\tmap((event) => {\r\n\t\t\t\tmoveEvent = moveEvent || new DragMoveEvent();\r\n\t\t\t\tmoveEvent.node = target;\r\n\t\t\t\tmoveEvent.target = event.target;\r\n\t\t\t\tmoveEvent.originalEvent = event;\r\n\t\t\t\tmoveEvent.position = this.getPosition(event, moveEvent.position);\r\n\t\t\t\tconst dragging = downEvent.down !== undefined && moveEvent.position !== undefined;\r\n\t\t\t\tif (dragging) {\r\n\t\t\t\t\tmoveEvent.distance.x = moveEvent.position.x - downEvent.down.x;\r\n\t\t\t\t\tmoveEvent.distance.y = moveEvent.position.y - downEvent.down.y;\r\n\t\t\t\t\tmoveEvent.strength.x = moveEvent.distance.x / window.innerWidth * 2;\r\n\t\t\t\t\tmoveEvent.strength.y = moveEvent.distance.y / window.innerHeight * 2;\r\n\t\t\t\t\tmoveEvent.speed.x = downEvent.speed.x + (moveEvent.strength.x - downEvent.strength.x) * 0.1;\r\n\t\t\t\t\tmoveEvent.speed.y = downEvent.speed.y + (moveEvent.strength.y - downEvent.strength.y) * 0.1;\r\n\t\t\t\t\tdownEvent.distance.x = moveEvent.distance.x;\r\n\t\t\t\t\tdownEvent.distance.y = moveEvent.distance.y;\r\n\t\t\t\t\tdownEvent.speed.x = moveEvent.speed.x;\r\n\t\t\t\t\tdownEvent.speed.y = moveEvent.speed.y;\r\n\t\t\t\t\tdownEvent.strength.x = moveEvent.strength.x;\r\n\t\t\t\t\tdownEvent.strength.y = moveEvent.strength.y;\r\n\t\t\t\t\tevents$.next(moveEvent);\r\n\t\t\t\t\treturn moveEvent;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic up$(target, events$, dismiss$, downEvent) {\r\n\t\tlet upEvent;\r\n\t\treturn fromEvent(document, downEvent.originalEvent instanceof MouseEvent ? 'mouseup' : 'touchend').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tupEvent = upEvent || new DragUpEvent();\r\n\t\t\t\tevents$.next(upEvent);\r\n\t\t\t\tdismiss$.next();\r\n\t\t\t\t// console.log(downEvent.distance);\r\n\t\t\t\tif (Math.abs(downEvent.distance.x) > 10) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t}\r\n\t\t\t\treturn upEvent;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic events$(target) {\r\n\t\ttarget = target || document;\r\n\t\tconst events$ = new ReplaySubject(1);\r\n\t\tconst dismiss$ = new Subject();\r\n\t\treturn this.down$(target, events$).pipe(\r\n\t\t\tswitchMap((downEvent) => merge(\r\n\t\t\t\tthis.move$(target, events$, dismiss$, downEvent),\r\n\t\t\t\tthis.up$(target, events$, dismiss$, downEvent),\r\n\t\t\t).pipe(\r\n\t\t\t\ttakeUntil(dismiss$),\r\n\t\t\t)),\r\n\t\t\tswitchMap(() => events$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport DragService, { DragDownEvent, DragMoveEvent, DragUpEvent } from '../drag/drag.service';\r\n\r\nexport default class SliderComponent extends Component {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\t// console.log('current');\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t\t// this.state.current = Math.min(current, items ? items.length - 1 : 0);\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.container = node;\r\n\t\tthis.wrapper = node.querySelector('.slider__wrapper');\r\n\t\tif (this.items.length === 0) {\r\n\t\t\tconst items = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\t\tthis.items = items;\r\n\t\t}\r\n\t\t// console.log('SliderComponent.onInit', this.items);\r\n\t\tthis.userGesture = false;\r\n\t\t// this.userGesture$ = new Subject();\r\n\t\tsetTimeout(() => {\r\n\t\t\t// this.change.next(this.current);\r\n\t\t\t/*\r\n\t\t\tgsap.set(this.wrapper, {\r\n\t\t\t\tx: -100 * this.current + '%',\r\n\t\t\t});\r\n\t\t\t*/\r\n\t\t\tthis.slider$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('dragService', event);\r\n\t\t\t});\r\n\t\t}, 1);\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t\t/*\r\n\t\tthis.autoplay$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(() => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tif (this.to) {\r\n\t\t\tclearTimeout(this.to);\r\n\t\t\tthis.to = null;\r\n\t\t}\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tlet currentSlide;\r\n\t\tslides.forEach((slide, i) => {\r\n\t\t\tif (i === current) {\r\n\t\t\t\tcurrentSlide = slide;\r\n\t\t\t\tslide.classList.add('active');\r\n\t\t\t} else {\r\n\t\t\t\tslide.classList.remove('active');\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst videos = Array.prototype.slice.call(node.querySelectorAll('video'));\r\n\t\tvideos.forEach(video => {\r\n\t\t\tif (!video.paused) {\r\n\t\t\t\tvideo.pause();\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (currentSlide) {\r\n\t\t\tconst video = currentSlide.querySelector('video');\r\n\t\t\tif (video) {\r\n\t\t\t\tconst onEnded = () => {\r\n\t\t\t\t\t// console.log(video, 'onEnded');\r\n\t\t\t\t\tvideo.removeEventListener('ended', onEnded);\r\n\t\t\t\t\tif (!this.userGesture) {\r\n\t\t\t\t\t\tthis.current = (this.current + 1) % this.items.length;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tvideo.addEventListener('ended', onEnded);\r\n\t\t\t\tvideo.play();\r\n\t\t\t} else {\r\n\t\t\t\tconst autoplay = typeof this.autoplay === 'number' ? this.autoplay : 4000;\r\n\t\t\t\tif (!this.userGesture) {\r\n\t\t\t\t\tthis.to = setTimeout(() => {\r\n\t\t\t\t\t\tthis.current = (this.current + 1) % this.items.length;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t}, autoplay);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('SliderComponent.setActiveState', current, currentSlide);\r\n\t}\r\n\r\n\tslider$() {\r\n\t\tlet translation, dragDownEvent, dragMoveEvent;\r\n\t\treturn DragService.events$(this.wrapper).pipe(\r\n\t\t\ttap((event) => {\r\n\t\t\t\tif (event instanceof DragDownEvent) {\r\n\t\t\t\t\ttranslation = this.getTranslation(this.wrapper, this.container);\r\n\t\t\t\t\tdragDownEvent = event;\r\n\t\t\t\t} else if (event instanceof DragMoveEvent) {\r\n\t\t\t\t\tdragMoveEvent = this.onDragMoveEvent(dragDownEvent, event, translation);\r\n\t\t\t\t\t// console.log('DragMoveEvent');\r\n\t\t\t\t} else if (event instanceof DragUpEvent) {\r\n\t\t\t\t\tif (dragMoveEvent) {\r\n\t\t\t\t\t\tthis.container.classList.remove('dragging');\r\n\t\t\t\t\t\tthis.wrapper.style.transform = null;\r\n\t\t\t\t\t\tthis.onDragUpEvent(dragDownEvent, dragMoveEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log('DragUpEvent');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tautoplay$() {\r\n\t\tif (this.autoplay) {\r\n\t\t\tconst autoplay = typeof this.autoplay === 'number' ? this.autoplay : 4000;\r\n\t\t\treturn interval(autoplay).pipe(\r\n\t\t\t\ttakeUntil(this.userGesture$),\r\n\t\t\t\ttap(() => {\r\n\t\t\t\t\tthis.current = (this.current + 1) % this.items.length;\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tonDragMoveEvent(dragDownEvent, dragMoveEvent, translation) {\r\n\t\tthis.container.classList.add('dragging');\r\n\t\tconst transformX = translation.x + dragMoveEvent.distance.x;\r\n\t\tthis.wrapper.style.transform = `translate3d(${transformX}px, ${0}px, ${0}px)`;\r\n\t\treturn dragMoveEvent;\r\n\t}\r\n\r\n\tonDragUpEvent(dragDownEvent, dragMoveEvent) {\r\n\t\tconst width = this.container.offsetWidth;\r\n\t\tif (dragMoveEvent.distance.x * -1 > width * 0.25 && this.hasNext()) {\r\n\t\t\tthis.navTo(this.current + 1);\r\n\t\t} else if (dragMoveEvent.distance.x * -1 < width * -0.25 && this.hasPrev()) {\r\n\t\t\tthis.navTo(this.current - 1);\r\n\t\t} else {\r\n\t\t\tthis.wrapper.style.transform = `translate3d(${-100 * this.current}%, 0, 0)`;\r\n\t\t\t// this.navTo(this.current);\r\n\t\t}\r\n\t\t// this.navTo(current);\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tcurrent = (current > 0 ? current : this.items.length + current) % this.items.length;\r\n\t\tthis.current = current;\r\n\t\tthis.userGesture = true;\r\n\t\t// this.userGesture$.next();\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\treturn this.current - 1 >= 0;\r\n\t}\r\n\r\n\thasNext() {\r\n\t\treturn this.current + 1 < this.items.length;\r\n\t}\r\n\r\n\tgetTranslation(node, container) {\r\n\t\tlet x = 0,\r\n\t\t\ty = 0,\r\n\t\t\tz = 0;\r\n\t\tconst transform = node.style.transform;\r\n\t\tif (transform) {\r\n\t\t\tconst coords = transform.split('(')[1].split(')')[0].split(',');\r\n\t\t\tx = parseFloat(coords[0]);\r\n\t\t\ty = parseFloat(coords[1]);\r\n\t\t\tz = parseFloat(coords[2]);\r\n\t\t\tx = coords[0].indexOf('%') !== -1 ? x *= container.offsetWidth * 0.01 : x;\r\n\t\t\ty = coords[1].indexOf('%') !== -1 ? y *= container.offsetHeight * 0.01 : y;\r\n\t\t}\r\n\t\treturn { x, y, z };\r\n\t}\r\n}\r\n\r\nSliderComponent.meta = {\r\n\tselector: '[slider]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderCaseStudyComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -this.slideWidth * this.state.current + 'px, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': this.slideWidth * this.items.length + 'px' };\r\n\t}\r\n\r\n\tget slideWidth() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// const slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tconst slideWidth = (window.innerWidth < 768 ? node.offsetWidth: (node.offsetWidth / 12 * 10)) + 40;\r\n\t\treturn slideWidth;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.resize$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => this.pushChanges());\r\n\t\t/*\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t\t*/\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize');\r\n\t}\r\n\r\n\t/*\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\t*/\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n}\r\n\r\nSliderCaseStudyComponent.meta = {\r\n\tselector: '[slider-case-study]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import SliderComponent from './slider.component';\r\n\r\nexport default class SliderGalleryComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\t/*\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\t*/\r\n\r\n\tnavTo(current) {\r\n\t\tsuper.navTo(current);\r\n\t}\r\n\r\n\tdoClose() {\r\n\t\tthis.close.next();\r\n\t}\r\n\r\n\ttoggleMode() {\r\n\t\tthis.mode.next();\r\n\t}\r\n}\r\n\r\nSliderGalleryComponent.meta = {\r\n\tselector: '[slider-gallery]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween', 'close', 'mode'],\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { animationFrameScheduler, combineLatest, fromEvent, interval } from 'rxjs';\r\nimport { map, takeUntil, tap } from 'rxjs/operators';\r\nimport SliderComponent from './slider.component';\r\n\r\nexport default class SliderHeroComponent extends SliderComponent {\r\n\r\n\tget items() {\r\n\t\treturn this.items_ || [];\r\n\t}\r\n\tset items(items) {\r\n\t\tif (this.items_ !== items) {\r\n\t\t\tthis.items_ = items;\r\n\t\t}\r\n\t}\r\n\r\n\tget current() {\r\n\t\treturn this.state.current || 0;\r\n\t}\r\n\tset current(current = 0) {\r\n\t\tif (this.state.current !== current) {\r\n\t\t\tthis.state.current = current;\r\n\t\t\tthis.change.next(current);\r\n\t\t}\r\n\t}\r\n\r\n\tget state() {\r\n\t\tif (!this.state_) {\r\n\t\t\tthis.state_ = { current: 0 };\r\n\t\t}\r\n\t\treturn this.state_;\r\n\t}\r\n\r\n\tget wrapperStyle() {\r\n\t\treturn { 'transform': 'translate3d(' + -100 * this.state.current + '%, 0, 0)' };\r\n\t}\r\n\r\n\tget innerStyle() {\r\n\t\treturn { 'width': 100 * this.items.length + '%' };\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.pagination$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.click$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\t/*\r\n\t\tthis.changed$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setActiveState();\r\n\t\t}, 500);\r\n\t\t*/\r\n\t}\r\n\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tthis.direction_ = direction;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\t\tif (direction == 1) {\r\n\t\t\t\tpagination.classList.remove('prev');\r\n\t\t\t\tpagination.classList.add('next');\r\n\t\t\t} else {\r\n\t\t\t\tpagination.classList.remove('next');\r\n\t\t\t\tpagination.classList.add('prev');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\traf$() {\r\n\t\treturn interval(0, animationFrameScheduler);\r\n\t}\r\n\r\n\tmouse$() {\r\n\t\tconst event = { x:0, y: 0};\r\n\t\treturn fromEvent(window, 'mousemove').pipe(\r\n\t\t\tmap(mouseEvent => {\r\n\t\t\t\tevent.x = mouseEvent.clientX;\r\n\t\t\t\tevent.y = mouseEvent.clientY;\r\n\t\t\t\treturn event;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tpagination$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst position = { x:0, y: 0};\r\n\t\tconst pagination = node.querySelector('.slider__pagination');\r\n\t\treturn combineLatest([this.mouse$(), this.raf$()]).pipe(\r\n\t\t\ttap(datas => {\r\n\t\t\t\tconst mouse = datas[0];\r\n\t\t\t\tposition.x += (mouse.x - position.x) / 20;\r\n\t\t\t\tposition.y += (mouse.y - position.y) / 20;\r\n\t\t\t\t// const rect = node.getBoundingClientRect();\r\n\t\t\t\tthis.direction = mouse.x > window.innerWidth / 2 ? 1 : -1;\r\n\t\t\t\tpagination.style.transform = `translateX(${position.x}px) translateY(${position.y}px)`;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tclick$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\tmap(event => {\r\n\t\t\t\tif (event.clientX > window.innerWidth / 2) {\r\n\t\t\t\t\t// if (this.hasNext()) {\r\n\t\t\t\t\t\tthis.navTo(this.state.current + 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if (this.hasPrev()) {\r\n\t\t\t\t\t\tthis.navTo(this.state.current - 1);\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tchanged$() {\r\n\t\treturn this.change.pipe(\r\n\t\t\ttap(() => this.setActiveState()),\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveState() {\r\n\t\tconst current = this.current;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst slides = Array.prototype.slice.call(node.querySelectorAll('.slider__slide'));\r\n\t\tslides.forEach((slide, i) => i === current ? slide.classList.add('active') : slide.classList.remove('active'));\r\n\t}\r\n\t*/\r\n\r\n\tonContentOver() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('content-over');\r\n\t}\r\n\r\n\tonContentOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('content-over');\r\n\t}\r\n}\r\n\r\nSliderHeroComponent.meta = {\r\n\tselector: '[slider-hero]',\r\n\tinputs: ['items', 'current', 'autoplay'],\r\n\toutputs: ['change', 'tween'],\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\nimport { getSlug } from \"../environment\";\r\n\r\nexport default class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\treturn getSlug(value);\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { Context } from 'rxcomp';\r\n\r\nexport default class VirtualItem extends Context {\r\n\tconstructor(key, $key, value, $value, index, count, parentInstance) {\r\n\t\tsuper(parentInstance);\r\n\t\tthis[key] = $key;\r\n\t\tthis[value] = $value;\r\n\t\tthis.index = index;\r\n\t\tthis.count = count;\r\n\t}\r\n\r\n\tget first() {\r\n\t\treturn this.index === 0;\r\n\t}\r\n\r\n\tget last() {\r\n\t\treturn this.index === this.count - 1;\r\n\t}\r\n\r\n\tget even() {\r\n\t\treturn this.index % 2 === 0;\r\n\t}\r\n\r\n\tget odd() {\r\n\t\treturn !this.even;\r\n\t}\r\n}\r\n","import { getContext, Structure } from 'rxcomp';\r\nimport { BehaviorSubject, fromEvent, merge } from 'rxjs';\r\nimport { auditTime, map, startWith, takeUntil, tap } from 'rxjs/operators';\r\nimport VirtualItem from './virtual.item';\r\n\r\nexport const VirtualMode = {\r\n\tResponsive: 1,\r\n\tGrid: 2,\r\n\tCentered: 3,\r\n\tList: 4\r\n};\r\n\r\nexport default class VirtualStructure extends Structure {\r\n\r\n\tonInit() {\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst template = node.firstElementChild;\r\n\t\tconst expression = node.getAttribute('*virtual');\r\n\t\tnode.removeAttribute('*virtual');\r\n\t\tnode.removeChild(template);\r\n\t\tconst tokens = (this.tokens = this.getExpressionTokens(expression));\r\n\t\tthis.virtualFunction = module.makeFunction(tokens.iterable);\r\n\t\tthis.container = node;\r\n\t\tthis.template = template;\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options = {\r\n\t\t\ttop: 0,\r\n\t\t\twidth: this.width,\r\n\t\t\tgutter: this.gutter,\r\n\t\t\tcontainerWidth: 0,\r\n\t\t\tcontainerHeight: 0,\r\n\t\t\tcols: [0],\r\n\t\t\tstrategy: 1\r\n\t\t};\r\n\t\tthis.cachedRects = {};\r\n\t\tthis.cachedInstances = [];\r\n\t\tthis.cacheNodes = [];\r\n\t\tthis.items$ = new BehaviorSubject([]);\r\n\t\tthis.update$()\r\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\r\n\t\t\t.subscribe(visibleItems => {\r\n\t\t\t\t// console.log(visibleItems.length);\r\n\t\t\t});\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\t// resolve\r\n\t\tconst items = module.resolve(this.virtualFunction, context.parentInstance, this) || [];\r\n\t\tthis.mode = this.mode || 1;\r\n\t\tthis.width = this.width || 250;\r\n\t\tthis.gutter = (this.gutter !== undefined) ? this.gutter : 20;\r\n\t\tthis.options.width = this.width;\r\n\t\tthis.updateView(true);\r\n\t\tthis.items$.next(items);\r\n\t}\r\n\r\n\tupdate$() {\r\n\t\treturn merge(this.scroll$(), this.resize$(), this.items$).pipe(\r\n\t\t\tmap(datas => {\r\n\t\t\t\tconst options = this.options;\r\n\t\t\t\tconst items = this.items$.getValue();\r\n\t\t\t\tconst total = items.length;\r\n\t\t\t\tthis.container.position = 'relative';\r\n\t\t\t\tlet highestHeight = 0;\r\n\t\t\t\tconst width = this.getWidth();\r\n\t\t\t\tconst gutter = this.getGutter(width);\r\n\t\t\t\tconst visibleItems = items.filter((item, i) => {\r\n\t\t\t\t\tlet col, height, top, left, bottom;\r\n\t\t\t\t\tlet rect = this.cachedRects[i];\r\n\t\t\t\t\tif (rect) {\r\n\t\t\t\t\t\tcol = rect.col;\r\n\t\t\t\t\t\theight = rect.height;\r\n\t\t\t\t\t\tleft = rect.left;\r\n\t\t\t\t\t\t// top = rect.top;\r\n\t\t\t\t\t\t// bottom = rect.bottom;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcol = this.getCol();\r\n\t\t\t\t\t\theight = this.getHeight(width, item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttop = options.cols[col];\r\n\t\t\t\t\tif (this.intersect(top + options.top, top + height + options.top, 0, options.containerHeight)) {\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tleft = this.getLeft(col, width, gutter);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst node = this.cachedNode(i, i, item, total);\r\n\t\t\t\t\t\tnode.style.position = 'absolute';\r\n\t\t\t\t\t\tnode.style.top = top + 'px';\r\n\t\t\t\t\t\tnode.style.left = left + 'px';\r\n\t\t\t\t\t\tnode.style.width = width + 'px';\r\n\t\t\t\t\t\tif (height !== node.offsetHeight) {\r\n\t\t\t\t\t\t\theight = node.offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\tif (!rect) {\r\n\t\t\t\t\t\t\tthis.cachedRects[i] = { col, width, height, left, top, bottom };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trect.height = height;\r\n\t\t\t\t\t\t\trect.bottom = bottom;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.removeNode(i);\r\n\t\t\t\t\t\tbottom = top + height + options.gutter;\r\n\t\t\t\t\t\toptions.cols[col] = bottom;\r\n\t\t\t\t\t\thighestHeight = Math.max(highestHeight, bottom);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet removeIndex = items.length;\r\n\t\t\t\twhile (removeIndex < this.cacheNodes.length) {\r\n\t\t\t\t\tthis.removeNode(removeIndex);\r\n\t\t\t\t\tremoveIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tthis.cacheNodes.length = items.length;\r\n\t\t\t\tthis.container.style.height = `${highestHeight}px`;\r\n\t\t\t\treturn visibleItems;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tgetCols() {\r\n\t\tconst options = this.options;\r\n\t\tconst cols = Math.floor((options.containerWidth + options.gutter) / (options.width + options.gutter)) || 1;\r\n\t\treturn new Array(cols).fill(0);\r\n\t}\r\n\r\n\tgetCol() {\r\n\t\tconst options = this.options;\r\n\t\tlet col;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tcol = options.cols.reduce((p, c, i, a) => {\r\n\t\t\t\t\treturn c < a[p] ? i : p;\r\n\t\t\t\t}, 0);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tcol = 0;\r\n\t\t}\r\n\t\treturn col;\r\n\t}\r\n\r\n\tgetWidth() {\r\n\t\tconst options = this.options;\r\n\t\tlet width;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\twidth = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\twidth = (options.containerWidth - (options.cols.length - 1) * options.gutter) / options.cols.length;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\twidth = options.containerWidth;\r\n\t\t}\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(width, item) {\r\n\t\tconst options = this.options;\r\n\t\tlet height;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\theight = options.width;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\theight = 80;\r\n\t\t}\r\n\t\treturn height;\r\n\t}\r\n\r\n\tgetGutter(width) {\r\n\t\tconst options = this.options;\r\n\t\tlet gutter;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tgutter = options.gutter;\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tgutter = (options.containerWidth - options.cols.length * width) / (options.cols.length - 1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tgutter = 0;\r\n\t\t}\r\n\t\treturn gutter;\r\n\t}\r\n\r\n\tgetLeft(index, width, gutter) {\r\n\t\tconst options = this.options;\r\n\t\tlet left;\r\n\t\tswitch (this.mode) {\r\n\t\t\tcase VirtualMode.Grid:\r\n\t\t\tcase VirtualMode.Responsive:\r\n\t\t\t\tleft = index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.Centered:\r\n\t\t\t\tleft = (options.containerWidth - options.cols.length * (width + gutter) + gutter) / 2 + index * (width + gutter);\r\n\t\t\t\tbreak;\r\n\t\t\tcase VirtualMode.List:\r\n\t\t\tdefault:\r\n\t\t\t\tleft = 0;\r\n\t\t}\r\n\t\treturn left;\r\n\t}\r\n\r\n\tcachedNode(index, i, value, total) {\r\n\t\tif (this.cacheNodes[index]) {\r\n\t\t\treturn this.updateNode(index, i, value);\r\n\t\t} else {\r\n\t\t\treturn this.createNode(index, i, value, total);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateNode(index, i, value, total) {\r\n\t\tconst clonedNode = this.template.cloneNode(true);\r\n\t\tdelete clonedNode.rxcompId;\r\n\t\tthis.container.appendChild(clonedNode);\r\n\t\tthis.cacheNodes[index] = clonedNode;\r\n\t\tconst context = getContext(this);\r\n\t\tconst module = context.module;\r\n\t\tconst tokens = this.tokens;\r\n\t\tconst args = [tokens.key, i, tokens.value, value, i, total, context.parentInstance];\r\n\t\tconst instance = module.makeInstance(clonedNode, VirtualItem, context.selector, context.parentInstance, args);\r\n\t\tconst forItemContext = getContext(instance);\r\n\t\tmodule.compile(clonedNode, forItemContext.instance);\r\n\t\tthis.cachedInstances[index] = instance;\r\n\t\treturn clonedNode;\r\n\t}\r\n\r\n\tupdateNode(index, i, value) {\r\n\t\tconst instance = this.cachedInstances[index];\r\n\t\tconst tokens = this.tokens;\r\n\t\tif (instance[tokens.key] !== i) {\r\n\t\t\tinstance[tokens.key] = i;\r\n\t\t\tinstance[tokens.value] = value;\r\n\t\t\tinstance.pushChanges();\r\n\t\t}\r\n\t\t// console.log(index, i, value);\r\n\t\treturn this.cacheNodes[index];\r\n\t}\r\n\r\n\tremoveNode(index) {\r\n\t\tthis.cachedInstances[index] = undefined;\r\n\t\tconst node = this.cacheNodes[index];\r\n\t\tif (node) {\r\n\t\t\tconst context = getContext(this);\r\n\t\t\tconst module = context.module;\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodule.remove(node);\r\n\t\t}\r\n\t\tthis.cacheNodes[index] = undefined;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tintersect(top1, bottom1, top2, bottom2) {\r\n\t\treturn top2 < bottom1 && bottom2 > top1;\r\n\t}\r\n\r\n\tresize$() {\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tauditTime(100),\r\n\t\t\tstartWith(null),\r\n\t\t\ttap(() => this.updateView(true))\r\n\t\t);\r\n\t}\r\n\r\n\tscroll$(node) {\r\n\t\treturn fromEvent(window, 'scroll').pipe(tap(() => this.updateView()));\r\n\t}\r\n\r\n\tupdateView(reset) {\r\n\t\tconst rect = this.container.getBoundingClientRect();\r\n\t\tconst options = this.options;\r\n\t\toptions.top = rect.top;\r\n\t\toptions.containerWidth = rect.width;\r\n\t\toptions.containerHeight = window.innerHeight;\r\n\t\toptions.cols = this.getCols();\r\n\t\tif (reset) {\r\n\t\t\tthis.cachedRects = {};\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpressionTokens(expression) {\r\n\t\tif (expression === null) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tif (expression.trim().indexOf('let ') === -1 || expression.trim().indexOf(' of ') === -1) {\r\n\t\t\tthrow new Error('invalid virtual');\r\n\t\t}\r\n\t\tconst expressions = expression\r\n\t\t\t.split(';')\r\n\t\t\t.map(x => x.trim())\r\n\t\t\t.filter(x => x !== '');\r\n\t\tconst virtualExpressions = expressions[0].split(' of ').map(x => x.trim());\r\n\t\tlet value = virtualExpressions[0].replace(/\\s*let\\s*/, '');\r\n\t\tconst iterable = virtualExpressions[1];\r\n\t\tlet key = 'index';\r\n\t\tconst keyValueMatches = value.match(/\\[(.+)\\s*,\\s*(.+)\\]/);\r\n\t\tif (keyValueMatches) {\r\n\t\t\tkey = keyValueMatches[1];\r\n\t\t\tvalue = keyValueMatches[2];\r\n\t\t}\r\n\t\tif (expressions.length > 1) {\r\n\t\t\tconst indexExpressions = expressions[1].split(/\\s*let\\s*|\\s*=\\s*index/).map(x => x.trim());\r\n\t\t\tif (indexExpressions.length === 3) {\r\n\t\t\t\tkey = indexExpressions[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { key, value, iterable };\r\n\t}\r\n}\r\n\r\nVirtualStructure.meta = {\r\n\tselector: '[*virtual]',\r\n\tinputs: ['mode', 'width', 'gutter']\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AppComponent from './app.component';\r\nimport AppearStaggerDirective from './appear/appear-stagger.directive';\r\nimport AppearDirective from './appear/appear.directive';\r\nimport AuthForgotComponent from './auth/auth-forgot.component';\r\nimport AuthModalComponent from './auth/auth-modal.component';\r\nimport AuthSigninComponent from './auth/auth-signin.component';\r\nimport AuthSignupComponent from './auth/auth-signup.component';\r\nimport AuthComponent from './auth/auth.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport ContactsSimpleComponent from './contacts/contacts-simple.component';\r\nimport ContactsComponent from './contacts/contacts.component';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport ControlCheckboxComponent from './forms/control-checkbox.component';\r\nimport ControlCustomSelectComponent from './forms/control-custom-select.component';\r\nimport ControlPasswordComponent from './forms/control-password.component';\r\nimport ControlTextComponent from './forms/control-text.component';\r\nimport ControlTextareaComponent from './forms/control-textarea.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport GalleryModalComponent from './gallery/gallery-modal.component';\r\nimport GalleryComponent from './gallery/gallery.component';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport MagazineDropdownComponent from './magazine/magazine-dropdown.component';\r\nimport MagazineComponent from './magazine/magazine.component';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport ShareComponent from './share/share.component';\r\nimport SliderCaseStudyComponent from './slider/slider-case-study.component';\r\nimport SliderGalleryComponent from './slider/slider-gallery.component';\r\nimport SliderHeroComponent from './slider/slider-hero.component';\r\nimport SliderComponent from './slider/slider.component';\r\nimport SlugPipe from './slug/slug.pipe';\r\nimport VirtualStructure from './virtual/virtual.structure';\r\n\r\nexport default class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAppearDirective,\r\n\t\tAppearStaggerDirective,\r\n\t\tAuthComponent,\r\n\t\tAuthForgotComponent,\r\n\t\tAuthModalComponent,\r\n\t\tAuthSigninComponent,\r\n\t\tAuthSignupComponent,\r\n\t\tClickOutsideDirective,\r\n\t\tContactsComponent,\r\n\t\tContactsSimpleComponent,\r\n\t\tControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlPasswordComponent,\r\n\t\tControlTextComponent,\r\n\t\tControlTextareaComponent,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tGalleryComponent,\r\n\t\tGalleryModalComponent,\r\n\t\tHeaderComponent,\r\n\t\tHtmlPipe,\r\n\t\tMagazineComponent,\r\n\t\tMagazineDropdownComponent,\r\n\t\tModalComponent,\r\n\t\tModalOutletComponent,\r\n\t\tScrollToDirective,\r\n\t\tSecureDirective,\r\n\t\tShareComponent,\r\n\t\tSliderComponent,\r\n\t\tSliderCaseStudyComponent,\r\n\t\tSliderGalleryComponent,\r\n\t\tSliderHeroComponent,\r\n\t\tSlugPipe,\r\n\t\tVirtualStructure\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}