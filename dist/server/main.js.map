{"version":3,"file":"src/js/main.server.js","sources":["../../src/js/environment.js","../../src/js/main.server.js"],"sourcesContent":["export const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => {} } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const STATIC = NODE ? false : (window && (window.location.port === '40525' || window.location.host === 'actarian.github.io'));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tNAME: 'stipa',\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION,\r\n\tRESOURCE: '/docs/',\r\n\tSTATIC_RESOURCE: './',\r\n\tAPI: '/api',\r\n\tSTATIC_API: (DEVELOPMENT && !STATIC) ? '/Modules/Events/Client/docs/api' : './api',\r\n};\r\n\r\nexport function getApiUrl(url, useStatic) {\r\n\tconst base = (useStatic || STATIC) ? ENV.STATIC_API : ENV.API;\r\n\tconst json = (useStatic || STATIC) ? '.json' : '';\r\n\treturn `${base}${url}${json}`;\r\n}\r\nexport function getResourceRoot() {\r\n\treturn STATIC ? ENV.STATIC_RESOURCE : ENV.RESOURCE;\r\n}\r\nexport function getSlug(url) {\r\n\tif (!url) {\r\n\t\treturn url;\r\n\t}\r\n\tif (url.indexOf(`/${ENV.NAME}`) !== 0) {\r\n\t\treturn url;\r\n\t}\r\n\tif (STATIC) {\r\n\t\tconsole.log(url);\r\n\t\treturn url;\r\n\t}\r\n\turl = url.replace(`/${ENV.NAME}`, '');\r\n\turl = url.replace('.html', '');\r\n\treturn `/it/it${url}`;\r\n}\r\n\r\nexport class Environment {\r\n\r\n\tget href() {\r\n\t\tif (window.location.host.indexOf('herokuapp') !== -1) {\r\n\t\t\treturn 'https://raw.githubusercontent.com/actarian/stipa/master/docs/';\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tget host() {\r\n\t\tlet host = window.location.host.replace('127.0.0.1', '192.168.1.2');\r\n\t\tif (host.substr(host.length - 1, 1) === '/') {\r\n\t\t\thost = host.substr(0, host.length - 1);\r\n\t\t}\r\n\t\treturn `${window.location.protocol}//${host}${BASE_HREF}`;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport const environment = new Environment({\r\n\tport: 5000,\r\n});\r\n","const express = require('express');\r\nconst https = require('https');\r\nconst fs = require('fs');\r\nconst bodyParser = require('body-parser');\r\nconst serveStatic = require('serve-static');\r\nconst path = require('path');\r\n\r\nimport { environment } from './environment';\r\n\r\nconst PORT = process.env.PORT || environment.port;\r\n\r\nvar app = express();\r\n\r\napp.disable('x-powered-by');\r\n\r\napp.use(express.static(path.join(__dirname, '../../docs/')));\r\napp.use('/stipa', serveStatic(path.join(__dirname, '../../docs/')));\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.raw());\r\n\r\napp.get('/', function(request, response) {\r\n\tresponse.sendFile(path.join(__dirname, '../../docs/index.html'));\r\n});\r\n\r\napp.listen(PORT, () => {\r\n\tconsole.log(`Listening on ${ PORT }`);\r\n});\r\n"],"names":["NODE","module","exports","PARAMS","get","URLSearchParams","window","location","search","DEBUG","BASE_HREF","document","querySelector","getAttribute","DEVELOPMENT","indexOf","host","split","Environment","replace","substr","length","protocol","options","Object","assign","environment","port","express","require","https","fs","bodyParser","serveStatic","path","PORT","process","env","app","disable","use","static","join","__dirname","urlencoded","extended","json","raw","request","response","sendFile","listen","console","log"],"mappings":"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"}
